"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[62350],{603905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>m});var r=t(667294);function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,r,s=function(e,a){if(null==e)return{};var t,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var n=r.createContext({}),g=function(e){var a=r.useContext(n),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},c=function(e){var a=g(e.components);return r.createElement(n.Provider,{value:a},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},p=r.forwardRef((function(e,a){var t=e.components,s=e.mdxType,i=e.originalType,n=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=g(t),p=s,m=d["".concat(n,".").concat(p)]||d[p]||u[p]||i;return t?r.createElement(m,o(o({ref:a},c),{},{components:t})):r.createElement(m,o({ref:a},c))}));function m(e,a){var t=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var i=t.length,o=new Array(i);o[0]=p;var l={};for(var n in a)hasOwnProperty.call(a,n)&&(l[n]=a[n]);l.originalType=e,l[d]="string"==typeof e?e:s,o[1]=l;for(var g=2;g<i;g++)o[g]=t[g];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},608374:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>n,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>g});var r=t(487462),s=(t(667294),t(603905));const i={},o="Storage",l={unversionedId:"databases/sql-databases/aws-aurora/storage",id:"databases/sql-databases/aws-aurora/storage",title:"Storage",description:"AWS re [REPEAT 1] Amazon Aurora storage demystified: How it all works (DAT309-R1)",source:"@site/docs/databases/sql-databases/aws-aurora/storage.md",sourceDirName:"databases/sql-databases/aws-aurora",slug:"/databases/sql-databases/aws-aurora/storage",permalink:"/databases/sql-databases/aws-aurora/storage",draft:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/main/docs/databases/sql-databases/aws-aurora/storage.md",tags:[],version:"current",lastUpdatedAt:1677955187,formattedLastUpdatedAt:"Mar 4, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Others",permalink:"/databases/sql-databases/aws-aurora/others"},next:{title:"Redshift",permalink:"/databases/sql-databases/aws-redshift/"}},n={},g=[{value:"Cost",id:"cost",level:2},{value:"Storage",id:"storage-1",level:2},{value:"Cloud native database architecture",id:"cloud-native-database-architecture",level:2},{value:"Traditional database architecture",id:"traditional-database-architecture",level:2},{value:"Aurora approach: Log is the database",id:"aurora-approach-log-is-the-database",level:2},{value:"Aurora approach: Offload checkpointing to the storage fleet",id:"aurora-approach-offload-checkpointing-to-the-storage-fleet",level:2},{value:"Durability at scale",id:"durability-at-scale",level:2},{value:"Aurora uses segmented storage",id:"aurora-uses-segmented-storage",level:2},{value:"Performance results",id:"performance-results",level:2},{value:"Global databases",id:"global-databases",level:2},{value:"Fast database cloning",id:"fast-database-cloning",level:2},{value:"Database backtrack",id:"database-backtrack",level:2}],c={toc:g},d="wrapper";function u(e){let{components:a,...i}=e;return(0,s.kt)(d,(0,r.Z)({},c,i,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"storage"},"Storage"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=DrtwAOND1Pc"},"AWS re:Invent 2019: [REPEAT 1] Amazon Aurora storage demystified: How it all works (DAT309-R1)")),(0,s.kt)("h2",{id:"cost"},"Cost"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"Storage Rate"),(0,s.kt)("th",{parentName:"tr",align:null},"$0.11per GB-month"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},"I/O Rate"),(0,s.kt)("td",{parentName:"tr",align:null},"$0.22per 1 million requests")))),(0,s.kt)("p",null,"S3 - $0.025per GB"),(0,s.kt)("h2",{id:"storage-1"},"Storage"),(0,s.kt)("p",null,"The minimumstorageis 10GB. Based on yourdatabaseusage, your AmazonAurora storagewill automatically grow, up to 64 TB, in 10GB increments with no impact todatabaseperformance. There is no need to provisionstoragein advance\n",(0,s.kt)("img",{alt:"image",src:t(769366).Z,width:"1100",height:"605"}),"\n",(0,s.kt)("img",{alt:"image",src:t(411099).Z,width:"1101",height:"641"}),"\n",(0,s.kt)("img",{alt:"image",src:t(348360).Z,width:"1099",height:"602"}),"\n",(0,s.kt)("img",{alt:"image",src:t(10135).Z,width:"1101",height:"610"})),(0,s.kt)("h2",{id:"cloud-native-database-architecture"},"Cloud native database architecture"),(0,s.kt)("h2",{id:"traditional-database-architecture"},"Traditional database architecture"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Databases are all about I/O"),(0,s.kt)("li",{parentName:"ul"},"Design principles for > 40 years",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Increase I/O bandwidth"),(0,s.kt)("li",{parentName:"ul"},"Decrease number of I/Os")))),(0,s.kt)("h2",{id:"aurora-approach-log-is-the-database"},"Aurora approach: Log is the database"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(269711).Z,width:"946",height:"410"})),(0,s.kt)("h2",{id:"aurora-approach-offload-checkpointing-to-the-storage-fleet"},"Aurora approach: Offload checkpointing to the storage fleet"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(769362).Z,width:"1101",height:"558"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(794804).Z,width:"1101",height:"598"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(260378).Z,width:"1099",height:"624"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(27667).Z,width:"1099",height:"538"})),(0,s.kt)("h2",{id:"durability-at-scale"},"Durability at scale"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(380021).Z,width:"1100",height:"458"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(959826).Z,width:"1100",height:"410"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(119433).Z,width:"1099",height:"458"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(510304).Z,width:"1099",height:"479"})),(0,s.kt)("h2",{id:"aurora-uses-segmented-storage"},"Aurora uses segmented storage"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Partition volume into n fixed-size segments",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Replicate each segment 6 ways into a protection group (PG)"))),(0,s.kt)("li",{parentName:"ul"},"Trade-off between likelihood of faults and time to repair",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"If segments are too small, failures are more likely"),(0,s.kt)("li",{parentName:"ul"},"If segments are too big, repairs take too long"))),(0,s.kt)("li",{parentName:"ul"},'Choose the biggest size that lets us repair "fast enough"',(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"We currently picked a segment size of 10 GB, as we repair a 10-GB segment in less than a minute\n",(0,s.kt)("img",{alt:"image",src:t(937244).Z,width:"1099",height:"495"}))))),(0,s.kt)("h2",{id:"performance-results"},"Performance results"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(769265).Z,width:"1100",height:"527"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(648928).Z,width:"1099",height:"589"})),(0,s.kt)("h2",{id:"global-databases"},"Global databases"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(916363).Z,width:"1099",height:"554"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(494553).Z,width:"1100",height:"519"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(526224).Z,width:"1100",height:"470"})),(0,s.kt)("h2",{id:"fast-database-cloning"},"Fast database cloning"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(252814).Z,width:"1099",height:"605"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(256187).Z,width:"1099",height:"677"})),(0,s.kt)("h2",{id:"database-backtrack"},"Database backtrack"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"image",src:t(452819).Z,width:"1100",height:"631"})))}u.isMDXComponent=!0},769366:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image1-6b54108efb09dac2c6995c81c83b944d.jpg"},380021:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image10-8ed8d8a0b37c4ba7276f7cd36c84b570.jpg"},959826:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image11-9ac44961ef8f738458a1e5bed5040445.jpg"},119433:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image12-c99c5fbe09337792eb683c83322e9753.jpg"},510304:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image13-c81f6c64765eeb6f535455bb7695fcca.jpg"},937244:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image14-e005b629a9360b7ad8d4ea1da78ecf89.jpg"},769265:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image15-2843b3caac0f52e9c3e588dbe2aa1822.jpg"},648928:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image16-4dbf800050a63f1c68501ac67ccaf2e7.jpg"},916363:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image17-d547e24d5e5b85fffc147385db8b6152.jpg"},494553:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image18-125507b6644a5894b81e517b40364835.jpg"},526224:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image19-e56991762b3baef97230ee0d45f46f7b.jpg"},411099:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image2-c99d938ada9120dce118d72265004ddb.jpg"},252814:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image20-f086c2398cd3c32ef5eafe5e553cc676.jpg"},256187:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image21-a8af69fa717975cb8dd686ef4b71a638.jpg"},452819:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image22-238a1c934a7b65346bcf9f3d43d35015.jpg"},348360:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image3-a700915d08a653041aa303c7d5dd96e4.jpg"},10135:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image4-94a84812095ecea25922e94feba44d85.jpg"},269711:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image5-d5be37affc51216ef100fec45acd7891.jpg"},769362:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image6-9960e4db0f6e699e4285ce9be6432b81.jpg"},794804:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image7-d7d0d5b819e39e07645cfdde70988166.jpg"},260378:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image8-c6d8a95ac4574eece1d1c72ab70b0369.jpg"},27667:(e,a,t)=>{t.d(a,{Z:()=>r});const r=t.p+"assets/images/AWS-Aurora_Storage-image9-0ad590411b3ef1c51060500fb0ed5934.jpg"}}]);