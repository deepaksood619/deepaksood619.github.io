"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[25956],{603905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>f});var n=a(667294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,c=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),h=l(a),m=r,f=h["".concat(c,".").concat(m)]||h[m]||p[m]||s;return a?n.createElement(f,i(i({ref:t},u),{},{components:a})):n.createElement(f,i({ref:t},u))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,i=new Array(s);i[0]=m;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o[h]="string"==typeof e?e:r,i[1]=o;for(var l=2;l<s;l++)i[l]=a[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},863782:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var n=a(487462),r=(a(667294),a(603905));const s={},i="Kafka schema-registry",o={unversionedId:"technologies/kafka/kafka-schema-registry",id:"technologies/kafka/kafka-schema-registry",title:"Kafka schema-registry",description:"Schema Registry provides a serving layer for your metadata. It provides a RESTful interface for storing and retrieving Avro schemas. It stores a versioned history of all schemas, provides multiple compatibility settings and allows evolution of schemas according to the configured compatibility settings and expanded Avro support. It provides serializers that plug into Kafka clients that handle schema storage and retrieval for Kafka messages that are sent in the Avro format.",source:"@site/docs/technologies/kafka/kafka-schema-registry.md",sourceDirName:"technologies/kafka",slug:"/technologies/kafka/kafka-schema-registry",permalink:"/technologies/kafka/kafka-schema-registry",draft:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/main/docs/technologies/kafka/kafka-schema-registry.md",tags:[],version:"current",lastUpdatedAt:1677955187,formattedLastUpdatedAt:"Mar 4, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"kafka-rest proxy",permalink:"/technologies/kafka/kafka-rest-proxy"},next:{title:"Kafka Streams",permalink:"/technologies/kafka/kafka-streams"}},c={},l=[{value:"Schema Registry Commands",id:"schema-registry-commands",level:2},{value:"References",id:"references",level:2}],u={toc:l},h="wrapper";function p(e){let{components:t,...a}=e;return(0,r.kt)(h,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"kafka-schema-registry"},"Kafka schema-registry"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.confluent.io/blog/schemas-contracts-compatibility"},"https://www.confluent.io/blog/schemas-contracts-compatibility")),(0,r.kt)("p",null,"Schema Registry provides a serving layer for your metadata. It provides a RESTful interface for storing and retrieving Avro schemas. It stores a ",(0,r.kt)("strong",{parentName:"p"},"versioned history")," of all schemas, provides multiple compatibility settings and allows evolution of schemas according to the configured compatibility settings and expanded Avro support. It provides serializers that plug into Kafka clients that handle schema storage and retrieval for Kafka messages that are sent in the Avro format."),(0,r.kt)("p",null,"Schema Registry is a distributed storage layer for Avro Schemas which uses Kafka as its underlying storage mechanism. Some key design decisions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Assigns globally unique ID to each registered schema. Allocated IDs are guaranteed to be monotonically increasing but not necessarily consecutive."),(0,r.kt)("li",{parentName:"ul"},"Kafka provides the durable backend, and functions as a write-ahead changelog for the state of Schema Registry and the schemas it contains."),(0,r.kt)("li",{parentName:"ul"},"Schema Registry is designed to be distributed, with single-master architecture, and ZooKeeper/Kafka coordinates master election (based on the configuration).")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# to change the compatibility of schema-registry\ndocker exec schema-registry curl -X PUT -H "Content-Type: application/vnd.schemaregistry.v1+json" \\\n    --data \'{"compatibility": "NONE"}\' \\\n    http://schema-registry:8081/config\n')),(0,r.kt)("h2",{id:"schema-registry-commands"},"Schema Registry Commands"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# Register a new version of a schema under the subject "Kafka-key"\ncurl -X POST -H "Content-Type: application/vnd.schemaregistry.v1+json"\n--data \'{"schema": "{"type": "string"}"}\'\n<http://localhost:8081/subjects/Kafka-key/versions>\n{"id":1}\n\n# Register a new version of a schema under the subject "Kafka-value"\ncurl -X POST -H "Content-Type: application/vnd.schemaregistry.v1+json"\n--data \'{"schema": "{"type": "string"}"}\'\n<http://localhost:8081/subjects/Kafka-value/versions>\n{"id":1}\n\n# List all subjects\ncurl -X GET <http://localhost:8081/subjects>\n["Kafka-value","Kafka-key"]\n\n# List all schema versions registered under the subject "Kafka-value"\ncurl -X GET <http://localhost:8081/subjects/Kafka-value/versions>\n[1]\n\n# Fetch a schema by globally unique id 1\ncurl -X GET <http://localhost:8081/schemas/ids/1>\n{"schema":""string""}\n\n# Fetch version 1 of the schema registered under subject "Kafka-value"\ncurl -X GET <http://localhost:8081/subjects/Kafka-value/versions/1>\n{"subject":"Kafka-value","version":1,"id":1,"schema":""string""}\n\n# Fetch the most recently registered schema under subject "Kafka-value"\ncurl -X GET <http://localhost:8081/subjects/Kafka-value/versions/latest>\n{"subject":"Kafka-value","version":1,"id":1,"schema":""string""}\n\n# Delete version 3 of the schema registered under subject "Kafka-value"\ncurl -X DELETE <http://localhost:8081/subjects/Kafka-value/versions/3>\n3\n\n# Delete all versions of the schema registered under subject "Kafka-value"\ncurl -X DELETE <http://localhost:8081/subjects/Kafka-value>\n[1, 2, 3, 4, 5]\n\n# Check whether a schema has been registered under subject "Kafka-key"\ncurl -X POST -H "Content-Type: application/vnd.schemaregistry.v1+json"\n--data \'{"schema": "{"type": "string"}"}\'\n<http://localhost:8081/subjects/Kafka-key>\n{"subject":"Kafka-key","version":1,"id":1,"schema":""string""}\n\n# Test compatibility of a schema with the latest schema under subject "Kafka-value"\ncurl -X POST -H "Content-Type: application/vnd.schemaregistry.v1+json"\n--data \'{"schema": "{"type": "string"}"}\'\n<http://localhost:8081/compatibility/subjects/Kafka-value/versions/latest>\n{"is_compatible":true}\n\n# Get top level config\ncurl -X GET <http://localhost:8081/config>\n{"compatibilityLevel":"BACKWARD"}\n\n# Update compatibility requirements globally\ncurl -X PUT -H "Content-Type: application/vnd.schemaregistry.v1+json"\n--data \'{"compatibility": "NONE"}\'\n<http://localhost:8081/config>\n{"compatibility":"NONE"}\n\n# Update compatibility requirements under the subject "Kafka-value"\ncurl -X PUT -H "Content-Type: application/vnd.schemaregistry.v1+json"\n--data \'{"compatibility": "BACKWARD"}\'\n<http://localhost:8081/config/Kafka-value>\n{"compatibility":"BACKWARD"}\n')),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.confluent.io/current/schema-registry/docs/index.html"},"https://docs.confluent.io/current/schema-registry/docs/index.html")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/confluentinc/schema-registry"},"https://github.com/confluentinc/schema-registry")))}p.isMDXComponent=!0}}]);