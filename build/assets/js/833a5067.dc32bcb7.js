"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[32923],{603905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var r=n(667294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return n?r.createElement(h,o(o({ref:t},p),{},{components:n})):r.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},608643:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(487462),a=(n(667294),n(603905));const i={},o="MQTT - SN",s={unversionedId:"networking/mqtt/mqtt-sn",id:"networking/mqtt/mqtt-sn",title:"MQTT - SN",description:"MQTT for Sensor Networks",source:"@site/docs/networking/mqtt/mqtt-sn.md",sourceDirName:"networking/mqtt",slug:"/networking/mqtt/mqtt-sn",permalink:"/networking/mqtt/mqtt-sn",draft:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/main/docs/networking/mqtt/mqtt-sn.md",tags:[],version:"current",lastUpdatedAt:1677955187,formattedLastUpdatedAt:"Mar 4, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"MQTT over WebSockets",permalink:"/networking/mqtt/mqtt-over-websockets"},next:{title:"Others",permalink:"/networking/mqtt/others"}},l={},c=[{value:"QOS Levels",id:"qos-levels",level:2},{value:"Subscribing to MQTT-SN Topics",id:"subscribing-to-mqtt-sn-topics",level:2},{value:"MQTT-SN clients have the ability to discover brokers",id:"mqtt-sn-clients-have-the-ability-to-discover-brokers",level:2},{value:"MQTT-SN Architecture",id:"mqtt-sn-architecture",level:2},{value:"MQTT-SN vs MQTT",id:"mqtt-sn-vs-mqtt",level:2},{value:"Advantages",id:"advantages",level:2},{value:"Disadvantages",id:"disadvantages",level:2},{value:"References",id:"references",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...i}=e;return(0,a.kt)(d,(0,r.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"mqtt---sn"},"MQTT - SN"),(0,a.kt)("p",null,"MQTT for Sensor Networks"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"MQTT-SNusesUDPand notTCPfor its transport."),(0,a.kt)("li",{parentName:"ul"},"UDPis a connection less protocol whereasTCPis connection orientated."),(0,a.kt)("li",{parentName:"ul"},"MQTT-SNis designed, as far as possible., to work in the same way as MQTT"),(0,a.kt)("li",{parentName:"ul"},"In that regard MQTT-SN usually requires a connection to the broker before it can send and receive messages."),(0,a.kt)("li",{parentName:"ul"},"This connection is in effect avirtual connection.")),(0,a.kt)("h2",{id:"qos-levels"},"QOS Levels"),(0,a.kt)("p",null,"MQTT-SN supports QOS 0,1,2 as per MQTT, but it also supports a special publish QOS of 3 or -1."),(0,a.kt)("p",null,"Note: it is known as QOS -1 but the QOS flag in the message is set to 11 or decimal 3."),(0,a.kt)("p",null,"Publishing messages with a QOS of -1 or 3 doesn't require an initial connection to have been set up."),(0,a.kt)("p",null,"You can publish using the topic id or short topic name."),(0,a.kt)("h2",{id:"subscribing-to-mqtt-sn-topics"},"Subscribing to MQTT-SN Topics"),(0,a.kt)("p",null,"You cansubscribe to a topicsusing 3 different formats:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A long topic name as per MQTT e.g.house/sensor1"),(0,a.kt)("li",{parentName:"ul"},"A short topic name of 2 characters only e.g.s1"),(0,a.kt)("li",{parentName:"ul"},"A pre-defined topic id (integer) e.g. 1")),(0,a.kt)("p",null,"Wildcardscan be used as per MQTT, but they only make sense for long topic names."),(0,a.kt)("h2",{id:"mqtt-sn-clients-have-the-ability-to-discover-brokers"},"MQTT-SN clients have the ability to discover brokers"),(0,a.kt)("p",null,"There are two mechanisms used:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Advertising by a broker or Gateway"),(0,a.kt)("li",{parentName:"ul"},"A Search by the client")),(0,a.kt)("p",null,"Both methods use a multicast packet. Currently there is no standardized multicast packet address."),(0,a.kt)("h2",{id:"mqtt-sn-architecture"},"MQTT-SN Architecture"),(0,a.kt)("p",null,"The architecture of MQTT-SN can be represented by the following figure -"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(13257).Z,width:"694",height:"394"})),(0,a.kt)("p",null,"There are three kinds of MQTT-SN components -"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"MQTT-SN clients,"),(0,a.kt)("li",{parentName:"ol"},"MQTT-SN gateways (GW) and"),(0,a.kt)("li",{parentName:"ol"},"MQTT-SN forwarders.")),(0,a.kt)("p",null,"MQTT-SN clients connect themselves to a MQTT server via a MQTT-SN GW using the MQTT-SN protocol. A MQTT-SN GW may or may not be integrated with a MQTT server. In case of a stand-alone GW, the MQTT protocol is used between the MQTT server and the MQTT-SN GW. Its main function is the translation between MQTT and MQTT-SN. MQTT-SN clients can also access a GW via a forwarder in case the GW is not directly attached to their network. The forwarder simply encapsulates the MQTT-SN frames it receives on the wireless side and forwards them unchanged to the GW. In the opposite direction, it releases the frames it receives from the gateway and sends them to the clients, unchanged too."),(0,a.kt)("p",null,"There are two types of Gateways depending on how a Gateway performs the protocol translation between MQTT and MQTT-SN:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Transparent Gateway - For each MQTT-SN client, transparent gateway will form an individual MQTT connection to the MQTT broker.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Aggregating Gateway - In this, for all MQTT-SN clients, the Aggregating gateway will form only one MQTT connection to the MQTT broker. The advantage of using aggregating gateway is shown where WSN network has large number of sensor nodes because it helps in reducing the number of MQTT connections that broker has to create with individual client."))),(0,a.kt)("h2",{id:"mqtt-sn-vs-mqtt"},"MQTT-SN vs MQTT"),(0,a.kt)("h2",{id:"advantages"},"Advantages"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"MQTT-SN supports topic ID instead of topic name. First client sends a registration request with topic name and topic ID (2 octets) to a broker. After the registration is accepted, client uses topic ID to refer the topic name. This saves media bandwidth and device memory - it is quite expensive to keep and send topic name e.g:home/livingroom/socket2/meterin memory for each publish message.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Topic name to topic ID can be preconfigured in MQTT-SN gateway, so that even registration message can be skipped before publish.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"MQTT-SN does not require TCP/IP stack. It can be used over a serial link (preferred way), where with simple link protocol (to distinguish different devices on the line) overhead is really small. Alternatively it can be used over UDP, which is less hungry than TCP."))),(0,a.kt)("h2",{id:"disadvantages"},"Disadvantages"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"You need some sort of gateway, which is nothing else than a TCP or UDP stack moved to a different device. This can also be a simple device (e.g.: Arduino Uno) just serving multiple MQTT-SN devices without doing other job.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"MQTT-SN is not well supported."))),(0,a.kt)("h2",{id:"references"},"References"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"http://www.steves-internet-guide.com/mqtt-sn"},"http://www.steves-internet-guide.com/mqtt-sn")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.bevywise.com/blog/benefits-of-mqtt-sn-over-mqtt"},"https://www.bevywise.com/blog/benefits-of-mqtt-sn-over-mqtt"),"\nClients -"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/eclipse/paho.mqtt-sn.embedded-c"},"https://github.com/eclipse/paho.mqtt-sn.embedded-c")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.eclipse.org/paho/clients/c/embedded-sn"},"https://www.eclipse.org/paho/clients/c/embedded-sn")))}u.isMDXComponent=!0},13257:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/MQTT-SN-image1-8f797a3aed8bd62b8ef3b22e2ec0ea60.jpg"}}]);