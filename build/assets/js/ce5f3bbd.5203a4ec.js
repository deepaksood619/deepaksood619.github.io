"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[35025],{603905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(667294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),p=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(i.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),h=o,m=c["".concat(i,".").concat(h)]||c[h]||u[h]||r;return n?a.createElement(m,s(s({ref:t},d),{},{components:n})):a.createElement(m,s({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=h;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[c]="string"==typeof e?e:o,s[1]=l;for(var p=2;p<r;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},510440:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(487462),o=(n(667294),n(603905));const r={},s="Advanced",l={unversionedId:"python/django/advanced",id:"python/django/advanced",title:"Advanced",description:"1. Atomic Transactions",source:"@site/docs/python/django/advanced.md",sourceDirName:"python/django",slug:"/python/django/advanced",permalink:"/python/django/advanced",draft:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/main/docs/python/django/advanced.md",tags:[],version:"current",lastUpdatedAt:1677955187,formattedLastUpdatedAt:"Mar 4, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Admin site",permalink:"/python/django/admin-site"},next:{title:"Architecture",permalink:"/python/django/architecture"}},i={},p=[{value:"Signals - https://anonbadger.wordpress.com/2018/12/15/python-signal-handlers-and-exceptions",id:"signals---httpsanonbadgerwordpresscom20181215python-signal-handlers-and-exceptions",level:2},{value:"Context Processors",id:"context-processors",level:2},{value:"Middlewares",id:"middlewares",level:2},{value:"Problems",id:"problems",level:2},{value:"N+1 Select Query Issue",id:"n1-select-query-issue",level:2},{value:"Example",id:"example",level:2},{value:"Django 3.0",id:"django-30",level:2}],d={toc:p},c="wrapper";function u(e){let{components:t,...r}=e;return(0,o.kt)(c,(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"advanced"},"Advanced"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Atomic Transactions")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Using + as the related_name when we do not want django to automatically create related_name")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Using decorators")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"No matter what strategy you pick, or what is your business model, always use one, and only one Django model to handle the authentication.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Never user the built-in Django User model directly, even if the built-in Django User implementation fulfill all the requirements of your application."))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"image",src:n(536513).Z,width:"738",height:"994"})),(0,o.kt)("h2",{id:"signals---httpsanonbadgerwordpresscom20181215python-signal-handlers-and-exceptions"},"Signals - ",(0,o.kt)("a",{parentName:"h2",href:"https://anonbadger.wordpress.com/2018/12/15/python-signal-handlers-and-exceptions"},"https://anonbadger.wordpress.com/2018/12/15/python-signal-handlers-and-exceptions")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=Kc1Q_ayAeQk&list=PL-51WBLyFTg2vW-_6XBoUpE7vpmoR3ztO&index=18"},"Introduction to Django Signals | Django (3.0) Crash Course Tutorials (pt 18)")),(0,o.kt)("h2",{id:"context-processors"},"Context Processors"),(0,o.kt)("p",null,"A context processor has a very simple interface: It's just a Python function that takes one argument, anHttpRequestobject, and returns a dictionary that gets added to the template context."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://djangobook.com/writing-context-processors"},"https://djangobook.com/writing-context-processors")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/2.2/ref/templates/api/#using-requestcontext"},"https://docs.djangoproject.com/en/2.2/ref/templates/api/#using-requestcontext")),(0,o.kt)("h2",{id:"middlewares"},"Middlewares"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://www.gustavwengel.dk/django-middleware-walkthrough"},"http://www.gustavwengel.dk/django-middleware-walkthrough")),(0,o.kt)("h2",{id:"problems"},"Problems"),(0,o.kt)("h2",{id:"n1-select-query-issue"},"N+1 Select Query Issue"),(0,o.kt)("p",null,'This problem occurs when the code needs to load the children of a parent-child relationship (the "many" in the "one-to-many"). Most ORMs have lazy-loading enabled by default, so queries are issued for the parent record, and then one query for EACH child record. As you can expect, doing N+1 queries instead of a single query will flood your database with queries, which is something we can and should avoid.'),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"Let's say you have a collection ofCarobjects (database rows), and eachCarhas a collection ofWheelobjects (also rows). In other words, Car->Wheelis a 1-to-many relationship."),(0,o.kt)("p",null,"Now, let's say you need to iterate through all the cars, and for each one, print out a list of the wheels. The naive O/R implementation would do the following:"),(0,o.kt)("p",null,"SELECT * FROM Cars;"),(0,o.kt)("p",null,"And thenfor eachCar:"),(0,o.kt)("p",null,"SELECT * FROM Wheel WHERE CarId = ?"),(0,o.kt)("p",null,"In other words, you have one select for the Cars, and then N additional selects, where N is the total number of cars."),(0,o.kt)("p",null,"Alternatively, one could get all wheels and perform the lookups in memory:"),(0,o.kt)("p",null,"SELECT * FROM Wheel"),(0,o.kt)("p",null,"This reduces the number of round-trips to the database from N+1 to 2. Most ORM tools give you several ways to prevent N+1 selects."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://theorangeone.net/posts/django-orm-performance"},"https://theorangeone.net/posts/django-orm-performance")),(0,o.kt)("h2",{id:"django-30"},"Django 3.0"),(0,o.kt)("p",null,"ASGI Support"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/3.0/releases/3.0"},"https://docs.djangoproject.com/en/3.0/releases/3.0")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://arunrocks.com/a-guide-to-asgi-in-django-30-and-its-performance"},"https://arunrocks.com/a-guide-to-asgi-in-django-30-and-its-performance")))}u.isMDXComponent=!0},536513:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Advanced-image1-dfc3bbe59a7a898f9d89589e8376a806.jpg"}}]);