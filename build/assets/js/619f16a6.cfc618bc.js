"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[61043],{603905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var r=a(667294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),d=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(a),c=n,h=u["".concat(s,".").concat(c)]||u[c]||m[c]||o;return a?r.createElement(h,l(l({ref:t},p),{},{components:a})):r.createElement(h,l({ref:t},p))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:n,l[1]=i;for(var d=2;d<o;d++)l[d]=a[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},593923:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var r=a(487462),n=(a(667294),a(603905));const o={},l="Operations",i={unversionedId:"devops/monitoring/istio/operations",id:"devops/monitoring/istio/operations",title:"Operations",description:"Load Balancer",source:"@site/docs/devops/monitoring/istio/operations.md",sourceDirName:"devops/monitoring/istio",slug:"/devops/monitoring/istio/operations",permalink:"/devops/monitoring/istio/operations",draft:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/main/docs/devops/monitoring/istio/operations.md",tags:[],version:"current",lastUpdatedAt:1677955187,formattedLastUpdatedAt:"Mar 4, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Observability",permalink:"/devops/monitoring/istio/observability"},next:{title:"Others",permalink:"/devops/monitoring/istio/others"}},s={},d=[{value:"Load Balancer",id:"load-balancer",level:2},{value:"To Add a New Port to the IngressGateway",id:"to-add-a-new-port-to-the-ingressgateway",level:2},{value:"To Add Certificates to an SSL Service",id:"to-add-certificates-to-an-ssl-service",level:2},{value:"Deployment",id:"deployment",level:2},{value:"Deployment Models",id:"deployment-models",level:2},{value:"Cluster models",id:"cluster-models",level:2},{value:"Network models",id:"network-models",level:2},{value:"Control plane models",id:"control-plane-models",level:2},{value:"Identity and trust models",id:"identity-and-trust-models",level:2},{value:"Mesh models",id:"mesh-models",level:2},{value:"Tenancy models",id:"tenancy-models",level:2},{value:"Integrations",id:"integrations",level:2}],p={toc:d},u="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(u,(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"operations"},"Operations"),(0,n.kt)("h2",{id:"load-balancer"},"Load Balancer"),(0,n.kt)("p",null,"Make sure your load balancer configuration forwards to all your worker nodes. This will ensure that the traffic gets forwarded even if some nodes are down."),(0,n.kt)("h2",{id:"to-add-a-new-port-to-the-ingressgateway"},"To Add a New Port to the IngressGateway"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Add the port to an existingGatewayor configure a new. If it's a TCP service also add the port to theVirtualService, not needed for HTTP since it matches on layer 7 (domain name, etc.)."),(0,n.kt)("li",{parentName:"ul"},"Add the port to theingressgateway service. If you are using servicetype: LoadBalancer, you are done."),(0,n.kt)("li",{parentName:"ul"},"Otherwise, open the port in the load balancer and forward traffic to all worker nodes.")),(0,n.kt)("h2",{id:"to-add-certificates-to-an-ssl-service"},"To Add Certificates to an SSL Service"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Add the TLS secrets to the cluster."),(0,n.kt)("li",{parentName:"ul"},"Mount the secret volumes in theingressgateway."),(0,n.kt)("li",{parentName:"ul"},"Configure theGatewayto use the newly created secrets.")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://blog.jayway.com/2018/10/22/understanding-istio-ingress-gateway-in-kubernetes"},"https://blog.jayway.com/2018/10/22/understanding-istio-ingress-gateway-in-kubernetes")),(0,n.kt)("h2",{id:"deployment"},"Deployment"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Architecture"),(0,n.kt)("li",{parentName:"ul"},"Deployment Models"),(0,n.kt)("li",{parentName:"ul"},"Performance and Scalability"),(0,n.kt)("li",{parentName:"ul"},"Pods and Services")),(0,n.kt)("h2",{id:"deployment-models"},"Deployment Models"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"single or multiple cluster")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"single or multiple network")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"single or multiple control plane")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"single or multiple mesh"))),(0,n.kt)("p",null,"All combinations are possible, although some are more common than others and some are clearly not very interesting (for example, multiple mesh in a single cluster)."),(0,n.kt)("h2",{id:"cluster-models"},"Cluster models"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Single cluster"),(0,n.kt)("li",{parentName:"ul"},"Multiple cluster")),(0,n.kt)("h2",{id:"network-models"},"Network models"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Single network"),(0,n.kt)("li",{parentName:"ul"},"Multiple networks")),(0,n.kt)("h2",{id:"control-plane-models"},"Control plane models"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"One cluster per region (lowest availability)"),(0,n.kt)("li",{parentName:"ul"},"Multiple clusters per region"),(0,n.kt)("li",{parentName:"ul"},"One cluster per zone"),(0,n.kt)("li",{parentName:"ul"},"Multiple clusters per zone"),(0,n.kt)("li",{parentName:"ul"},"Each cluster (highest availability)")),(0,n.kt)("h2",{id:"identity-and-trust-models"},"Identity and trust models"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Trust within a mesh"),(0,n.kt)("li",{parentName:"ul"},"Trust between meshes")),(0,n.kt)("h2",{id:"mesh-models"},"Mesh models"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Single mesh"),(0,n.kt)("li",{parentName:"ul"},"Multiple meshes")),(0,n.kt)("h2",{id:"tenancy-models"},"Tenancy models"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Namespace tenancy"),(0,n.kt)("li",{parentName:"ul"},"Cluster tenancy")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://istio.io/docs/ops/deployment/deployment-models"},"https://istio.io/docs/ops/deployment/deployment-models")),(0,n.kt)("h2",{id:"integrations"},"Integrations"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Prometheus"),(0,n.kt)("li",{parentName:"ul"},"cert-manager")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://cert-manager.io/"},"cert-manager")," is a tool that automates certificate management. This can be integrated with Istio gateways to manage TLS certificates."),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://istio.io/docs/ops/integrations/certmanager"},"https://istio.io/docs/ops/integrations/certmanager")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Grafana",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://grafana.com/grafana/dashboards/7639"},"Mesh Dashboard")," provides an overview of all services in the mesh.")))),(0,n.kt)("p",null,"Provides Global Summary view of the Mesh and shows HTTP/gRPC and TCP workloads in the Mesh."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://grafana.com/grafana/dashboards/7636"},"Service Dashboard")," provides a detailed breakdown of metrics for a service.")),(0,n.kt)("p",null,"Provides metrics about requests and responses for each individual service within the mesh (HTTP/gRPC and TCP). This also provides metrics about client and service workloads for this service."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://grafana.com/grafana/dashboards/7630"},"Workload Dashboard")," provides a detailed breakdown of metrics for a workload.")),(0,n.kt)("p",null,"Provides metrics about requests and responses for each individual workload within the mesh (HTTP/gRPC and TCP). This also provides metrics about inbound workloads and outbound services for this workload."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://grafana.com/grafana/dashboards/11829"},"Performance Dashboard")," monitors the resource usage of the mesh."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://grafana.com/grafana/dashboards/7645"},"Control Plane Dashboard")," monitors the health and performance of the control plane.")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://istio.io/docs/ops/integrations/grafana"},"https://istio.io/docs/ops/integrations/grafana")))}m.isMDXComponent=!0}}]);