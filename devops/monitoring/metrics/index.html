<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-devops/monitoring/metrics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Metrics | Deep Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deepaksood619.github.io/img/timeline_compressed.webp"><meta data-rh="true" name="twitter:image" content="https://deepaksood619.github.io/img/timeline_compressed.webp"><meta data-rh="true" property="og:url" content="https://deepaksood619.github.io/devops/monitoring/metrics"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Metrics | Deep Notes"><meta data-rh="true" name="description" content="Monitoring Introduction"><meta data-rh="true" property="og:description" content="Monitoring Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://deepaksood619.github.io/devops/monitoring/metrics"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/devops/monitoring/metrics" hreflang="en"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/devops/monitoring/metrics" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X3OY8NGHVH-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSZMJXWSH3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSZMJXWSH3",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TN3KBF4",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Deep Notes" href="/opensearch.xml">
<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(53, 120, 229)">

<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5616865131274062" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.de817004.css">
<script src="/assets/js/runtime~main.2a3a7caa.js" defer="defer"></script>
<script src="/assets/js/main.55a720b7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN3KBF4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deep Notes</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/deepaksood619" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.linkedin.com/in/deepaksood619/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/about-deepak-sood/">About Deepak Sood</a><button aria-label="Expand sidebar category &#x27;About Deepak Sood&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ai/">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/algorithms/">Algorithms</a><button aria-label="Expand sidebar category &#x27;Algorithms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/book-summaries/">Book Summaries</a><button aria-label="Expand sidebar category &#x27;Book Summaries&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/">Cloud</a><button aria-label="Expand sidebar category &#x27;Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/computer-science/">Computer Science</a><button aria-label="Expand sidebar category &#x27;Computer Science&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/courses/">Courses / Certifications</a><button aria-label="Expand sidebar category &#x27;Courses / Certifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-structures/">Data Structures</a><button aria-label="Expand sidebar category &#x27;Data Structures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases/">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/decentralized-applications/">Decentralized Applications</a><button aria-label="Expand sidebar category &#x27;Decentralized Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/devops/">DevOps</a><button aria-label="Collapse sidebar category &#x27;DevOps&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/ansible/">Ansible</a><button aria-label="Expand sidebar category &#x27;Ansible&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/devops-intro/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/docker/">Docker</a><button aria-label="Expand sidebar category &#x27;Docker&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/ides/">IDEs</a><button aria-label="Expand sidebar category &#x27;IDEs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/kubernetes/">Kubernetes</a><button aria-label="Expand sidebar category &#x27;Kubernetes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/devops/monitoring/">Monitoring</a><button aria-label="Collapse sidebar category &#x27;Monitoring&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring/grafana-loki">Grafana Loki</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring/grafana">Grafana</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring/graphite">Graphite</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/monitoring/istio/">Istio</a><button aria-label="Expand sidebar category &#x27;Istio&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring/linkerd">Linkerd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/devops/monitoring/metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring/open-tracing">Open Tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring/others">Others</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/monitoring/prometheus/">Prometheus</a><button aria-label="Expand sidebar category &#x27;Prometheus&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/devops/monitoring/service-mesh">Service Mesh</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/monitoring/telegraf/">Telegraf</a><button aria-label="Expand sidebar category &#x27;Telegraf&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/others/">Other DevOps</a><button aria-label="Expand sidebar category &#x27;Other DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/servers/">Servers</a><button aria-label="Expand sidebar category &#x27;Servers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/terminal-bash/">Terminal Bash</a><button aria-label="Expand sidebar category &#x27;Terminal Bash&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/devops/terraform/">Terraform</a><button aria-label="Expand sidebar category &#x27;Terraform&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/economics/">Economics</a><button aria-label="Expand sidebar category &#x27;Economics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/knowledge/">Knowledge</a><button aria-label="Expand sidebar category &#x27;Knowledge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/languages/">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/management/">Management</a><button aria-label="Expand sidebar category &#x27;Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/mathematics/">Mathematics</a><button aria-label="Expand sidebar category &#x27;Mathematics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/psychology/">Psychology</a><button aria-label="Expand sidebar category &#x27;Psychology&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Deepak&#x27;s Wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/technologies/">Technologies</a><button aria-label="Expand sidebar category &#x27;Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devops/"><span itemprop="name">DevOps</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/devops/monitoring/"><span itemprop="name">Monitoring</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Metrics</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Metrics</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-introduction">Monitoring Introduction<a href="#monitoring-introduction" class="hash-link" aria-label="Direct link to Monitoring Introduction" title="Direct link to Monitoring Introduction">​</a></h2>
<ul>
<li>
<p>What are your monitoring goals?</p>
</li>
<li>
<p>Which resources will you monitor?</p>
</li>
<li>
<p>How often will you monitor these resources?</p>
</li>
<li>
<p>Which monitoring tools will you use?</p>
</li>
<li>
<p>Who will perform the monitoring tasks?</p>
</li>
<li>
<p>Whom should be notified when something goes wrong?</p>
</li>
<li>
<p>Gives you a base line</p>
</li>
<li>
<p>Tells you what has happened</p>
<ul>
<li>Useful to investigate performance issues</li>
</ul>
</li>
<li>
<p>Allows you to proactively handle potential issues</p>
</li>
<li>
<p>Make sure to configure alerts so you can react appropriately to all events based on the severity level</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-percentiles">Use Percentiles<a href="#use-percentiles" class="hash-link" aria-label="Direct link to Use Percentiles" title="Direct link to Use Percentiles">​</a></h3>
<p>The term &quot;perc50&quot; indicates you&#x27;re looking at a number where 50% of requests are at or below that number.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-do-averages-suck">Why do averages suck?🤔<a href="#why-do-averages-suck" class="hash-link" aria-label="Direct link to Why do averages suck?🤔" title="Direct link to Why do averages suck?🤔">​</a></h4>
<p>Consider this example: you have some code which measures how long your users wait for a page to load. You have collected 6 data points, in milliseconds: 62, 920, 37, 20, 850, and 45. If you average these load times, you get 322. But 322ms is not representative of your users&#x27; experience. From this data, it&#x27;s clear some of your users are having a very fast experience (less than 70ms), and some are having a very slow experience (greater than 850ms). But none of them are having a mathematically average experience. Bimodal distributions like this are very common when measuring response times. Using an average can mislead you.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-fix-it">How to fix it?🤔<a href="#how-to-fix-it" class="hash-link" aria-label="Direct link to How to fix it?🤔" title="Direct link to How to fix it?🤔">​</a></h4>
<p>The way to avoid being misled is to use percentiles. A good place to start is P50 and P90. To compute P50, which is really just the median, sort the data points in ascending order: 20, 37, 45, 62, 850, 920. You get P50 by throwing out the bottom 50% of the points and looking at the first point that remains: 62ms. You get P90 by throwing out the bottom 90% of the points and looking at the first point which remains: 920.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-percentiles-has-these-advantages">Using percentiles has these advantages<a href="#using-percentiles-has-these-advantages" class="hash-link" aria-label="Direct link to Using percentiles has these advantages" title="Direct link to Using percentiles has these advantages">​</a></h4>
<ol>
<li>Percentiles aren&#x27;t skewed by outliers like averages are.</li>
<li>Every percentile data point is an actual user experience, unlike averages.</li>
</ol>
<p>You can plot percentiles on a time series graph just like averages. My current team plots P50, P90, P99, and P99.9. This is pretty common. We also have separate alarm thresholds for each percentile. Our P50 latency, for example, tends to be less than one third of our P99 latency (and less than a fifth of P99.9), so we have different thresholds for alarming on these different percentiles.</p>
<p>Percentile metrics work for more than just latency. Imagine you have a set of 50 web servers, and you want to know how much memory they are using. If you look at the average memory utilization across all hosts, you won&#x27;t necessarily see a representative picture. Instead, use the P0, P50, and P100 of all the hosts&#x27; memory. Then you have a nice picture that tells you the lowest usage, highest usage and median usage. As a bonus, you also get to see the difference between the high and low host, giving you valuable insights into how your application behaves on multiple hosts.</p>
<p>When you use percentile-based metrics, you get a much better sense for reality.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-alarms">Use Alarms<a href="#use-alarms" class="hash-link" aria-label="Direct link to Use Alarms" title="Direct link to Use Alarms">​</a></h3>
<p>This one is obvious. A metric without an alarm is a manual chore you&#x27;ve assigned yourself, dooming you to one of two fates:</p>
<ul>
<li>Fate 1: You&#x27;ll never look at it (what&#x27;s the point of having the metric)</li>
<li>Fate 2: You&#x27;ll force yourself to look at it on a routine schedule (boring)</li>
</ul>
<ol>
<li>Grace Periods</li>
<li>Daytime Alarms</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adaptive-thresholds">Adaptive Thresholds<a href="#adaptive-thresholds" class="hash-link" aria-label="Direct link to Adaptive Thresholds" title="Direct link to Adaptive Thresholds">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="missing-metric">Missing Metric<a href="#missing-metric" class="hash-link" aria-label="Direct link to Missing Metric" title="Direct link to Missing Metric">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="regular-automated-reviews">Regular Automated Reviews<a href="#regular-automated-reviews" class="hash-link" aria-label="Direct link to Regular Automated Reviews" title="Direct link to Regular Automated Reviews">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-to-measure">What to measure<a href="#what-to-measure" class="hash-link" aria-label="Direct link to What to measure" title="Direct link to What to measure">​</a></h3>
<p>If you&#x27;re building a web application or web service, here are some more specific ideas to get you started:</p>
<ul>
<li><strong>P50, P90, P99 latency</strong>: This is the amount of time the server spends processing each HTTP request, between the time the request arrives at your code, and the time your code generates the response. Slice this per URL and in aggregate.</li>
<li><strong>Latency breakdown</strong>: time spent in application code, time spent waiting for the database, cache, or downstream services. There are great tools that can help with this like NewRelic (but last I checked, NewRelic only used averages and not percentiles, ugh).</li>
<li>Number of requests that result in response code 200--299, 400--499, and 500--599. Set alarms on the last 2. A 400-series alarm may tell you that your clients can&#x27;t figure out how to use your API. A 500-series alarm tells you you&#x27;ve got serious issues.</li>
<li>Number of GET, PUT, POST, DELETE, etc. requests.</li>
<li><strong>Total number of requests.</strong> Set an alarm that tells you if traffic surges unexpectedly, or if request counts go to zero!</li>
<li><strong>Application-specific load times (P50, P90, P99).</strong> Twitter uses <a href="https://blog.alexmaccaw.com/time-to-first-tweet" target="_blank" rel="noopener noreferrer">time to first tweet</a>. We use the <a href="https://www.w3.org/TR/navigation-timing/#sec-window.performance-attribute" target="_blank" rel="noopener noreferrer">performance API</a> to determine how long it took before the user could start interacting with our page. What is the best measure of your application&#x27;s startup time?</li>
<li>P50, P90, P99 request and response payload sizes.</li>
<li>P50, P90, and P99 gzip compression ratio. How much is gzip helping your clients? Are your payloads actually compressible?</li>
<li><strong>Number of load balancer spillovers.</strong> How often are your inbound requests rejected because your web servers are at capacity.</li>
<li>Cache hit and miss counts.</li>
<li>P0, P50, and P100 for the sizes of objects stored in your cache.</li>
<li><strong>The basic host metrics:</strong> disk utilization, disk I/O rate, memory utilization, and cpu utilization. One very useful metric lots of people don&#x27;t think of is <a href="https://www.howtogeek.com/194642/understanding-the-load-average-on-linux-and-other-unix-like-systems/" target="_blank" rel="noopener noreferrer">load average</a>, which tells you how well your hardware (including disk and network) is keeping up with the demands of your software.</li>
<li><strong>Service input/output operations.</strong> If you&#x27;re on AWS, you may be using services like ELB or DynamoDB which throttle you if you exceed a certain I/O threshold. If this happens, your app can slow to a crawl and even become unavailable (this happened to my team a few years ago, and it was a pain to diagnose - we added lots of alarms after this event).</li>
<li><strong>Unhealthy host count.</strong> This is a common metric reported by web load balancers. It tells you how many hosts your load balancer currently considers healthy.</li>
<li><strong>Number of connections open</strong> to each web server, database host, queue server, and any other service you have.</li>
</ul>
<p><a href="https://medium.com/@djsmith42/how-to-metric-edafaf959fc7" target="_blank" rel="noopener noreferrer">https://medium.com/@djsmith42/how-to-metric-edafaf959fc7</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="latency">Latency<a href="#latency" class="hash-link" aria-label="Direct link to Latency" title="Direct link to Latency">​</a></h2>
<p>Latency is the interval between two points in time. you measure the start time and the end time of an event, and you want to know how long it took.</p>
<p><strong>&quot;unix timestamp&quot;</strong>, the number of seconds (or milliseconds) since january 1st, 1970. This time is sometimes referred to as &quot;wall clock time&quot;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h3>
<p>the code for measuring latency in your programs will look something like this:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">started_at </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time_monotonic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># code that does something, and takes some time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">finished_at </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> time_monotonic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">duration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> finished_at </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> started_at</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to measure the latency of an entire incoming request, you can wrap that around the entire request/response lifecycle. in many cases, this can be accomplished through the use of middlewares or event listeners. adding code that tracks latency is often called &quot;<strong>instrumentation</strong>&quot;.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation">Aggregation<a href="#aggregation" class="hash-link" aria-label="Direct link to Aggregation" title="Direct link to Aggregation">​</a></h3>
<p>in practice you want to summarise or &quot;aggregate&quot; the data into fewer numbers that are easier to deal with.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="average">Average<a href="#average" class="hash-link" aria-label="Direct link to Average" title="Direct link to Average">​</a></h3>
<p>in the context of latency, the average is not a meaningful metric</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="percentiles">Percentiles<a href="#percentiles" class="hash-link" aria-label="Direct link to Percentiles" title="Direct link to Percentiles">​</a></h3>
<ol>
<li>P99</li>
</ol>
<p>the 99th percentile latency is the worst latency that was observed by 99% of all requests. it is the maximum value if you ignore the top 1%.</p>
<ol start="2">
<li>P999</li>
<li>P100</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="histograms">Histograms<a href="#histograms" class="hash-link" aria-label="Direct link to Histograms" title="Direct link to Histograms">​</a></h3>
<p>storing and computing percentiles is quite expensive.</p>
<p>but there is a data structure that can approximate percentiles, is very storage efficient, and allows results to be merged. that data structure is called ahistogram.</p>
<p>a histogram is a representation of a distribution. it stores the range and count of values.</p>
<p>instead of storing raw values, a histogram creates bins (or buckets) and then sorts values into those buckets. it only stores the count of each bucket.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h4>
<p>here is a histogram over a 10 second window of request data:</p>
<p>0 - 50 [1620]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎ ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎ (74.55%)
50 - 100 [ 447]: ∎∎∎∎∎∎∎∎∎∎ (20.57%)
100 - 150 [ 49]: ∎ (2.25%)
150 - 200 [ 15]: (0.69%)
200 - 250 [ 15]: (0.69%)
250 - 300 [ 10]: (0.46%)
300 - 350 [ 6]: (0.28%)
350 - 400 [ 1]: (0.05%)
400 - 450 [ 0]: (0.00%)
450 - 500 [ 4]: (0.18%)</p>
<p>you can see that most requests are quite fast, 75% of all requests are under 50ms. the next 20% are under 100ms. and the remaining 5% are in the slower range.</p>
<p>this phenomenon is quite common in web latency data, it&#x27;s called &quot;<strong>tail latency</strong>&quot;. the high percentiles correspond to this tail</p>
<p>a nice property of histograms is that because they are based on counters, they can be merged by adding up the counters. you can merge histograms from different machines, or combine them in the time dimension (this is called a &quot;roll-up&quot;).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="heatmap">Heatmap<a href="#heatmap" class="hash-link" aria-label="Direct link to Heatmap" title="Direct link to Heatmap">​</a></h4>
<p>a latency heatmap is a way of visualizing histograms over time.</p>
<p>it visualises the full distribution by plotting time in the x-axis and latency buckets in the y-axis. the color of the bucket indicates how many values fell into that bucket. this conveys much more information than a single percentile would.</p>
<p><a href="https://igor.io/latency" target="_blank" rel="noopener noreferrer">https://igor.io/latency</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-latency">What is Latency<a href="#what-is-latency" class="hash-link" aria-label="Direct link to What is Latency" title="Direct link to What is Latency">​</a></h3>
<p>Latency is defined as <strong>the time it took one operation to happen</strong>. This means every operation has its own latency - with one million operations there areone million latencies. As a result, latencycannotbe measured aswork units / time. What we&#x27;re interested in is how latency behaves. To do this meaningfully, we must describe the complete distribution of latencies. Latency almost never follows a normal, Gaussian, or Poisson distribution, so looking at averages, medians, and even standard deviations is useless.</p>
<p>Latency tends to be heavily multi-modal, and part of this is attributed to &quot;hiccups&quot; in response time. Hiccupsresemble periodic freezes and can be due to any number of reasons - GC pauses, hypervisor pauses, context switches, interrupts, database reindexing, cache buffer flushes to disk, etc. These hiccups never resemble normal distributions and the shift between modes is often rapid and eclectic.</p>
<p>The number one indicator you should never get rid of is the maximum value. That is not noise, that is the signal. The rest of it is noise.</p>
<p><a href="https://bravenewgeek.com/everything-you-know-about-latency-is-wrong" target="_blank" rel="noopener noreferrer">https://bravenewgeek.com/everything-you-know-about-latency-is-wrong</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="long-tail-latency">Long Tail Latency<a href="#long-tail-latency" class="hash-link" aria-label="Direct link to Long Tail Latency" title="Direct link to Long Tail Latency">​</a></h2>
<p>Network latencies between machines within a data center can be low. Generally, all communication takes a few microseconds, but every once in a while, some packets take a few milliseconds. The packets that take a few milliseconds generally belong to the 90th percentile or higher of latencies. Longtail latencies occur when these high percentiles begin to have values that go well beyond the average and can be magnitudes greater than the average.</p>
<p><a href="https://engineering.linkedin.com/performance/who-moved-my-99th-percentile-latency" target="_blank" rel="noopener noreferrer">https://engineering.linkedin.com/performance/who-moved-my-99th-percentile-latency</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="instrumentation">Instrumentation<a href="#instrumentation" class="hash-link" aria-label="Direct link to Instrumentation" title="Direct link to Instrumentation">​</a></h2>
<p>In the context of <a href="https://en.wikipedia.org/wiki/Computer_programming" target="_blank" rel="noopener noreferrer">computer programming</a>, instrumentationrefers to an ability to monitor or measure the level of a product&#x27;s performance, to diagnose errors, and to write <a href="https://en.wikipedia.org/wiki/Tracing_(software)" target="_blank" rel="noopener noreferrer">trace</a> information.Programmers implement instrumentation in the form of code <a href="https://en.wikipedia.org/wiki/Instruction_(computer_science)" target="_blank" rel="noopener noreferrer">instructions</a> that monitor specific components in a system (for example, instructions may output logging information to appear on the screen). When an application contains instrumentation code, it can be managed by using a management tool. Instrumentation is necessary to review the performance of the application. Instrumentation approaches can be of two types: source instrumentation and binary instrumentation.</p>
<p>In programming, instrumentation means the ability of an application to incorporate:</p>
<ul>
<li><strong>Code <a href="https://en.wikipedia.org/wiki/Tracing_(software)" target="_blank" rel="noopener noreferrer">tracing</a> -</strong> receiving informative messages about the execution of an application at run time.</li>
<li><strong><a href="https://en.wikipedia.org/wiki/Debugging" target="_blank" rel="noopener noreferrer">Debugging</a> and (structured)<a href="https://en.wikipedia.org/wiki/Exception_handling" target="_blank" rel="noopener noreferrer">exception handling</a> -</strong> tracking down and fixing programming errors in an application under development.</li>
<li><strong><a href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)" target="_blank" rel="noopener noreferrer">Profiling</a> -</strong> a means by which dynamic program behaviors can be measured during a training run with a representative input. This is useful for properties of a program that cannot be <a href="https://en.wikipedia.org/wiki/Static_program_analysis" target="_blank" rel="noopener noreferrer">analyzed statically</a> with sufficient precision, such as <a href="https://en.wikipedia.org/wiki/Alias_analysis" target="_blank" rel="noopener noreferrer">alias analysis</a>.<!-- -->
<ul>
<li>Flame Graph</li>
</ul>
</li>
<li><strong>Performance counters -</strong> components that allow the tracking of the performance of the application.</li>
<li><strong><a href="https://en.wikipedia.org/wiki/Computer_data_logging" target="_blank" rel="noopener noreferrer">Computer data logging</a> -</strong> components that allow the logging and tracking of major events in the execution of the application.</li>
</ul>
<p><a href="https://en.wikipedia.org/wiki/Instrumentation_(computer_programming)" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Instrumentation_(computer_programming)</a></p>
<p><a href="https://labs.meanpug.com/custom-application-metrics-with-django-prometheus-and-kubernetes" target="_blank" rel="noopener noreferrer">https://labs.meanpug.com/custom-application-metrics-with-django-prometheus-and-kubernetes</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-kubernetes">Metrics (Kubernetes)<a href="#metrics-kubernetes" class="hash-link" aria-label="Direct link to Metrics (Kubernetes)" title="Direct link to Metrics (Kubernetes)">​</a></h2>
<p>Determining Important Metrics</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="four-golden-signals-sre">Four Golden Signals (SRE)<a href="#four-golden-signals-sre" class="hash-link" aria-label="Direct link to Four Golden Signals (SRE)" title="Direct link to Four Golden Signals (SRE)">​</a></h3>
<ol>
<li>Latency - The time it takes to service a request</li>
<li>Errors - The rate of requests that fail, either explicily, implicitly, or by policy</li>
<li>Traffic - A measure of how much demand is being placed on your system</li>
<li>Saturation - How &quot;full&quot; your service is</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-method-by-brendan-gregg-for-reasoning-about-system-resources">USE Method (by Brendan Gregg for reasoning about system resources)<a href="#use-method-by-brendan-gregg-for-reasoning-about-system-resources" class="hash-link" aria-label="Direct link to USE Method (by Brendan Gregg for reasoning about system resources)" title="Direct link to USE Method (by Brendan Gregg for reasoning about system resources)">​</a></h3>
<ol>
<li>Utilization - The average time that the resource was busy servicing work</li>
<li>Saturation - The degree to which the resource has extra work which it can&#x27;t service, often queued</li>
<li>Errors - The count of error events</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="red-method-by-tom-wilkie-for-measuring-services">RED Method by Tom Wilkie for measuring services<a href="#red-method-by-tom-wilkie-for-measuring-services" class="hash-link" aria-label="Direct link to RED Method by Tom Wilkie for measuring services" title="Direct link to RED Method by Tom Wilkie for measuring services">​</a></h3>
<ol>
<li>Rate - The number of requests per second</li>
<li>Errors - The number of errors per second</li>
<li>Duration - The length of time required to service the request</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="source-of-metrics-in-kubernetes">Source of Metrics in Kubernetes<a href="#source-of-metrics-in-kubernetes" class="hash-link" aria-label="Direct link to Source of Metrics in Kubernetes" title="Direct link to Source of Metrics in Kubernetes">​</a></h2>
<ul>
<li>
<p>USE for Node CPU</p>
<ul>
<li>Utilization - node_cpu</li>
<li>Saturation - Load Average, node_load1</li>
</ul>
</li>
<li>
<p>USE for Node Memory</p>
<ul>
<li>
<p>Utilization</p>
<ul>
<li>node_memory_MemAvailable</li>
<li>node_memory_MemTotal</li>
<li>kube_node_status_capacity_memory_bytes</li>
<li>kube_node_status_allocatable_memory_bytes</li>
</ul>
</li>
<li>
<p>Saturation - Don&#x27;t go into swap</p>
</li>
<li>
<p>Errors</p>
<ul>
<li>node_edac_correctable_errors_total</li>
<li>node_edac_uncorrectable_errors_total</li>
<li>node_edac_csrow_correctable_errors_total</li>
<li>node_edac_csrow_uncorrectable_errors_total</li>
</ul>
</li>
</ul>
</li>
<li>
<p>USE for container cpu</p>
<ul>
<li>Utilization - container_cpu_usage_seconds_total</li>
<li>Saturation - container_cpu_cfs_throttled_seconds_total</li>
</ul>
</li>
<li>
<p>USE for container memory</p>
<ul>
<li>
<p>Utilization</p>
<ul>
<li>container_memory_usage_bytes</li>
<li>container_memory_working_set_bytes</li>
</ul>
</li>
<li>
<p>Saturation - Ratio of container_memory_working_set_bytes / kube_pod_container_resource_limits_memory_bytes</p>
</li>
<li>
<p>Errors</p>
<ul>
<li>container_memory_failcnt</li>
<li>container_memory_failures_total</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sources-of-metrics">Sources of Metrics<a href="#sources-of-metrics" class="hash-link" aria-label="Direct link to Sources of Metrics" title="Direct link to Sources of Metrics">​</a></h3>
<ol>
<li>Node</li>
<li>kubelet and containers</li>
<li>Kubernetes API</li>
<li>etcd</li>
<li>Derived metrics (kube-state-metrics)</li>
</ol>
<p>Metric Aggregation through the Kubenetes Hierarchy</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cadvisor">cAdvisor<a href="#cadvisor" class="hash-link" aria-label="Direct link to cAdvisor" title="Direct link to cAdvisor">​</a></h2>
<ul>
<li>cAdvisor is embedded into the kubelet, so we scrape the kubelet to get container metrics</li>
<li>These are the so-called Kubernetes &quot;core&quot; metrics</li>
<li>For each container on the node:<!-- -->
<ul>
<li>CPU Usage (user and system) and time throttled</li>
<li>Filesystem read/writes/limits</li>
<li>Memory usage and limits</li>
<li>Network transmit/receive/dropped</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-metrics-from-the-k8s-api-server">Kubernetes Metrics from the K8s API Server<a href="#kubernetes-metrics-from-the-k8s-api-server" class="hash-link" aria-label="Direct link to Kubernetes Metrics from the K8s API Server" title="Direct link to Kubernetes Metrics from the K8s API Server">​</a></h2>
<ul>
<li>Performance of controller work queues</li>
<li>Request Rates and Latencies</li>
<li>Etcd helper cache work queues and cache performance</li>
<li>General process status (File descriptors/Memory/CPU seconds)</li>
<li>Golang status (GC/Memory/Threads)</li>
</ul>
<p>RED for Kubernetes API Server</p>
<ul>
<li>Rate - apiserver_request_count</li>
<li>Errors - apiserver_request_count</li>
<li>Duration - apiserver_request_latencies_bucket</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="etcd-metrics-from-etcd">Etcd Metrics from etcd<a href="#etcd-metrics-from-etcd" class="hash-link" aria-label="Direct link to Etcd Metrics from etcd" title="Direct link to Etcd Metrics from etcd">​</a></h2>
<ul>
<li>Etcd is &quot;master of all truth&quot; within a K8s cluster<!-- -->
<ul>
<li>Leader existence and leader change rate</li>
<li>Proposals committed/applied/pending/failed</li>
<li>Disk write performance</li>
<li>Inbound gRPC stats<!-- -->
<ul>
<li>etcd_http_received_total</li>
<li>etcd_http_failed_total</li>
<li>etcd_http_successful_duration_seconds_bucket</li>
</ul>
</li>
<li>Intra-cluster gRPC stats<!-- -->
<ul>
<li>etcd_network_member_round_trip_time_seconds_bucket</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a href="https://www.youtube.com/watch?v=1oJXMdVi0mM" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=1oJXMdVi0mM</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-metrics">Types of Metrics<a href="#types-of-metrics" class="hash-link" aria-label="Direct link to Types of Metrics" title="Direct link to Types of Metrics">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="counter">Counter<a href="#counter" class="hash-link" aria-label="Direct link to Counter" title="Direct link to Counter">​</a></h3>
<p>Represents a monotonically increasing value.</p>
<p>In this example, a counter metric is used to calculate the rate of events over time, by counting events per second</p>
<p>A counter is a cumulative metric that represents a single <a href="https://en.wikipedia.org/wiki/Monotonic_function" target="_blank" rel="noopener noreferrer">monotonically increasing counter</a> whose value can only increase or be reset to zero on restart. For example, you can use a counter to represent the number of requests served, tasks completed, or errors.</p>
<p>Do not use a counter to expose a value that can decrease. For example, do not use a counter for the number of currently running processes; instead use a gauge.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gauge">Gauge<a href="#gauge" class="hash-link" aria-label="Direct link to Gauge" title="Direct link to Gauge">​</a></h3>
<p>Represents a single value that can go up or down.</p>
<p>In this example, a gauge metric is used to monitor the <a href="https://blog.appsignal.com/2018/03/06/understanding-cpu-statistics.html" target="_blank" rel="noopener noreferrer">user CPU</a> in percentages</p>
<p>Agaugeis a metric that represents a single numerical value that can arbitrarily go up and down.</p>
<p>Gauges are typically used for measured values like temperatures or current memory usage, but also &quot;counts&quot; that can go up and down, like the number of concurrent requests.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="histogram">Histogram<a href="#histogram" class="hash-link" aria-label="Direct link to Histogram" title="Direct link to Histogram">​</a></h3>
<p>A counting of observations (like request durations or sizes) in configurable buckets.</p>
<p>In this example, a histogram metric is used to calculate the 75th and 90th percentiles of an HTTP request duration.</p>
<p>A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets. It also provides a sum of all observed values.</p>
<p>A histogram with a base metric name of <code>&lt;basename&gt;</code> exposes multiple time series during a scrape:</p>
<ul>
<li>cumulative counters for the observation buckets, exposed as <code>&lt;basename&gt;_bucket{le=&quot;&lt;upper inclusive bound&gt;&quot;}</code></li>
<li>thetotal sumof all observed values, exposed as <code>&lt;basename&gt;_sum</code></li>
<li>thecountof events that have been observed, exposed as <code>&lt;basename&gt;_count(identical to&lt;basename&gt;_bucket{le=&quot;+Inf&quot;}above)</code></li>
</ul>
<p>Use the <a href="https://prometheus.io/docs/prometheus/latest/querying/functions/#histogram_quantile" target="_blank" rel="noopener noreferrer">histogram_quantile()function</a> to calculate quantiles from histograms or even aggregations of histograms. A histogram is also suitable to calculate an <a href="https://en.wikipedia.org/wiki/Apdex" target="_blank" rel="noopener noreferrer">Apdex score</a>. When operating on buckets, remember that the histogram is <a href="https://en.wikipedia.org/wiki/Histogram#Cumulative_histogram" target="_blank" rel="noopener noreferrer">cumulative</a>. See <a href="https://prometheus.io/docs/practices/histograms" target="_blank" rel="noopener noreferrer">histograms and summaries</a> for details of histogram usage and differences to <a href="https://prometheus.io/docs/concepts/metric_types/#summary" target="_blank" rel="noopener noreferrer">summaries</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h3>
<p>Similar to a histogram, asummarysamples observations (usually things like request durations and response sizes). While it also provides a total count of observations and a sum of all observed values, it calculates configurable quantiles over a sliding time window.</p>
<p>A summary with a base metric name of <code>&lt;basename&gt;</code> exposes multiple time series during a scrape:</p>
<ul>
<li>streaming <code>φ-quantiles(0 ≤ φ ≤ 1)</code> of observed events, exposed as <code>&lt;basename&gt;{quantile=&quot;&lt;φ&gt;&quot;}</code></li>
<li>the total sumof all observed values, exposed as <code>&lt;basename&gt;_sum</code></li>
<li>the count of events that have been observed, exposed as <code>&lt;basename&gt;_count</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="two-rules-of-thumb">Two rules of thumb<a href="#two-rules-of-thumb" class="hash-link" aria-label="Direct link to Two rules of thumb" title="Direct link to Two rules of thumb">​</a></h2>
<ol>
<li>If you need to aggregate, choose histograms.</li>
<li>Otherwise, choose a histogram if you have an idea of the range and distribution of values that will be observed. Choose a summary if you need an accurate quantile, no matter what the range and distribution of the values is.</li>
</ol>
<p><a href="https://prometheus.io/docs/concepts/metric_types" target="_blank" rel="noopener noreferrer">https://prometheus.io/docs/concepts/metric_types</a></p>
<p><a href="https://prometheus.io/docs/practices/histograms" target="_blank" rel="noopener noreferrer">https://prometheus.io/docs/practices/histograms</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="apdex-application-performance-index">Apdex (Application Performance Index)<a href="#apdex-application-performance-index" class="hash-link" aria-label="Direct link to Apdex (Application Performance Index)" title="Direct link to Apdex (Application Performance Index)">​</a></h2>
<p>Apdex is an <a href="https://en.wikipedia.org/wiki/Open_standard" target="_blank" rel="noopener noreferrer">open standard</a> for measuring performance of <a href="https://en.wikipedia.org/wiki/Software_applications" target="_blank" rel="noopener noreferrer">software applications</a> in <a href="https://en.wikipedia.org/wiki/Computing" target="_blank" rel="noopener noreferrer">computing</a>. Its purpose is to convert measurements into insights about user satisfaction, by specifying a uniform way to analyze and report on the degree to which measured performance meets <a href="https://en.wikipedia.org/wiki/User_expectations" target="_blank" rel="noopener noreferrer">user expectations</a>. It was developed by an alliance of companies</p>
<p><a href="https://en.wikipedia.org/wiki/Apdex" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Apdex</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-types-of-alert">Common types of Alert<a href="#common-types-of-alert" class="hash-link" aria-label="Direct link to Common types of Alert" title="Direct link to Common types of Alert">​</a></h2>
<p><a href="https://www.freecodecamp.org/news/metrics-driven-development" target="_blank" rel="noopener noreferrer">https://www.freecodecamp.org/news/metrics-driven-development</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">​</a></h2>
<p>SLI - Service Level Indicators</p>
<p><a href="https://bravenewgeek.com/choosing-good-slis/" target="_blank" rel="noopener noreferrer">Choosing Good SLIs - Brave New Geek</a></p>
<p><a href="https://www.datadoghq.com/blog/tagging-best-practices/" target="_blank" rel="noopener noreferrer">Best Practices for Tagging Your Infrastructure and Applications | Datadog</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/monitoring/metrics.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-03-17T19:13:17.000Z" itemprop="dateModified">Mar 17, 2024</time></b> by <b>Deepak</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/devops/monitoring/linkerd"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Linkerd</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/devops/monitoring/open-tracing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Open Tracing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#monitoring-introduction" class="table-of-contents__link toc-highlight">Monitoring Introduction</a><ul><li><a href="#use-percentiles" class="table-of-contents__link toc-highlight">Use Percentiles</a></li><li><a href="#use-alarms" class="table-of-contents__link toc-highlight">Use Alarms</a></li><li><a href="#adaptive-thresholds" class="table-of-contents__link toc-highlight">Adaptive Thresholds</a></li><li><a href="#missing-metric" class="table-of-contents__link toc-highlight">Missing Metric</a></li><li><a href="#regular-automated-reviews" class="table-of-contents__link toc-highlight">Regular Automated Reviews</a></li><li><a href="#what-to-measure" class="table-of-contents__link toc-highlight">What to measure</a></li></ul></li><li><a href="#latency" class="table-of-contents__link toc-highlight">Latency</a><ul><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li><li><a href="#aggregation" class="table-of-contents__link toc-highlight">Aggregation</a></li><li><a href="#average" class="table-of-contents__link toc-highlight">Average</a></li><li><a href="#percentiles" class="table-of-contents__link toc-highlight">Percentiles</a></li><li><a href="#histograms" class="table-of-contents__link toc-highlight">Histograms</a></li><li><a href="#what-is-latency" class="table-of-contents__link toc-highlight">What is Latency</a></li></ul></li><li><a href="#long-tail-latency" class="table-of-contents__link toc-highlight">Long Tail Latency</a></li><li><a href="#instrumentation" class="table-of-contents__link toc-highlight">Instrumentation</a></li><li><a href="#metrics-kubernetes" class="table-of-contents__link toc-highlight">Metrics (Kubernetes)</a><ul><li><a href="#four-golden-signals-sre" class="table-of-contents__link toc-highlight">Four Golden Signals (SRE)</a></li><li><a href="#use-method-by-brendan-gregg-for-reasoning-about-system-resources" class="table-of-contents__link toc-highlight">USE Method (by Brendan Gregg for reasoning about system resources)</a></li><li><a href="#red-method-by-tom-wilkie-for-measuring-services" class="table-of-contents__link toc-highlight">RED Method by Tom Wilkie for measuring services</a></li></ul></li><li><a href="#source-of-metrics-in-kubernetes" class="table-of-contents__link toc-highlight">Source of Metrics in Kubernetes</a><ul><li><a href="#sources-of-metrics" class="table-of-contents__link toc-highlight">Sources of Metrics</a></li></ul></li><li><a href="#cadvisor" class="table-of-contents__link toc-highlight">cAdvisor</a></li><li><a href="#kubernetes-metrics-from-the-k8s-api-server" class="table-of-contents__link toc-highlight">Kubernetes Metrics from the K8s API Server</a></li><li><a href="#etcd-metrics-from-etcd" class="table-of-contents__link toc-highlight">Etcd Metrics from etcd</a></li><li><a href="#types-of-metrics" class="table-of-contents__link toc-highlight">Types of Metrics</a><ul><li><a href="#counter" class="table-of-contents__link toc-highlight">Counter</a></li><li><a href="#gauge" class="table-of-contents__link toc-highlight">Gauge</a></li><li><a href="#histogram" class="table-of-contents__link toc-highlight">Histogram</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></li><li><a href="#two-rules-of-thumb" class="table-of-contents__link toc-highlight">Two rules of thumb</a></li><li><a href="#apdex-application-performance-index" class="table-of-contents__link toc-highlight">Apdex (Application Performance Index)</a></li><li><a href="#common-types-of-alert" class="table-of-contents__link toc-highlight">Common types of Alert</a></li><li><a href="#others" class="table-of-contents__link toc-highlight">Others</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Deep Notes, Built with ❤️</div></div></div></footer></div>
</body>
</html>