<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-databases-nosql/redis/redis-streams-pubsub" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Redis Streams / PUBSUB | Deep Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" name="twitter:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" property="og:url" content="https://deepaksood619.github.io/databases-nosql/redis/redis-streams-pubsub"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Redis Streams / PUBSUB | Deep Notes"><meta data-rh="true" name="description" content="Messaging"><meta data-rh="true" property="og:description" content="Messaging"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://deepaksood619.github.io/databases-nosql/redis/redis-streams-pubsub"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/databases-nosql/redis/redis-streams-pubsub" hreflang="en"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/databases-nosql/redis/redis-streams-pubsub" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X3OY8NGHVH-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"NoSQL Databases","item":"https://deepaksood619.github.io/databases-nosql/"},{"@type":"ListItem","position":2,"name":"Redis","item":"https://deepaksood619.github.io/databases-nosql/redis/"},{"@type":"ListItem","position":3,"name":"Redis Streams / PUBSUB","item":"https://deepaksood619.github.io/databases-nosql/redis/redis-streams-pubsub"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSZMJXWSH3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSZMJXWSH3",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TN3KBF4",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Deep Notes" href="/opensearch.xml">
<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(53, 120, 229)">


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5616865131274062" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.9f55d0bd.css">
<script src="/assets/js/runtime~main.7b3a7cc3.js" defer="defer"></script>
<script src="/assets/js/main.c96be3a1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN3KBF4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deep Notes</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/deepaksood619" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.linkedin.com/in/deepaksood619/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/about-deepak-sood/">About Deepak Sood</a><button aria-label="Expand sidebar category &#x27;About Deepak Sood&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ai/">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/algorithms/">Algorithms</a><button aria-label="Expand sidebar category &#x27;Algorithms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/book-summaries/">Book Summaries</a><button aria-label="Expand sidebar category &#x27;Book Summaries&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/">Cloud</a><button aria-label="Expand sidebar category &#x27;Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/computer-science/">Computer Science</a><button aria-label="Expand sidebar category &#x27;Computer Science&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/courses/">Courses / Certifications</a><button aria-label="Expand sidebar category &#x27;Courses / Certifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-structures/">Data Structures</a><button aria-label="Expand sidebar category &#x27;Data Structures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-warehouses/">Data Warehouses</a><button aria-label="Expand sidebar category &#x27;Data Warehouses&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases/">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/databases-nosql/">NoSQL Databases</a><button aria-label="Collapse sidebar category &#x27;NoSQL Databases&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-nosql/aws-dynamodb/">DynamoDB</a><button aria-label="Expand sidebar category &#x27;DynamoDB&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-nosql/cassandra/">Cassandra</a><button aria-label="Expand sidebar category &#x27;Cassandra&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/column-family">Column family</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/comparisons">Comparisons</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-nosql/druid/">Druid</a><button aria-label="Expand sidebar category &#x27;Druid&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/duckdb">DuckDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/etcd">etcd</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-nosql/milvus/">Milvus</a><button aria-label="Expand sidebar category &#x27;Milvus&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-nosql/mongodb/">MongoDB</a><button aria-label="Expand sidebar category &#x27;MongoDB&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/others">Other NoSQL Databases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/databases-nosql/redis/">Redis</a><button aria-label="Collapse sidebar category &#x27;Redis&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/commands">Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/documentation">Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/intro">Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/others">Others</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/redis-concepts">Redis Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/redis-data-types">Redis Data Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/redis-eviction-policies">Redis Eviction Policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/redis-py">redis-py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/redis-queues">Redis Queues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/databases-nosql/redis/redis-streams-pubsub">Redis Streams / PUBSUB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/redis/scaling">Scaling</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/tidb">tidb</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-nosql/time-series-db/">Time Series</a><button aria-label="Expand sidebar category &#x27;Time Series&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-nosql/vector-databases/">Vector Databases</a><button aria-label="Expand sidebar category &#x27;Vector Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-nosql/yugabytedb">YugabyteDB</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases-sql/">SQL Databases</a><button aria-label="Expand sidebar category &#x27;SQL Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/decentralized-applications/">Decentralized Applications</a><button aria-label="Expand sidebar category &#x27;Decentralized Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/economics/">Economics</a><button aria-label="Expand sidebar category &#x27;Economics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/education/">Education</a><button aria-label="Expand sidebar category &#x27;Education&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/knowledge/">Knowledge</a><button aria-label="Expand sidebar category &#x27;Knowledge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/languages/">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/management/">Management</a><button aria-label="Expand sidebar category &#x27;Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/mathematics/">Mathematics</a><button aria-label="Expand sidebar category &#x27;Mathematics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/psychology/">Psychology</a><button aria-label="Expand sidebar category &#x27;Psychology&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Deepak&#x27;s Wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/technologies/">Technologies</a><button aria-label="Expand sidebar category &#x27;Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/databases-nosql/"><span>NoSQL Databases</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/databases-nosql/redis/"><span>Redis</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Redis Streams / PUBSUB</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Redis Streams / PUBSUB</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="messaging">Messaging<a href="#messaging" class="hash-link" aria-label="Direct link to Messaging" title="Direct link to Messaging">​</a></h2>
<p><strong>Redis Streams</strong> doubles as a communication channel for building streaming architectures and as a log-like data structure for persisting data, making Streams the perfect solution for event sourcing</p>
<p><strong>Redis Pub/Sub</strong> is an extremely lightweight messaging protocol designed for broadcasting live notifications within a system. It&#x27;s ideal for propagating short-lived messages when low latency and huge throughput are critical</p>
<p><strong>Redis Lists and Redis Sorted Sets</strong> are the basis for implementing message queues. They can be used both directly to build bespoke solutions, or via a framework that makes message processing more idiomatic for your programming language of choice</p>
<p><a href="https://redislabs.com/solutions/use-cases/messaging" target="_blank" rel="noopener noreferrer">https://redislabs.com/solutions/use-cases/messaging</a></p>
<p>The Stream is a new data type introduced with Redis 5.0, which models alog data structurein a more abstract way, however the essence of the log is still intact: like a log file, often implemented as a file open in append only mode, Redis streams are primarily an append only data structure. At least conceptually, because being Redis Streams an abstract data type represented in memory, they implement more powerful operations, to overcome the limits of the log file itself.</p>
<p>What makes Redis streams the most complex type of Redis, despite the data structure itself being quite simple, is the fact that it implements additional, non mandatory features: a set of blocking operations allowing consumers to wait for new data added to a stream by producers, and in addition to that a concept calledConsumer Groups.</p>
<p>Consumer groups were initially introduced by the popular messaging system called Kafka. Redis reimplements a similar idea in completely different terms, but the goal is the same: to allow a group of clients to cooperate consuming a different portion of the same stream of messages.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="commands">Commands<a href="#commands" class="hash-link" aria-label="Direct link to Commands" title="Direct link to Commands">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># show a list of all streams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SCAN 0 TYPE stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XLEN dead:letter:queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XREVRANGE dead:letter:queue + - COUNT 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XINFO STREAM customer:profile:updated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XINFO STREAM customer:profile:updated FULL</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="streams-basics">Streams basics<a href="#streams-basics" class="hash-link" aria-label="Direct link to Streams basics" title="Direct link to Streams basics">​</a></h2>
<p>Because streams are an append only data structure, the fundamental write command, calledXADD, appends a new entry into the specified stream. A stream entry is not just a string, but is instead composed of one or multiple field-value pairs. This way, each entry of a stream is already structured, like an append only file written in CSV format where multiple separated fields are present in each line.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; XADD mystream *sensor-id 1234 temperature 19.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1518951480106-0</span><br></span></code></pre></div></div>
<p>The above call to the XADD command adds an entry sensor-id: 1234, temperature: 19.8to the stream at keymystream, using an auto-generated entry ID, which is the one returned by the command, specifically1518951480106-0. It gets as first argument the key namemystream, the second argument is the entry ID that identifies every entry inside a stream. However, in this case, we passed*because we want the server to generate a new ID for us. Every new ID will be monotonically increasing, so in more simple terms, every new entry added will have a higher ID compared to all the past entries. Auto-generation of IDs by the server is almost always what you want, and the reasons for specifying an ID explicitly are very rare. We&#x27;ll talk more about this later. The fact that each Stream entry has an ID is another similarity with log files, where line numbers, or the byte offset inside the file, can be used in order to identify a given entry. Returning back at our XADD example, after the key name and ID, the next arguments are the field-value pairs composing our stream entry.
It is possible to get the number of items inside a Stream just using the XLEN command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; XLEN mystream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(integer) 1</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="entry-ids">Entry IDs<a href="#entry-ids" class="hash-link" aria-label="Direct link to Entry IDs" title="Direct link to Entry IDs">​</a></h2>
<p>The entry ID returned by theXADDcommand, and identifying univocally each entry inside a given stream, is composed of two parts:</p>
<p>millisecondsTime - sequenceNumber</p>
<p>The milliseconds time part is actually the local time in the local Redis node generating the stream ID, however if the current milliseconds time happens to be smaller than the previous entry time, then the previous entry time is used instead, so if a clock jumps backward the monotonically incrementing ID property still holds. The sequence number is used for entries created in the same millisecond. Since the sequence number is 64 bit wide, in practical terms there are no limits in the number of entries that can be generated within the same millisecond.
The format of such IDs may look strange at first, and the gentle reader may wonder why the time is part of the ID. The reason is that Redis streams support range queries by ID. Because the ID is related to the time the entry is generated, this gives the ability to query for ranges of time basically for free. We will see this soon while covering theXRANGEcommand.
If for some reason the user needs incremental IDs that are not related to time but are actually associated to another external system ID, as previously already observed, theXADDcommand can take an explicit ID instead of the*wildcard ID that triggers auto-generation, like in the following examples:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; XADD somestream 0-1 field value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; XADD somestream 0-2 foo bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Note that in this case, the minimum ID is 0-1 and that the command will not accept an ID equal or smaller than a previous one:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; XADD somestream 0-1 foo bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(error) ERR The ID specified in XADD is equal or smaller than the target stream top item</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-data-from-streams">Getting data from Streams<a href="#getting-data-from-streams" class="hash-link" aria-label="Direct link to Getting data from Streams" title="Direct link to Getting data from Streams">​</a></h2>
<p>Now we are finally able to append entries in our stream viaXADD. However, while appending data to a stream is quite obvious, the way streams can be queried in order to extract data is not so obvious. If we continue with the analogy of the log file, one obvious way is to mimic what we normally do with the Unix commandtail -f, that is, we may start to listen in order to get the new messages that are appended to the stream. Note that unlike the blocking list operations of Redis, where a given element will reach a single client which is blocking in apop styleoperation likeBLPOP, with streams we want that multiple consumers can see the new messages appended to the Stream, like manytail -fprocesses can see what is added to a log. Using the traditional terminology we want the streams to be able tofan outmessages to multiple clients.</p>
<p>However, this is just one potential access mode. We could also see a stream in quite a different way: not as a messaging system, but as atime series store. In this case, maybe it&#x27;s also useful to get the new messages appended, but another natural query mode is to get messages by ranges of time, or alternatively to iterate the messages using a cursor to incrementally check all the history. This is definitely another useful access mode.</p>
<p>Finally, if we see a stream from the point of view of consumers, we may want to access the stream in yet another way, that is, as a stream of messages that can be partitioned to multiple consumers that are processing such messages, so that groups of consumers can only see a subset of the messages arriving in a single stream. In this way, it is possible to scale the message processing across different consumers, without single consumers having to process all the messages: each consumer will just get different messages to process. This is basically what Kafka (TM) does with consumer groups. Reading messages via consumer groups is yet another interesting mode to read from a Redis stream.
Redis streams support all the three query modes described above via different commands.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="querying-by-range-xrange-and-xrevrange">Querying by range: XRANGE and XREVRANGE<a href="#querying-by-range-xrange-and-xrevrange" class="hash-link" aria-label="Direct link to Querying by range: XRANGE and XREVRANGE" title="Direct link to Querying by range: XRANGE and XREVRANGE">​</a></h2>
<p>To query the stream by range we are only required to specify two IDs, startandend. The range returned will include the elements having start or end as ID, so the range is inclusive. The two special IDs-and+respectively means the smallest and the greatest ID possible.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; XRANGE mystream - +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1) 1) 1518951480106-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) 1) &quot;sensor-id&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) &quot;1234&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3) &quot;temperature&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4) &quot;19.8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) 1) 1518951482479-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) 1) &quot;sensor-id&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) &quot;9999&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3) &quot;temperature&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4) &quot;18.2&quot;</span><br></span></code></pre></div></div>
<p>Since XRANGE complexity is <code>O(log(N))</code> to seek, and then <code>O(M)</code> to return M elements, with a small count the command has a logarithmic time complexity, which means that each step of the iteration is fast. So XRANGE is also the defacto streams iteratorand does not require an XSCAN command.</p>
<p>The command XREVRANGE is the equivalent of XRANGE but returning the elements in inverted order, so a practical use for XREVRANGE is to check what is the last item in a Stream</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="listening-for-new-items-with-xread">Listening for new items with XREAD<a href="#listening-for-new-items-with-xread" class="hash-link" aria-label="Direct link to Listening for new items with XREAD" title="Direct link to Listening for new items with XREAD">​</a></h2>
<p>When we do not want to access items by a range in a stream, usually what we want instead is tosubscribeto new items arriving to the stream. This concept may appear related to Redis Pub/Sub, where you subscribe to a channel, or to Redis blocking lists, where you wait for a key to get new elements to fetch, but there are fundamental differences in the way you consume a stream:</p>
<ul>
<li>
<p>A stream can have multiple clients (consumers) waiting for data. Every new item, by default, will be delivered toevery consumerthat is waiting for data in a given stream. This behavior is different than blocking lists, where each consumer will get a different element. However, the ability tofan outto multiple consumers is similar to Pub/Sub.</p>
</li>
<li>
<p>While in Pub/Sub messages arefire and forgetand are never stored anyway, and while when using blocking lists, when a message is received by the client it ispopped(effectively removed) from the list, streams work in a fundamentally different way. All the messages are appended in the stream indefinitely (unless the user explicitly asks to delete entries): different consumers will know what is a new message from its point of view by remembering the ID of the last message received.</p>
</li>
<li>
<p>Streams Consumer Groups provide a level of control that Pub/Sub or blocking lists cannot achieve, with different groups for the same stream, explicit acknowledge of processed items, ability to inspect the pending items, claiming of unprocessed messages, and coherent history visibility for each single client, that is only able to see its private past history of messages.</p>
</li>
</ul>
<p>The command that provides the ability to listen for new messages arriving into a stream is called XREAD.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; XREAD COUNT 2 STREAMS mystream 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1) 1) &quot;mystream&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) 1) 1) 1519073278252-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) 1) &quot;foo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) &quot;value_1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) 1) 1519073279157-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) 1) &quot;foo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) &quot;value_2&quot;</span><br></span></code></pre></div></div>
<p>Apart from the fact that XREAD can access multiple streams at once, and that we are able to specify the last ID we own to just get newer messages, in this simple form the command is not doing something so different compared to XRANGE. However, the interesting part is that we can turnXREADin ablocking commandeasily, by specifying the BLOCK argument:</p>
<p><code>&gt; XREAD BLOCK 0 STREAMS mystream $</code></p>
<p>Note that when the BLOCK option is used, we do not have to use the special ID$. We can use any valid ID. If the command is able to serve our request immediately without blocking, it will do so, otherwise it will block. Normally if we want to consume the stream starting from new entries, we start with the ID$, and after that we continue using the ID of the last message received to make the next call, and so forth.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-groups">Consumer groups<a href="#consumer-groups" class="hash-link" aria-label="Direct link to Consumer groups" title="Direct link to Consumer groups">​</a></h2>
<p>When the task at hand is to consume the same stream from different clients, thenXREADalready offers a way tofan-outto N clients, potentially also using slaves in order to provide more read scalability. However in certain problems what we want to do is not to provide the same stream of messages to many clients, but to provide adifferent subsetof messages from the same stream to many clients. An obvious case where this is useful is the case of slow to process messages: the ability to have N different workers that will receive different parts of the stream allows us to scale message processing, by routing different messages to different workers that are ready to do more work.</p>
<p>Redis uses a concept calledconsumer groups. It is very important to understand that Redis consumer groups have nothing to do from the point of view of the implementation with Kafka (TM) consumer groups, but they are only similar from the point of view of the concept they implement</p>
<p>A consumer group is like apseudo consumerthat gets data from a stream, and actually serves multiple consumers, providing certain guarantees:</p>
<ul>
<li>
<p>Each message is served to a different consumer so that it is not possible that the same message is delivered to multiple consumers.</p>
</li>
<li>
<p>Consumers are identified, within a consumer group, by a name, which is a case-sensitive string that the clients implementing consumers must choose. This means that even after a disconnect, the stream consumer group retains all the state, since the client will claim again to be the same consumer. However, this also means that it is up to the client to provide a unique identifier.</p>
</li>
<li>
<p>Each consumer group has the concept of thefirst ID never consumedso that, when a consumer asks for new messages, it can provide just messages that were never delivered previously.</p>
</li>
<li>
<p>Consuming a message however requires explicit acknowledge using a specific command, to say: this message was correctly processed, so can be evicted from the consumer group.</p>
</li>
<li>
<p>A consumer group tracks all the messages that are currently pending, that is, messages that were delivered to some consumer of the consumer group, but are yet to be acknowledged as processed. Thanks to this feature, when accessing the history of messages of a stream, each consumerwill only see messages that were delivered to it.
Actually, it is even possible for the same stream to have clients reading without consumer groups via <strong>XREAD</strong>, and clients reading via <strong>XREADGROUP</strong> in different consumer groups.</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## Creating a consumer group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XGROUP CREATE mystream mygroup $</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Recovering from permanent failures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Claiming and the delivery counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Streams observability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XINFO STREAM mystream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XINFO GROUPS mystream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XINFO CONSUMERS mystream mygroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">XINFO HELP</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="xpending">XPENDING<a href="#xpending" class="hash-link" aria-label="Direct link to XPENDING" title="Direct link to XPENDING">​</a></h3>
<p>Fetching data from a stream via a consumer group, and not acknowledging such data, has the effect of creating<em>pending entries</em>.The <a href="https://redis.io/commands/xack" target="_blank" rel="noopener noreferrer">XACK</a> command will immediately remove the pending entry from the Pending Entries List (PEL) since once a message is successfully processed, there is no longer need for the consumer group to track it and to remember the current owner of the message.</p>
<p>The <a href="https://redis.io/commands/xpending" target="_blank" rel="noopener noreferrer">XPENDING</a> command is the interface to inspect the list of pending messages, and is as thus a very important command in order to observe and understand what is happening with a streams consumer groups: what clients are active, what messages are pending to be consumed, or to see if there are idle messages</p>
<p><a href="https://redis.io/commands/xpending" target="_blank" rel="noopener noreferrer">https://redis.io/commands/xpending</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="differences-with-kafka-partitions">Differences with Kafka partitions<a href="#differences-with-kafka-partitions" class="hash-link" aria-label="Direct link to Differences with Kafka partitions" title="Direct link to Differences with Kafka partitions">​</a></h2>
<p>The partitions are onlylogicaland the messages are just put into a single Redis key, so the way the different clients are served is based on who is ready to process new messages, and not from which partition clients are reading. For instance, if the consumer C3 at some point fails permanently, Redis will continue to serve C1 and C2 all the new messages arriving, as if now there are only twologicalpartitions.
Similarly, if a given consumer is much faster at processing messages than the other consumers, this consumer will receive proportionally more messages in the same unit of time. This is possible since Redis tracks all the unacknowledged messages explicitly, and remembers who received which message and the ID of the first message never delivered to any consumer.</p>
<p>However, this also means that in Redis if you really want to partition messages in the same stream into multiple Redis instances, you have to use multiple keys and some sharding system such as Redis Cluster or some other application-specific sharding system. A single Redis stream is not automatically partitioned to multiple instances.
We could say that schematically the following is true:</p>
<ul>
<li>If you use 1 stream -&gt; 1 consumer, you are processing messages in order.</li>
<li>If you use N streams with N consumers, so that only a given consumer hits a subset of the N streams, you can scale the above model of 1 stream -&gt; 1 consumer.</li>
<li>If you use 1 stream -&gt; N consumers, you are load balancing to N consumers, however in that case, messages about the same logical item may be consumed out of order, because a given consumer may process message 3 faster than another consumer is processing message 4.</li>
</ul>
<p>So basically Kafka partitions are more similar to using N different Redis keys. While Redis consumer groups are a server-side load balancing system of messages from a given stream to N different consumers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="capped-streams">Capped Streams<a href="#capped-streams" class="hash-link" aria-label="Direct link to Capped Streams" title="Direct link to Capped Streams">​</a></h2>
<p>Many applications do not want to collect data into a stream forever. Sometimes it is useful to have at maximum a given number of items inside a stream, other times once a given size is reached, it is useful to move data from Redis to a storage which is not in memory and not as fast but suited to take the history for potentially decades to come. Redis streams have some support for this. One is theMAXLENoption of theXADDcommand.</p>
<p>XADD mystream MAXLEN 2 * value 1
UsingMAXLENthe old entries are automatically evicted when the specified length is reached, so that the stream is taken at a constant size.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-ids-in-the-streams-api">Special IDs in the streams API<a href="#special-ids-in-the-streams-api" class="hash-link" aria-label="Direct link to Special IDs in the streams API" title="Direct link to Special IDs in the streams API">​</a></h3>
<p>We have <code>-,+,$,&gt; and *</code>, and all have a different meaning, and most of the times, can be used in different contexts.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistence-replication-and-message-safety">Persistence, replication and message safety<a href="#persistence-replication-and-message-safety" class="hash-link" aria-label="Direct link to Persistence, replication and message safety" title="Direct link to Persistence, replication and message safety">​</a></h3>
<p>A Stream, like any other Redis data structure, is asynchronously replicated to slaves and persisted into AOF and RDB files.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removing-single-items-from-a-stream">Removing single items from a stream<a href="#removing-single-items-from-a-stream" class="hash-link" aria-label="Direct link to Removing single items from a stream" title="Direct link to Removing single items from a stream">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zero-length-streams">Zero length streams<a href="#zero-length-streams" class="hash-link" aria-label="Direct link to Zero length streams" title="Direct link to Zero length streams">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="total-latency-of-consuming-a-message">Total latency of consuming a message<a href="#total-latency-of-consuming-a-message" class="hash-link" aria-label="Direct link to Total latency of consuming a message" title="Direct link to Total latency of consuming a message">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-serving-blocked-consumers-work">How serving blocked consumers work<a href="#how-serving-blocked-consumers-work" class="hash-link" aria-label="Direct link to How serving blocked consumers work" title="Direct link to How serving blocked consumers work">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="latency-tests-results">Latency tests results<a href="#latency-tests-results" class="hash-link" aria-label="Direct link to Latency tests results" title="Direct link to Latency tests results">​</a></h3>
<p><a href="https://redis.io/topics/streams-intro" target="_blank" rel="noopener noreferrer">https://redis.io/topics/streams-intro</a></p>
<p><a href="https://events.redislabs.com/sessions/build-message-bus-redis-streams-fastapi" target="_blank" rel="noopener noreferrer">https://events.redislabs.com/sessions/build-message-bus-redis-streams-fastapi</a></p>
<p><a href="https://www.youtube.com/watch?v=hkGYRYe5NE8" target="_blank" rel="noopener noreferrer">Delayed Message Processing with Redis Streams - RedisConf 2020</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pubsub">PUBSUB<a href="#pubsub" class="hash-link" aria-label="Direct link to PUBSUB" title="Direct link to PUBSUB">​</a></h2>
<p><a href="https://redis.io/commands/subscribe" target="_blank" rel="noopener noreferrer">SUBSCRIBE</a>, <a href="https://redis.io/commands/unsubscribe" target="_blank" rel="noopener noreferrer">UNSUBSCRIBE</a> and <a href="https://redis.io/commands/publish" target="_blank" rel="noopener noreferrer">PUBLISH</a> implement the <a href="http://en.wikipedia.org/wiki/Publish/subscribe" target="_blank" rel="noopener noreferrer">Publish/Subscribe messaging paradigm</a> where (citing Wikipedia) senders (publishers) are not programmed to send their messages to specific receivers (subscribers). Rather, published messages are characterized into channels, without knowledge of what (if any) subscribers there may be. Subscribers express interest in one or more channels, and only receive messages that are of interest, without knowledge of what (if any) publishers there are. This decoupling of publishers and subscribers can allow for greater scalability and a more dynamic network topology.</p>
<p><a href="https://redis.io/topics/pubsub" target="_blank" rel="noopener noreferrer">https://redis.io/topics/pubsub</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pubsub-vs-streams">PUBSUB vs Streams<a href="#pubsub-vs-streams" class="hash-link" aria-label="Direct link to PUBSUB vs Streams" title="Direct link to PUBSUB vs Streams">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-storage">Data storage<a href="#data-storage" class="hash-link" aria-label="Direct link to Data storage" title="Direct link to Data storage">​</a></h2>
<p>Pub/Sub is a Publisher/Subscriber platform, it&#x27;s not data storage. Published messages evaporate, regardless if there was any subscriber.
In Redis Streams, stream is a data type, a data structure on its own right. Messages or entries are stored in memory and stay there until commanded to be deleted.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="syncasync-communication">Sync/Async communication<a href="#syncasync-communication" class="hash-link" aria-label="Direct link to Sync/Async communication" title="Direct link to Sync/Async communication">​</a></h2>
<p>Pub/Sub is synchronous communication. All parties need to be active at the same time to be able to communicate. Here Redis is a pure synchronous messaging broker.
Redis Streams allows for both synchronous (XREADwithBLOCKand the special$ID) and asynchronous communication. It is like Pub/Sub, but with the ability to resume on disconnection without losing messages.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="delivery-semantics">Delivery Semantics<a href="#delivery-semantics" class="hash-link" aria-label="Direct link to Delivery Semantics" title="Direct link to Delivery Semantics">​</a></h2>
<p>Pub/Sub is At-most-once, i.e. &quot;fire and forget&quot;.
Redis Streams allows for both At-most-once or At-least-once (explicit acknowledgement sent by the receiver)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blocking-mode-for-consumers">Blocking mode for consumers<a href="#blocking-mode-for-consumers" class="hash-link" aria-label="Direct link to Blocking mode for consumers" title="Direct link to Blocking mode for consumers">​</a></h2>
<p>Pub/Sub is blocking-mode only. Once subscribed to a channel, the client is put into subscriber mode and it cannot issue commands (except for [P]SUBSCRIBE, [P]UNSUBSCRIBE, PINGandQUIT), it has become read-only.
Redis Streams allows consumers to read messages in blocking mode or not.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fan-out">Fan-out<a href="#fan-out" class="hash-link" aria-label="Direct link to Fan-out" title="Direct link to Fan-out">​</a></h2>
<p>Pub/Sub is fan-out only. All active clients get all messages.
Redis Streams allows fan-out (withXREAD), but also to provide a different subset of messages from the same stream to many clients. This allows scaling message processing, by routing different messages to different workers, in a way that it is not possible that the same message is delivered to multiple consumers. This last scenario is achieved withconsumer groups.</p>
<p>Redis Streams provide many more features, like time-stamps, field-value pairs, ranges, etc. It doesn&#x27;t mean you should always go for Streams. If your use-case can be achieved with Pub/Sub, it is better for you to use Pub/Sub then. With Streams, you have to care for memory usage.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases-nosql/redis/redis-streams-pubsub.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-06-10T17:10:38.000Z" itemprop="dateModified">Jun 10, 2025</time></b> by <b>Deepak</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/databases-nosql/redis/redis-queues"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Redis Queues</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/databases-nosql/redis/scaling"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scaling</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#messaging" class="table-of-contents__link toc-highlight">Messaging</a></li><li><a href="#commands" class="table-of-contents__link toc-highlight">Commands</a></li><li><a href="#streams-basics" class="table-of-contents__link toc-highlight">Streams basics</a></li><li><a href="#entry-ids" class="table-of-contents__link toc-highlight">Entry IDs</a></li><li><a href="#getting-data-from-streams" class="table-of-contents__link toc-highlight">Getting data from Streams</a></li><li><a href="#querying-by-range-xrange-and-xrevrange" class="table-of-contents__link toc-highlight">Querying by range: XRANGE and XREVRANGE</a></li><li><a href="#listening-for-new-items-with-xread" class="table-of-contents__link toc-highlight">Listening for new items with XREAD</a></li><li><a href="#consumer-groups" class="table-of-contents__link toc-highlight">Consumer groups</a><ul><li><a href="#xpending" class="table-of-contents__link toc-highlight">XPENDING</a></li></ul></li><li><a href="#differences-with-kafka-partitions" class="table-of-contents__link toc-highlight">Differences with Kafka partitions</a></li><li><a href="#capped-streams" class="table-of-contents__link toc-highlight">Capped Streams</a><ul><li><a href="#special-ids-in-the-streams-api" class="table-of-contents__link toc-highlight">Special IDs in the streams API</a></li><li><a href="#persistence-replication-and-message-safety" class="table-of-contents__link toc-highlight">Persistence, replication and message safety</a></li><li><a href="#removing-single-items-from-a-stream" class="table-of-contents__link toc-highlight">Removing single items from a stream</a></li><li><a href="#zero-length-streams" class="table-of-contents__link toc-highlight">Zero length streams</a></li><li><a href="#total-latency-of-consuming-a-message" class="table-of-contents__link toc-highlight">Total latency of consuming a message</a></li><li><a href="#how-serving-blocked-consumers-work" class="table-of-contents__link toc-highlight">How serving blocked consumers work</a></li><li><a href="#latency-tests-results" class="table-of-contents__link toc-highlight">Latency tests results</a></li></ul></li><li><a href="#pubsub" class="table-of-contents__link toc-highlight">PUBSUB</a><ul><li><a href="#pubsub-vs-streams" class="table-of-contents__link toc-highlight">PUBSUB vs Streams</a></li></ul></li><li><a href="#data-storage" class="table-of-contents__link toc-highlight">Data storage</a></li><li><a href="#syncasync-communication" class="table-of-contents__link toc-highlight">Sync/Async communication</a></li><li><a href="#delivery-semantics" class="table-of-contents__link toc-highlight">Delivery Semantics</a></li><li><a href="#blocking-mode-for-consumers" class="table-of-contents__link toc-highlight">Blocking mode for consumers</a></li><li><a href="#fan-out" class="table-of-contents__link toc-highlight">Fan-out</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Deep Notes, Built with ❤️</div></div></div></footer></div>
</body>
</html>