<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-databases-sql/mysql/optimizing-locking-operations" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Optimizing Locking Operations | Deep Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" name="twitter:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" property="og:url" content="https://deepaksood619.github.io/databases-sql/mysql/optimizing-locking-operations"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Optimizing Locking Operations | Deep Notes"><meta data-rh="true" name="description" content="- 8.11 Optimizing Locking Operations"><meta data-rh="true" property="og:description" content="- 8.11 Optimizing Locking Operations"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://deepaksood619.github.io/databases-sql/mysql/optimizing-locking-operations"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/databases-sql/mysql/optimizing-locking-operations" hreflang="en"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/databases-sql/mysql/optimizing-locking-operations" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X3OY8NGHVH-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"SQL Databases","item":"https://deepaksood619.github.io/databases-sql/"},{"@type":"ListItem","position":2,"name":"MySQL","item":"https://deepaksood619.github.io/databases-sql/mysql/"},{"@type":"ListItem","position":3,"name":"Optimizing Locking Operations","item":"https://deepaksood619.github.io/databases-sql/mysql/optimizing-locking-operations"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSZMJXWSH3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSZMJXWSH3",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TN3KBF4",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Deep Notes" href="/opensearch.xml">
<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(53, 120, 229)">


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5616865131274062" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.9f55d0bd.css">
<script src="/assets/js/runtime~main.7b3a7cc3.js" defer="defer"></script>
<script src="/assets/js/main.c96be3a1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN3KBF4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deep Notes</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/deepaksood619" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.linkedin.com/in/deepaksood619/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/about-deepak-sood/">About Deepak Sood</a><button aria-label="Expand sidebar category &#x27;About Deepak Sood&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ai/">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/algorithms/">Algorithms</a><button aria-label="Expand sidebar category &#x27;Algorithms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/book-summaries/">Book Summaries</a><button aria-label="Expand sidebar category &#x27;Book Summaries&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/">Cloud</a><button aria-label="Expand sidebar category &#x27;Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/computer-science/">Computer Science</a><button aria-label="Expand sidebar category &#x27;Computer Science&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/courses/">Courses / Certifications</a><button aria-label="Expand sidebar category &#x27;Courses / Certifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-structures/">Data Structures</a><button aria-label="Expand sidebar category &#x27;Data Structures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-warehouses/">Data Warehouses</a><button aria-label="Expand sidebar category &#x27;Data Warehouses&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases/">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases-nosql/">NoSQL Databases</a><button aria-label="Expand sidebar category &#x27;NoSQL Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/databases-sql/">SQL Databases</a><button aria-label="Collapse sidebar category &#x27;SQL Databases&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/amazon-aurora-vs-rds">Amazon Aurora vs RDS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/amazon-rds">Amazon RDS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-sql/aws-aurora/">AWS Aurora</a><button aria-label="Expand sidebar category &#x27;AWS Aurora&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-sql/aws-redshift/">Redshift</a><button aria-label="Expand sidebar category &#x27;Redshift&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-sql/memsql/">MemSQL</a><button aria-label="Expand sidebar category &#x27;MemSQL&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mssql-server">MSSQL Server</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/databases-sql/mysql/">MySQL</a><button aria-label="Collapse sidebar category &#x27;MySQL&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/administration-configuration">Administration / Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/backup-comparisons">Backup Comparisons</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/backup-policy">Backup Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/backup-types">Backup Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/connection-handling">Connection Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/documentation">Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/gh-ost">Gh-ost (Ghost)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/gtid-replication">GTID Replication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/intro">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/mydumper">MyDumper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/mysql-data-types">MySQL Data Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/mysql-heatwave">MySQL Heatwave</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/mysql-triggers">MySQL Triggers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/mysqlbinlog">mysqlbinlog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/mysqldump">MySQLDump</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/databases-sql/mysql/optimizing-locking-operations">Optimizing Locking Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/others">Others</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/partitioning">Partitioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/percona-toolkit">Percona Toolkit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/percona-xtrabackup">Percona XtraBackup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/replication">Replication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/scaling-optimizations">Scaling / Optimizations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/server-sql-modes">Server SQL Modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/sql-mysql-tools">SQL / MySQL Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/thread-states">Thread States</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/mysql/transaction-commit-rollback">Trasaction / Commit / Rollback</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/normalization">Normalization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/oracle-database">Oracle Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/partitioning-sharding">Partitioning / Sharding</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases-sql/postgres/">Postgres</a><button aria-label="Expand sidebar category &#x27;Postgres&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/databases-sql/rdbms">RDBMS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/decentralized-applications/">Decentralized Applications</a><button aria-label="Expand sidebar category &#x27;Decentralized Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/economics/">Economics</a><button aria-label="Expand sidebar category &#x27;Economics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/education/">Education</a><button aria-label="Expand sidebar category &#x27;Education&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/knowledge/">Knowledge</a><button aria-label="Expand sidebar category &#x27;Knowledge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/languages/">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/management/">Management</a><button aria-label="Expand sidebar category &#x27;Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/mathematics/">Mathematics</a><button aria-label="Expand sidebar category &#x27;Mathematics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/psychology/">Psychology</a><button aria-label="Expand sidebar category &#x27;Psychology&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Deepak&#x27;s Wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/technologies/">Technologies</a><button aria-label="Expand sidebar category &#x27;Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/databases-sql/"><span>SQL Databases</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/databases-sql/mysql/"><span>MySQL</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Optimizing Locking Operations</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Optimizing Locking Operations</h1></header>
<ul>
<li>8.11 Optimizing Locking Operations</li>
<li>8.11.2 Table Locking Issues</li>
<li>8.11.3 Concurrent Inserts</li>
<li>8.11.4 Metadata Locking</li>
<li>8.11.5 External Locking</li>
</ul>
<p><strong>Internal locking</strong> is performed within the MySQL server itself to manage contention for table contents by multiple threads. This type of locking is internal because it is performed entirely by the server and involves no other programs.</p>
<p><strong>External locking</strong> occurs when the server and other programs lock <a href="https://dev.mysql.com/doc/refman/5.7/en/myisam-storage-engine.html" target="_blank" rel="noopener noreferrer">MyISAM</a> table files to coordinate among themselves which program can access the tables at which time.
8.11.1 Internal Locking Methods</p>
<p>MySQL uses <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_row_lock" target="_blank" rel="noopener noreferrer"><strong>row-level locking</strong></a> for InnoDB tables to support simultaneous write access by multiple sessions, making them suitable for multi-user, highly concurrent, and OLTP applications.</p>
<p>To avoid <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_deadlock" target="_blank" rel="noopener noreferrer">deadlocks</a> when performing multiple concurrent write operations on a single InnoDB table, acquire necessary locks at the start of the transaction by issuing a SELECT ... FOR UPDATE statement for each group of rows expected to be modified, even if the data change statements come later in the transaction. If transactions modify or lock more than one table, issue the applicable statements in the same order within each transaction. Deadlocks affect performance rather than representing a serious error, because InnoDB automatically <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_deadlock_detection" target="_blank" rel="noopener noreferrer">detects</a> deadlock conditions and rolls back one of the affected transactions.</p>
<p>On high concurrency systems, <strong>deadlock detection can cause a slowdown when numerous threads wait for the same lock.</strong> At times, it may be <strong>more efficient to disable deadlock detection and rely on the <a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_lock_wait_timeout" target="_blank" rel="noopener noreferrer">innodb_lock_wait_timeout</a> setting for transaction rollback</strong> when a deadlock occurs. Deadlock detection can be disabled using the <a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_deadlock_detect" target="_blank" rel="noopener noreferrer">innodb_deadlock_detect</a> configuration option.</p>
<p>Advantages of row-level locking:</p>
<ul>
<li>Fewer lock conflicts when different sessions access different rows.</li>
<li>Fewer changes for rollbacks.</li>
<li>Possible to lock a single row for a long time.</li>
</ul>
<p>MySQL uses <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_table_lock" target="_blank" rel="noopener noreferrer"><strong>table-level locking</strong></a> for MyISAM, MEMORY, and MERGE tables</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gap-locking">Gap Locking<a href="#gap-locking" class="hash-link" aria-label="Direct link to Gap Locking" title="Direct link to Gap Locking">​</a></h2>
<p>A gap lock is a lock on a gap between index records, or a lock on the gap before the first or after the last index record.</p>
<p>A lock on a gap between index records, or a lock on the gap before the first or after the last index record. For example, SELECT c1 FROM t WHERE c1 BETWEEN 10 and 20 FOR UPDATE; prevents other transactions from inserting a value of 15 into the column t.c1, whether or not there was already any such value in the column, because the gaps between all existing values in the range are locked. Contrast with record lock and next-key lock.</p>
<p>Gap locks are part of the tradeoff between performance and concurrency, and are used in some transaction isolation levels and not others.</p>
<p><a href="https://dev.mysql.com/doc/refman/5.6/en/glossary.html#glos_gap_lock" target="_blank" rel="noopener noreferrer">Gap Lock</a></p>
<p><a href="https://stackoverflow.com/questions/32498437/deadlock-in-mysql-due-to-insert-by-multiple-threads" target="_blank" rel="noopener noreferrer">Deadlock in MySQL due to Insert by multiple threads</a></p>
<p><a href="http://thushw.blogspot.com/2010/11/mysql-deadlocks-with-concurrent-inserts.html" target="_blank" rel="noopener noreferrer">mysql deadlocks with concurrent inserts</a></p>
<p>It is possible to cause deadlocks in mysql (Innodb) on concurrent insert statements, without there being any transactions in progress. Deadlocks are possible even when the inserts don&#x27;t collide on any key.</p>
<p>The deadlocks occur due to gap locking done by mysql. There are several reasons for gap locking, and in this particular case, it has to do with preserving a unique key constraint on an index. The situation presents itself to us this way: There is a unique key constraint on a column and we are doing an insert. Mysql has to make sure that the lock it takes is sufficient to prevent another concurrent insert from adding a record with the same key, thus breaking the unique key constraint.</p>
<p>Mysql innodb engine performs row locking on inserts. If column A has a unique key constraint, and we are adding the value &quot;bbb&quot; for column A in an insert statement, mysql needs to lock any gap in the index between the two current records where &quot;bbb&quot; will be inserted at.</p>
<p><a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-locks-set.html" target="_blank" rel="noopener noreferrer">Innodb locks set</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="different-locks">Different Locks<a href="#different-locks" class="hash-link" aria-label="Direct link to Different Locks" title="Direct link to Different Locks">​</a></h2>
<ol>
<li><strong>Shared Lock (S Lock) -</strong> It allows multiple transactions to read a resource simultaneously but not modify it. Other transactions can also acquire a shared lock on the same resource.</li>
<li><strong>Exclusive Lock (X Lock) -</strong> It allows a transaction to both read and modify a resource. No other transaction can acquire any type of lock on the same resource while an exclusive lock is held.</li>
<li><strong>Update Lock (U Lock) -</strong> It is used to prevent a deadlock scenario when a transaction intends to update a resource.</li>
<li><strong>Schema Lock -</strong> It is used to protect the structure of database objects.</li>
<li><strong>Bulk Update Lock (BU Lock) -</strong> It is used during bulk insert operations to improve performance by reducing the number of locks required.</li>
<li><strong>Key-Range Lock -</strong> It is used in indexed data to prevent phantom reads (inserting new rows into a range that a transaction has already read).</li>
<li><strong>Row-Level Lock -</strong> It locks a specific row in a table, allowing other rows to be accessed concurrently.</li>
<li><strong>Page-Level Lock -</strong> It locks a specific page (a fixed-size block of data) in the database.</li>
<li><strong>Table-Level Lock -</strong> It locks an entire table. This is simple to implement but can reduce concurrency significantly.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Types of database locks" src="/assets/images/Pasted image 20240626161909-27b6f8ded8c236d38d151c52783ed3c8.jpg" width="1000" height="1300" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="row-locks">Row Locks<a href="#row-locks" class="hash-link" aria-label="Direct link to Row Locks" title="Direct link to Row Locks">​</a></h3>
<p>InnoDB uses row-level locking for <code>DELETE</code> operations. This means that all rows that match the condition <code>id &lt; 391919930</code> will be locked until the transaction is complete. Row locks prevent other transactions from modifying or deleting these rows until the current transaction is finished.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="range-locks">Range Locks<a href="#range-locks" class="hash-link" aria-label="Direct link to Range Locks" title="Direct link to Range Locks">​</a></h3>
<p>A range lock is a type of lock that InnoDB uses to lock a range of index entries. It is more commonly associated with preventing other transactions from inserting, updating, or deleting rows within a specific range that matches the condition of a query. Range locks are part of the mechanism InnoDB uses to implement the REPEATABLE READ isolation level.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> orders </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> order_id </span><span class="token operator" style="color:#393A34">BETWEEN</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>In this case, InnoDB locks all rows where <code>order_id</code> is between 100 and 200, including any potential gaps within this range.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gap-locks">Gap Locks<a href="#gap-locks" class="hash-link" aria-label="Direct link to Gap Locks" title="Direct link to Gap Locks">​</a></h3>
<p>Depending on the isolation level of your transaction, InnoDB might use gap locks to prevent other transactions from inserting new rows into the gaps covered by the index range of the <code>DELETE</code> statement. Gap locks are particularly relevant in <code>REPEATABLE READ</code> or higher isolation levels.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">DELETE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> orders </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> order_id </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Here, InnoDB locks the gaps between existing rows where <code>order_id</code> is less than 100 to prevent new rows from being inserted into these gaps, which would affect the results of this <code>DELETE</code> operation.</p>
<p>Therefore it&#x27;s better to use between for <code>DELETE</code> to make operation non-locking</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">DELETE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> orders </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> order_id betwen </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="index-locks">Index Locks<a href="#index-locks" class="hash-link" aria-label="Direct link to Index Locks" title="Direct link to Index Locks">​</a></h3>
<p>InnoDB locks the index entries for the rows being deleted. This prevents other transactions from modifying the indexes until the transaction is complete.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="table-locks">Table Locks<a href="#table-locks" class="hash-link" aria-label="Direct link to Table Locks" title="Direct link to Table Locks">​</a></h3>
<p>While InnoDB primarily uses row-level locking, there can also be implicit table-level locks that prevent schema changes to the table while the <code>DELETE</code> operation is in progress.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="intention-locks">Intention Locks<a href="#intention-locks" class="hash-link" aria-label="Direct link to Intention Locks" title="Direct link to Intention Locks">​</a></h3>
<ul>
<li>During SELECT/INSERT/UPDATE/DELETE, a shared intention lock (&quot;IS&quot;) allows access by multiple threads to work on the same table, but blocks exclusive table locks.</li>
<li>During ALTER TABLE or DROP TABLE, an exclusive intention lock (&quot;IX&quot;) blocks other table locks, either shared or exclusive. So no one else can query, and no one can run their own ALTER/DROP TABLE.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="insert-intention-lock">Insert intention lock<a href="#insert-intention-lock" class="hash-link" aria-label="Direct link to Insert intention lock" title="Direct link to Insert intention lock">​</a></h3>
<ul>
<li>A special kind of gap lock, requested before a client tries to insert a row.</li>
<li>Insert locks are shared, not exclusive—multiple clients can acquire insert locks on the same gap.</li>
<li>But insert locks conflict with other exclusive locks.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-insert-intention-lock-shared">why is insert intention lock shared?<a href="#why-is-insert-intention-lock-shared" class="hash-link" aria-label="Direct link to why is insert intention lock shared?" title="Direct link to why is insert intention lock shared?">​</a></h4>
<ul>
<li>Multiple clients prepare to insert into the same gap.</li>
<li>They may be inserting different rows within the same gap, so they don&#x27;t conflict with each other.</li>
<li>But the insert intention lock blocks other clients from requesting exclusive locks on the same gap.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-inc-lock">Auto-inc lock<a href="#auto-inc-lock" class="hash-link" aria-label="Direct link to Auto-inc lock" title="Direct link to Auto-inc lock">​</a></h3>
<ul>
<li>A table lock, used when a client requests the next unique id for a given table.</li>
<li>Ensures that each id is given to one client.</li>
<li>Brief—it is released as soon as the id is generated, instead of lasting to the end of the transaction like other locks.</li>
<li>Because the lock is so brief, neither client can &quot;<strong>undo</strong>&quot;— i.e. return their id to the stack for someone else to use.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deadlock">Deadlock<a href="#deadlock" class="hash-link" aria-label="Direct link to Deadlock" title="Direct link to Deadlock">​</a></h3>
<ul>
<li>When two or more concurrent clients wait for each other to release their locks, but since they are both waiting, they will never give up the lock they have.</li>
<li>In other words, a catch-22 of lock-waits.</li>
<li>Many people use the term &quot;deadlock&quot; incorrectly— when they are describing a simple one-way lock wait.</li>
<li>Resolving deadlocks - MySQL detects cycles in lock waits, and kills one of the transactions immediately.</li>
<li>avoiding deadlocks<!-- -->
<ul>
<li>Each client locks everything they need in one atomic request.</li>
<li>All clients request locks in the same order.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-differences-between-range-and-gap-locks">Key Differences between Range and Gap Locks<a href="#key-differences-between-range-and-gap-locks" class="hash-link" aria-label="Direct link to Key Differences between Range and Gap Locks" title="Direct link to Key Differences between Range and Gap Locks">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="locking-focus">Locking Focus<a href="#locking-focus" class="hash-link" aria-label="Direct link to Locking Focus" title="Direct link to Locking Focus">​</a></h4>
<ul>
<li><strong>Range Lock</strong>: Locks both existing index entries and the gaps between them.</li>
<li><strong>Gap Lock</strong>: Locks only the gaps between existing index entries.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-case">Use Case<a href="#use-case" class="hash-link" aria-label="Direct link to Use Case" title="Direct link to Use Case">​</a></h4>
<ul>
<li><strong>Range Lock</strong>: Ensures that the range of index entries remains consistent, used in scenarios where the exact range of rows needs to be locked.</li>
<li><strong>Gap Lock</strong>: Ensures that no new rows can be inserted into the gaps, used to prevent phantom reads and ensure repeatable reads.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lock-errors">Lock Errors<a href="#lock-errors" class="hash-link" aria-label="Direct link to Lock Errors" title="Direct link to Lock Errors">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="waiting-for-metadata-lock">Waiting for metadata lock<a href="#waiting-for-metadata-lock" class="hash-link" aria-label="Direct link to Waiting for metadata lock" title="Direct link to Waiting for metadata lock">​</a></h3>
<p><a href="https://www.linkedin.com/pulse/pitfalls-metadata-locking-during-ddl-execution-pranav-pandey/" target="_blank" rel="noopener noreferrer">Pitfalls of Metadata Locking During DDL Execution in Production</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-metadata-locks-table.html" target="_blank" rel="noopener noreferrer">MySQL :: MySQL 8.0 Reference Manual :: 29.12.13.3 The metadata_locks Table</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.4/en/metadata-locking.html" target="_blank" rel="noopener noreferrer">MySQL :: MySQL 8.4 Reference Manual :: 10.11.4 Metadata Locking</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="links">Links<a href="#links" class="hash-link" aria-label="Direct link to Links" title="Direct link to Links">​</a></h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=MqWQH-WWFBE&amp;ab_channel=Percona" target="_blank" rel="noopener noreferrer">Overview of Different ALTER Algorithms and Its Locking Scenarios in MySQL - Sri Sakthivel M.D. - YouTube</a></li>
<li><a href="https://www.slideshare.net/slideshow/innodb-locking-explained-with-stick-figures/54574903" target="_blank" rel="noopener noreferrer">InnoDB Locking Explained with Stick Figures | PPT</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases-sql/mysql/optimizing-locking-operations.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-11T20:07:32.000Z" itemprop="dateModified">Oct 11, 2025</time></b> by <b>Deepak</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/databases-sql/mysql/mysqldump"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MySQLDump</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/databases-sql/mysql/others"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Others</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#gap-locking" class="table-of-contents__link toc-highlight">Gap Locking</a></li><li><a href="#different-locks" class="table-of-contents__link toc-highlight">Different Locks</a><ul><li><a href="#row-locks" class="table-of-contents__link toc-highlight">Row Locks</a></li><li><a href="#range-locks" class="table-of-contents__link toc-highlight">Range Locks</a></li><li><a href="#gap-locks" class="table-of-contents__link toc-highlight">Gap Locks</a></li><li><a href="#index-locks" class="table-of-contents__link toc-highlight">Index Locks</a></li><li><a href="#table-locks" class="table-of-contents__link toc-highlight">Table Locks</a></li><li><a href="#intention-locks" class="table-of-contents__link toc-highlight">Intention Locks</a></li><li><a href="#insert-intention-lock" class="table-of-contents__link toc-highlight">Insert intention lock</a></li><li><a href="#auto-inc-lock" class="table-of-contents__link toc-highlight">Auto-inc lock</a></li><li><a href="#deadlock" class="table-of-contents__link toc-highlight">Deadlock</a></li><li><a href="#key-differences-between-range-and-gap-locks" class="table-of-contents__link toc-highlight">Key Differences between Range and Gap Locks</a></li></ul></li><li><a href="#lock-errors" class="table-of-contents__link toc-highlight">Lock Errors</a><ul><li><a href="#waiting-for-metadata-lock" class="table-of-contents__link toc-highlight">Waiting for metadata lock</a></li></ul></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Deep Notes, Built with ❤️</div></div></div></footer></div>
</body>
</html>