"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[59144],{829267:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"devops/others/kong","title":"Kong","description":"Kong is a cloud-native, fast, scalable, and distributed Microservice Abstraction Layer (also known as an API Gateway, API Middleware or in some cases Service Mesh). Made available as an open-source project in 2015, its core values are high performance and extensibility.","source":"@site/docs/devops/others/kong.md","sourceDirName":"devops/others","slug":"/devops/others/kong","permalink":"/devops/others/kong","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/others/kong.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1737394737000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"KeyCloak","permalink":"/devops/others/keycloak"},"next":{"title":"Other - CICD","permalink":"/devops/others/other-cicd"}}');var i=s(474848),o=s(28453);const r={},a="Kong",l={},c=[{value:"Features",id:"features",level:2},{value:"Kong DB Less Declarative Config",id:"kong-db-less-declarative-config",level:2},{value:"Kong Helm Charts",id:"kong-helm-charts",level:2},{value:"Commands",id:"commands",level:2},{value:"Konga",id:"konga",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Installation using Konnect",id:"installation-using-konnect",level:3},{value:"Config",id:"config",level:3},{value:"Sync &amp; Test",id:"sync--test",level:3},{value:"Quiz",id:"quiz",level:2},{value:"Question 1",id:"question-1",level:3},{value:"Question 2",id:"question-2",level:3},{value:"Question 3",id:"question-3",level:3},{value:"Question 4",id:"question-4",level:3},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"kong",children:"Kong"})}),"\n",(0,i.jsxs)(n.p,{children:["Kong is a cloud-native, fast, scalable, and distributed Microservice Abstraction Layer ",(0,i.jsx)(n.em,{children:"(also known as an API Gateway, API Middleware or in some cases Service Mesh)"}),". Made available as an open-source project in 2015, its core values are high performance and extensibility."]}),"\n",(0,i.jsx)(n.p,{children:"If you are building for web, mobile or IoT (Internet of Things) you will likely end up needing common functionality to run your actual software. Kong can help by acting as a gateway (or a sidecar) for microservices requests while providing load balancing, logging, authentication, rate-limiting, transformations, and more through plugins."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:s(123441).A+"",width:"999",height:"661"})}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cloud-Native:"})," Platform agnostic, Kong can run from bare metal to Kubernetes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dynamic Load Balancing:"})," Load balance traffic across multiple upstream services."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hash-based Load Balancing:"})," Load balance with consistent hashing/sticky sessions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Circuit-Breaker:"})," Intelligent tracking of unhealthy upstream services."]}),"\n",(0,i.jsx)(n.li,{children:"**Health Checks:**Active and passive monitoring of your upstream services."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Service Discovery:"})," Resolve SRV records in third-party DNS resolvers like Consul."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Serverless:"})," Invoke and secure AWS Lambda or OpenWhisk functions directly from Kong."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"WebSockets:"})," Communicate to your upstream services via WebSockets."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OAuth2.0:"})," Easily add OAuth2.0 authentication to your APIs."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Logging:"})," Log requests and responses to your system over HTTP, TCP, UDP, or to disk."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security:"})," ACL, Bot detection, whitelist/blacklist IPs, etc..."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Syslog:"})," Logging to System log."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SSL:"})," Setup a Specific SSL Certificate for an underlying service or API."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitoring:"})," Live monitoring provides key load and performance server metrics."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Forward Proxy:"})," Make Kong connect to intermediary transparent HTTP proxies."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authentications:"})," HMAC, JWT, Basic, and more."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rate-limiting:"})," Block and throttle requests based on many variables."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Transformations:"})," Add, remove, or manipulate HTTP requests and responses."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Caching:"})," Cache and serve responses at the proxy layer."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CLI:"})," Control your Kong cluster from the command line."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"REST API:"})," Kong can be operated with its RESTful API for maximum flexibility."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Geo-Replicated:"})," Configs are always up-to-date across different regions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Failure Detection & Recovery:"})," Kong is unaffected if one of your Cassandra nodes goes down."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Clustering:"})," All Kong nodes auto-join the cluster keeping their config updated across nodes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Scalability:"})," Distributed by nature, Kong scales horizontally by simply adding nodes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance:"})," Kong handles load with ease by scaling and using NGINX at the core."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Plugins:"})," Extendable architecture for adding functionality to Kong and APIs."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"kong-db-less-declarative-config",children:"Kong DB Less Declarative Config"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.konghq.com/1.3.x/db-less-and-declarative-config",children:"https://docs.konghq.com/1.3.x/db-less-and-declarative-config"})}),"\n",(0,i.jsx)(n.h2,{id:"kong-helm-charts",children:"Kong Helm Charts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'helm install --name kg \\\n--set=admin.type=ClusterIP,proxy.type=LoadBalancer,proxy.loadBalancerIP=104.211.225.153 \\\n--namespace kong \\\nstable/kong\n\nhelm upgrade --set=admin.useTLS=true --namespace kong kg stable/kong\n\nhelm delete --purge kg\n\nhelm status kg\n\nexport POD_NAME=$(kubectl get pods --namespace kong -l "release=kg, app=kong" -o jsonpath="{.items[0].metadata.name}")\nkubectl port-forward --namespace kong $POD_NAME 8444:8444\n\n# Notes\n    1. Kong Admin can be accessed inside the cluster using:\n            DNS=kg-kong-admin.kong.svc.cluster.local\n            PORT=8444\n\n    To connect from outside the K8s cluster:\n            HOST=127.0.0.1\n\n            # Execute the following commands to route the connection to Admin SSL port:\n            export POD_NAME=$(kubectl get pods --namespace kong -l "release=kg, app=kong" -o jsonpath="{.items[0].metadata.name}")\n            kubectl port-forward --namespace kong $POD_NAME 8444:8444\n\n    2. Kong Proxy can be accessed inside the cluster using:\n            DNS=kg-kong-proxy.kong.svc.cluster.localPORT=443To connect from outside the K8s cluster:\n            HOST=$(kubectl get svc --namespace kong kg-kong-proxy -o jsonpath=\'{.status.loadBalancer.ingress.ip}\')\n            PORT=$(kubectl get svc --namespace kong kg-kong-proxy -o jsonpath=\'{.spec.ports[0].nodePort}\')\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/helm/charts/tree/master/stable/kong",children:"https://github.com/helm/charts/tree/master/stable/kong"})}),"\n",(0,i.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'docker network create kong-net\n\ndocker run --name kong-database \\\n--network=kong-net \\\n-p 5432:5432 \\\n-e POSTGRES_USER=kong \\\n-e POSTGRES_DB=kong \\\npostgres:11.2\n\ndocker run --rm \\\n--network=kong-net \\\n-e KONG_DATABASE=postgres \\\n-e KONG_PG_HOST=kong-database \\\nkong:latest kong migrations bootstrap\n\ndocker run --name kong \\\n--network=kong-net \\\n-e KONG_DATABASE=postgres \\\n-e KONG_PG_HOST=kong-database \\\n-e KONG_PROXY_ACCESS_LOG=/dev/stdout \\\n-e KONG_ADMIN_ACCESS_LOG=/dev/stdout \\\n-e KONG_PROXY_ERROR_LOG=/dev/stderr \\\n-e KONG_ADMIN_ERROR_LOG=/dev/stderr \\\n-e "KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl" \\\n-p 8000:8000 \\\n-p 8443:8443 \\\n-p 8001:8001 \\\n-p 8444:8444 \\\nkong:latest\n\ndocker run -p 1337:1337 \\\n--network=kong-net \\\n--name konga \\\n-v /Users/kongadata:/app/kongadata \\\n-e NODE_ENV=production \\\npantsel/konga\n\ncurl -X POST \\\n-H "Content-Type: application/json" \\\n-d \'{"name":"JohnDoe","username":"jdoe"}\' \\\nhttp://localhost:8000/fake-api/users\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"http://localhost:8000/fake-api/users",children:"http://localhost:8000/fake-api/users"})}),"\n",(0,i.jsx)(n.h2,{id:"konga",children:"Konga"}),"\n",(0,i.jsx)(n.p,{children:"More than just another GUI to Kong Admin API"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/pantsel/konga",children:"https://github.com/pantsel/konga"})}),"\n",(0,i.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.konghq.com/konnect/getting-started/",children:"Get started with Konnect - Kong Konnect | Kong Docs"})}),"\n",(0,i.jsx)(n.h3,{id:"installation-using-konnect",children:"Installation using Konnect"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"brew tap kong/deck\nbrew install deck\n\nexport DECK_KONNECT_CONTROL_PLANE_NAME='serverless-default'\nexport DECK_KONNECT_TOKEN='kpat_eIfenaD74twNK4GTWCmAACVV0Dh69DML9fjDNU9YbXxAOrH9G'\ndeck gateway ping\n"})}),"\n",(0,i.jsx)(n.h3,{id:"config",children:"Config"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Welcome to Konnect!\n# In this quickstart, you'll set up a sample API and test key Kong Gateway\n# features, including authentication and rate-limiting. Using decK, you'll\n# sync the configuration in this file to a Serverless Gateway, giving you\n# hands-on experience with managing Gateway setups as code.\n# Once you're comfortable, you can define your own API in a decK configuration\n# or sync this configuration to a Gateway running in another environment.\n\n_format_version: \"3.0\"\n\n# A service is Kong Gateway's entity that describes an API or microservice.\nservices:\n- host: api.kong-air.com\n  name: Kong-Air-Flights-API\n  path: /flights\n  port: 443\n  protocol: https\n\n  # A route defines the rules for how incoming requests are matched\n  # by Kong Gateway and sent to the appropriate backend service.\n  routes:\n  - name: deck-demo-route\n    methods:\n    - GET\n    - OPTIONS\n    paths:\n    - /first-route\n    protocols:\n    - http\n\n  # A plugin adds functionality to Kong Gateway, enabling features like\n  # authentication, rate limiting, logging, and more.\n  plugins:\n    # The key-auth plugin secures your service by requiring consumers to\n    # provide an API key for access.\n    - name: key-auth\n      config:\n        key_names:\n        - apikey\n        hide_credentials: false\n\n# In order to be able to access your authenticated API, we need to define a consumer and credentials.\nconsumers:\n- username: demo_user\n  keyauth_credentials:\n  - key: hello_world\n"})}),"\n",(0,i.jsx)(n.h3,{id:"sync--test",children:"Sync & Test"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'deck gateway sync ./demo_deck_config.yaml\n\n# test\ncurl https://kong-578a9e8f3ausw9mj7.kongcloud.dev/first-route -H "apikey: hello_world"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"quiz",children:"Quiz"}),"\n",(0,i.jsx)(n.h3,{id:"question-1",children:"Question 1"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What is a primary benefit of using Kong's plugin-driven architecture?"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"It reduces the need for API versioning."}),"\n",(0,i.jsx)(n.li,{children:"It allows custom extensions in multiple programming languages."}),"\n",(0,i.jsx)(n.li,{children:"It eliminates the need for load balancing."}),"\n",(0,i.jsx)(n.li,{children:"It replaces the need for microservices."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Answer:"})," 2. It allows custom extensions in multiple programming languages."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"question-2",children:"Question 2"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Which of the following best describes Kong's role in a microservices architecture?"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"It replaces microservices with a single monolithic application."}),"\n",(0,i.jsx)(n.li,{children:"It acts as an entry point for client requests, managing traffic to microservices."}),"\n",(0,i.jsx)(n.li,{children:"It serves as a database for microservices data."}),"\n",(0,i.jsx)(n.li,{children:"It directly processes client requests without routing them."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Answer:"})," 2. It acts as an entry point for client requests, managing traffic to microservices."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"question-3",children:"Question 3"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Which authentication methods are supported by Kong?"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Basic, JWT, HMAC, OAuth 2"}),"\n",(0,i.jsx)(n.li,{children:"Basic, SSH, HMAC, LDAP"}),"\n",(0,i.jsx)(n.li,{children:"OAuth 1, JWT, SAML, SSH"}),"\n",(0,i.jsx)(n.li,{children:"OAuth 2, SSH, LDAP, SAML"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Answer:"})," 1. Basic, JWT, HMAC, OAuth 2"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"question-4",children:"Question 4"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:'What is Kong\'s "Admin API" primarily used for?'})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Managing backend service configurations."}),"\n",(0,i.jsx)(n.li,{children:"Controlling consumer-level traffic directly."}),"\n",(0,i.jsx)(n.li,{children:"Configuring and managing Kong Gateway settings."}),"\n",(0,i.jsx)(n.li,{children:"Monitoring API health and performance metrics."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Answer:"})," 3. Configuring and managing Kong Gateway settings."]}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/Kong/kong",children:"GitHub - Kong/kong: \ud83e\udd8d The Cloud-Native API Gateway and AI Gateway."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://medium.com/@tselentispanagis/managing-microservices-and-apis-with-kong-and-konga-7d14568bb59d",children:"Managing microservices and APIs with Kong and Konga | by Tselentis Panagis | Medium"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://konghq.com/",children:"The Platform Powering the API World | Kong Inc."})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=tagH5k7nBQ0",children:"become an kong api gateway expert | kong api gateway full crash course - YouTube"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},123441:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/DevOps-Others-Kong-image1-3d4594fa144d3613f0bff575b8f90456.jpg"},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(296540);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);