"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[57839],{743513:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"databases/sql-databases/postgres/architecture","title":"Architecture","description":"PostgreSQL uses processes in their internal architecture. It has been a topic of debate whether going to threads are better or not, but meanwhile I think it is a good idea to understand all these processes and what they do. Let us go through them","source":"@site/docs/databases/sql-databases/postgres/architecture.md","sourceDirName":"databases/sql-databases/postgres","slug":"/databases/sql-databases/postgres/architecture","permalink":"/databases/sql-databases/postgres/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases/sql-databases/postgres/architecture.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1738438648000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Postgres","permalink":"/databases/sql-databases/postgres/"},"next":{"title":"Documentation","permalink":"/databases/sql-databases/postgres/documentation"}}');var a=r(474848),o=r(28453);const n={},i="Architecture",c={},d=[{value:"Main processes",id:"main-processes",level:3},{value:"Postmaster Process",id:"postmaster-process",level:3},{value:"Backend Process",id:"backend-process",level:3},{value:"Background Workers",id:"background-workers",level:3},{value:"Auxiliary Processes",id:"auxiliary-processes",level:3},{value:"Other Processes",id:"other-processes",level:3}];function l(e){const s={h1:"h1",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,a.jsx)(s.p,{children:"PostgreSQL uses processes in their internal architecture. It has been a topic of debate whether going to threads are better or not, but meanwhile I think it is a good idea to understand all these processes and what they do. Let us go through them"}),"\n",(0,a.jsx)(s.h3,{id:"main-processes",children:"Main processes"}),"\n",(0,a.jsx)(s.p,{children:"These are the main processes that are critical for Postgres to function."}),"\n",(0,a.jsx)(s.h3,{id:"postmaster-process",children:"Postmaster Process"}),"\n",(0,a.jsx)(s.p,{children:"This is the main process that manages everything in Postgres. It creates a listener on the configured interfaces and port (default 5432). It is also responsible for forking other processes to do various tasks."}),"\n",(0,a.jsx)(s.h3,{id:"backend-process",children:"Backend Process"}),"\n",(0,a.jsx)(s.p,{children:'The postmaster process creates a new "backend" process for every connection it accepts. The connection is then handed over to the new backend process to perform the reading of the TCP stream, request parsing, SQL query parsing (yes those are different), planning, execution and returning the results. The process uses its local virtual memory for sorting and parsing logic, this memory is controlled by the work_mem parameter.'}),"\n",(0,a.jsx)(s.h3,{id:"background-workers",children:"Background Workers"}),"\n",(0,a.jsx)(s.p,{children:"Postgres spin these background workers for various jobs like parallel queries and logical replication. So to minimize the load on backend process."}),"\n",(0,a.jsx)(s.h3,{id:"auxiliary-processes",children:"Auxiliary Processes"}),"\n",(0,a.jsx)(s.p,{children:"Auxiliary processes that do all sort of important but side tasks."}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Background Writer (bw) - For parallel queries"}),"\n",(0,a.jsx)(s.li,{children:"Checkpointer (cp) - Sync data files to WAL for faster crash recovery"}),"\n",(0,a.jsx)(s.li,{children:"Startup Process (st) - Actually performs crash recovery"}),"\n",(0,a.jsx)(s.li,{children:"Logger (lg) - Someone needs to write database events, warnings, errors"}),"\n",(0,a.jsx)(s.li,{children:"Autovacuum Launcher (avl) - Launches the autovacuum processes"}),"\n",(0,a.jsx)(s.li,{children:"WAL writer (ww) - Process that writes to the WAL"}),"\n",(0,a.jsx)(s.li,{children:"WAL archiver (wa) - Process that archives the WAL"}),"\n",(0,a.jsx)(s.li,{children:"WAL receiver (wr) - Process on standby that receives the WAL from primary"}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"other-processes",children:"Other Processes"}),"\n",(0,a.jsx)(s.p,{children:"Autovaccum workers - Processes that run autovacuume"}),"\n",(0,a.jsx)(s.p,{children:"WAL senders - Processes that send WAL from primary to standby WAL receiver"})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>n,x:()=>i});var t=r(296540);const a={},o=t.createContext(a);function n(e){const s=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);