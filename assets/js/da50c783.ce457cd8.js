"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[79260],{322933:(e,a,s)=>{s.r(a),s.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"databases/data-warehouses/snowflake/architecture","title":"Architecture","description":"Data Platform as a Self-managed Service","source":"@site/docs/databases/data-warehouses/snowflake/architecture.md","sourceDirName":"databases/data-warehouses/snowflake","slug":"/databases/data-warehouses/snowflake/architecture","permalink":"/databases/data-warehouses/snowflake/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases/data-warehouses/snowflake/architecture.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1738438648000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Snowflake","permalink":"/databases/data-warehouses/snowflake/"},"next":{"title":"Commands","permalink":"/databases/data-warehouses/snowflake/commands"}}');var n=s(474848),r=s(28453);const i={},o="Architecture",l={},c=[{value:"Data Platform as a Self-managed Service",id:"data-platform-as-a-self-managed-service",level:2},{value:"Snowflake Architecture",id:"snowflake-architecture",level:2},{value:"Database Storage",id:"database-storage",level:3},{value:"Query Processing",id:"query-processing",level:3},{value:"Cloud Services",id:"cloud-services",level:3},{value:"Metadata Layer",id:"metadata-layer",level:3},{value:"Multi-cluster, and how it is implemented in Snowflake for scalability?",id:"multi-cluster-and-how-it-is-implemented-in-snowflake-for-scalability",level:3},{value:"Snowflake Caching",id:"snowflake-caching",level:2},{value:"1. Metadata Cache",id:"1-metadata-cache",level:3},{value:"2. Result Cache",id:"2-result-cache",level:3},{value:"3. Warehouse Cache",id:"3-warehouse-cache",level:3},{value:"4. Centralized Storage",id:"4-centralized-storage",level:3},{value:"Links",id:"links",level:2}];function d(e){const a={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,n.jsx)(a.h2,{id:"data-platform-as-a-self-managed-service",children:"Data Platform as a Self-managed Service"}),"\n",(0,n.jsx)(a.p,{children:"Snowflake is a true self-managed service, meaning:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"There is no hardware (virtual or physical) to select, install, configure, or manage."}),"\n",(0,n.jsx)(a.li,{children:"There is virtually no software to install, configure, or manage."}),"\n",(0,n.jsx)(a.li,{children:"Ongoing maintenance, management, upgrades, and tuning are handled by Snowflake."}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"Snowflake runs completely on cloud infrastructure. All components of Snowflake\u2019s service (other than optional command line clients, drivers, and connectors), run in public cloud infrastructures."}),"\n",(0,n.jsx)(a.p,{children:"Snowflake uses virtual compute instances for its compute needs and a storage service for persistent storage of data. Snowflake cannot be run on private cloud infrastructures (on-premises or hosted)."}),"\n",(0,n.jsx)(a.p,{children:"Snowflake is not a packaged software offering that can be installed by a user. Snowflake manages all aspects of software installation and updates."}),"\n",(0,n.jsx)(a.h2,{id:"snowflake-architecture",children:"Snowflake Architecture"}),"\n",(0,n.jsx)(a.p,{children:"Snowflake\u2019s architecture is a hybrid of traditional shared-disk and shared-nothing database architectures. Similar to shared-disk architectures, Snowflake uses a central data repository for persisted data that is accessible from all compute nodes in the platform. But similar to shared-nothing architectures, Snowflake processes queries using MPP (massively parallel processing) compute clusters where each node in the cluster stores a portion of the entire data set locally. This approach offers the data management simplicity of a shared-disk architecture, but with the performance and scale-out benefits of a shared-nothing architecture."}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"snowflake-architecture",src:s(315249).A+"",width:"858",height:"485"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:"snowflake-architecture",src:s(295636).A+"",width:"999",height:"666"})}),"\n",(0,n.jsx)(a.p,{children:"Snowflake\u2019s unique architecture consists of three key layers:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:(0,n.jsx)(a.a,{href:"https://docs.snowflake.com/en/user-guide/intro-key-concepts#database-storage",children:"Database Storage"})}),"\n",(0,n.jsx)(a.li,{children:(0,n.jsx)(a.a,{href:"https://docs.snowflake.com/en/user-guide/intro-key-concepts#query-processing",children:"Query Processing"})}),"\n",(0,n.jsx)(a.li,{children:(0,n.jsx)(a.a,{href:"https://docs.snowflake.com/en/user-guide/intro-key-concepts#cloud-services",children:"Cloud Services"})}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"database-storage",children:"Database Storage"}),"\n",(0,n.jsx)(a.p,{children:"When data is loaded into Snowflake, Snowflake reorganizes that data into its internal optimized, compressed, columnar format. Snowflake stores this optimized data in cloud storage."}),"\n",(0,n.jsx)(a.p,{children:"Snowflake manages all aspects of how this data is stored - the organization, file size, structure, compression, metadata, statistics, and other aspects of data storage are handled by Snowflake. The data objects stored by Snowflake are not directly visible nor accessible by customers; they are only accessible through SQL query operations run using Snowflake."}),"\n",(0,n.jsx)(a.h3,{id:"query-processing",children:"Query Processing"}),"\n",(0,n.jsx)(a.p,{children:'Query execution is performed in the processing layer. Snowflake processes queries using "virtual warehouses". Each virtual warehouse is an MPP compute cluster composed of multiple compute nodes allocated by Snowflake from a cloud provider.'}),"\n",(0,n.jsx)(a.p,{children:"Each virtual warehouse is an independent compute cluster that does not share compute resources with other virtual warehouses. As a result, each virtual warehouse has no impact on the performance of other virtual warehouses."}),"\n",(0,n.jsx)(a.p,{children:"A virtual warehouse is essentially a set of resources (compute clusters) that are used to process queries. It can be scaled up or down based on the workload requirements. The concept of virtual warehouses contributes to workload isolation by allowing different workloads or user groups to have dedicated resources for their queries, preventing resource contention. It also aids optimization as you can allocate the appropriate amount of resources to meet the performance needs of specific tasks."}),"\n",(0,n.jsx)(a.h3,{id:"cloud-services",children:"Cloud Services"}),"\n",(0,n.jsx)(a.p,{children:"The cloud services layer is a collection of services that coordinate activities across Snowflake. These services tie together all of the different components of Snowflake in order to process user requests, from login to query dispatch. The cloud services layer also runs on compute instances provisioned by Snowflake from the cloud provider."}),"\n",(0,n.jsx)(a.p,{children:"Services managed in this layer include:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Authentication"}),"\n",(0,n.jsx)(a.li,{children:"Infrastructure management"}),"\n",(0,n.jsx)(a.li,{children:"Metadata management"}),"\n",(0,n.jsx)(a.li,{children:"Query parsing and optimization"}),"\n",(0,n.jsx)(a.li,{children:"Access control"}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"metadata-layer",children:"Metadata Layer"}),"\n",(0,n.jsx)(a.p,{children:"Snowflake efficiently manages metadata storage. Metadata, which includes information about tables, columns, and other database objects, is stored separately from the user data. This separation allows Snowflake to optimize metadata storage independently. All this metadata is stored in FoundationDB and is deployed when snowflake is provisioned"}),"\n",(0,n.jsx)(a.h3,{id:"multi-cluster-and-how-it-is-implemented-in-snowflake-for-scalability",children:"Multi-cluster, and how it is implemented in Snowflake for scalability?"}),"\n",(0,n.jsx)(a.p,{children:"In Snowflake, multi-cluster refers to the ability to have multiple virtual warehouses (compute clusters) that can be independently scaled up or down. Each virtual warehouse operates independently but can access the same underlying data stored in Snowflake's storage layer. This parallel processing capability allows for scalable and efficient query performance."}),"\n",(0,n.jsx)(a.h2,{id:"snowflake-caching",children:"Snowflake Caching"}),"\n",(0,n.jsx)(a.h3,{id:"1-metadata-cache",children:"1. Metadata Cache"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Object Definition"}),"\n",(0,n.jsx)(a.li,{children:"Statistics"}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"2-result-cache",children:"2. Result Cache"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Exact results from exact queries"}),"\n",(0,n.jsx)(a.li,{children:"Last 24hrs"}),"\n",(0,n.jsx)(a.li,{children:"Underlying data cannot have changed"}),"\n",(0,n.jsx)(a.li,{children:"Functions like current time causes expiration"}),"\n",(0,n.jsx)(a.li,{children:"User can be different but role must be same"}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"3-warehouse-cache",children:"3. Warehouse Cache"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:'Sometime called "Local", or "SSD", or "Data Cache"'}),"\n",(0,n.jsx)(a.li,{children:"Contain Raw data from the table, not aggregated"}),"\n",(0,n.jsx)(a.li,{children:"When warehouse is suspended, data is dropped/purged"}),"\n",(0,n.jsx)(a.li,{children:"Can use partial data and go deeper for remaining"}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"4-centralized-storage",children:"4. Centralized Storage"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Long term storage, database and tables, remote"}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"links",children:"Links"}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.a,{href:"https://docs.snowflake.com/en/user-guide/intro-key-concepts",children:"Key Concepts & Architecture | Snowflake Documentation"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.a,{href:"https://docs.snowflake.com/user-guide/intro-supported-features",children:"Overview of Key Features | Snowflake Documentation"})}),"\n",(0,n.jsx)(a.p,{children:(0,n.jsx)(a.a,{href:"https://www.snowflake.com/blog/how-foundationdb-powers-snowflake-metadata-forward/",children:"How FoundationDB Powers Snowflake Metadata Forward - Blog"})})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},315249:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/Pasted image 20231205121227-a9f0a6359a2cf20b2d60d8e422a2651f.jpg"},295636:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/Pasted image 20240104225355-80296133f01f3172ee2a1941638ef15a.jpg"},28453:(e,a,s)=>{s.d(a,{R:()=>i,x:()=>o});var t=s(296540);const n={},r=t.createContext(n);function i(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);