"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[86569],{217405:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>d,contentTitle:()=>n,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"databases-sql/aws-aurora/intro","title":"AWS Aurora","description":"For OLTP","source":"@site/docs/databases-sql/aws-aurora/intro.md","sourceDirName":"databases-sql/aws-aurora","slug":"/databases-sql/aws-aurora/intro","permalink":"/databases-sql/aws-aurora/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases-sql/aws-aurora/intro.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1749576162000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"High Availability (HA)","permalink":"/databases-sql/aws-aurora/high-availability-ha"},"next":{"title":"Monitoring","permalink":"/databases-sql/aws-aurora/monitoring"}}');var t=r(474848),o=r(28453);const i={},n="AWS Aurora",d={},l=[{value:"History",id:"history",level:2},{value:"Concurrency Control",id:"concurrency-control",level:2},{value:"Data Model",id:"data-model",level:2},{value:"Foreign Keys",id:"foreign-keys",level:2},{value:"Indexes",id:"indexes",level:2},{value:"Isolation Levels",id:"isolation-levels",level:2},{value:"Joins",id:"joins",level:2},{value:"Logging",id:"logging",level:2},{value:"Query Compilation",id:"query-compilation",level:2},{value:"Query Execution",id:"query-execution",level:2},{value:"Query Interface",id:"query-interface",level:2},{value:"Storage Architecture",id:"storage-architecture",level:2},{value:"Storage Model",id:"storage-model",level:2},{value:"Stored Procedures",id:"stored-procedures",level:2},{value:"System Architecture",id:"system-architecture",level:2},{value:"Views",id:"views",level:2},{value:"Questions",id:"questions",level:2},{value:"Others",id:"others",level:2}];function h(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"aws-aurora",children:"AWS Aurora"})}),"\n",(0,t.jsx)(a.p,{children:"For OLTP"}),"\n",(0,t.jsx)(a.p,{children:"High Performance Managed Relational Database"}),"\n",(0,t.jsx)(a.p,{children:"Amazon Aurora is a relational database offered as a service in Amazon's AWS. Based on the open source version of MySQL, it is a commercial database that claims to be compatible with MySQL and PostgreSQL while providing superior throughput. Being provided as a cloud service, Aurora promises high availability by using distributed replications of backend storage. The system is being actively maintained and updated by Amazon."}),"\n",(0,t.jsx)(a.h2,{id:"history",children:"History"}),"\n",(0,t.jsxs)(a.p,{children:["Aurora was announced on Nov. 12, 2014 in Amazon's re",":Invent"," conference in Las Vegas. It was officially released and ready to use as a service in AWS on July 27, 2015 by being added into the Amazon Relational Database Service. A major patch of Aurora was added in October 24, 2017, where Aurora was extended with PostgreSQL compatibility."]}),"\n",(0,t.jsx)(a.h2,{id:"concurrency-control",children:"Concurrency Control"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?concurrency-control=multi-version-concurrency-control-mvcc",children:"Multi-version Concurrency Control (MVCC)"})}),"\n",(0,t.jsx)(a.p,{children:'Aurora decouples the storage engine from its database engine, and the concurrency control protocol is entirely decided by the database engine it used. In the paper that introduced Aurora, the concurrency control model was stated to be exactly the same as the database engine it inherited from. So Aurora has the same concurrency control protocol, MVCC, as MySQL/InnoDB does. InnoDB\'s MVCC protocol stores a separate data structure for "rollback segments", which are actually undo logs. In the situation of a consistent read (for isolation levels beyond read committed), the logs will be applied in place to reconstruct the requested earlier versions of a row.'}),"\n",(0,t.jsx)(a.h2,{id:"data-model",children:"Data Model"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?data-model=relational",children:"Relational"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora is stated to be a relational database engine. That can also be inferred from its full inheritance of MySQL/InnoDB's database engine and storage layout."}),"\n",(0,t.jsx)(a.h2,{id:"foreign-keys",children:"Foreign Keys"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?foreign-keys=supported",children:"Supported"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora supports foreign keys, just as MySQL/InnoDB does. Best practice guide on Aurora's documentation provided some insights on how to properly use foreign keys, please refer to the citation for more details."}),"\n",(0,t.jsx)(a.h2,{id:"indexes",children:"Indexes"}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?indexes=btree",children:"B+Tree"}),(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?indexes=hash-table",children:"Hash Table"})]}),"\n",(0,t.jsx)(a.p,{children:"Aurora uses the same indexes as MySQL/InnoDB. In MySQL, both b-tree and hash indexes are used. The default index choice for MySQL is b-tree unless explicitly specified. Aurora also supports spatial indexes, and its implementation utilizes a b-tree."}),"\n",(0,t.jsx)(a.h2,{id:"isolation-levels",children:"Isolation Levels"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?isolation-levels=serializable",children:"Serializable"})}),"\n",(0,t.jsx)(a.p,{children:"In the paper that introduced Aurora, the authors stated that Aurora has exactly the same isolation levels as MySQL. The supported isolation levels includes the standard ANSI levels and Snapshot Isolation."}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.a,{href:"https://aws.amazon.com/rds/aurora/",children:"Amazon Aurora"})," with MySQL compatibility supports the ANSI READ COMMITTED isolation level on read replicas. This isolation level enables long-running queries on an Aurora read replica to execute without impacting the throughput of writes on the writer node."]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.code,{children:"SELECT @@TX_ISOLATION;"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.code,{children:"REPEATABLE-READ"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Reference.html#AuroraMySQL.Reference.IsolationLevels",children:"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Reference.html#AuroraMySQL.Reference.IsolationLevels"})}),"\n",(0,t.jsx)(a.h2,{id:"joins",children:"Joins"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?joins=hash-join",children:"Hash Join"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora has different join algorithm compared to MySQL. It supports hash join in addition to the already-existing nested loop join in MySQL. When the hash join option is enabled, Aurora's optimizer will automatically choose a join method as it evaluates the query plan. However, there are several restrictions for hash join in Aurora. To be more specific, left-right outer joins, semijoins such as subqueries and multiple-table updates or deletes are not supported."}),"\n",(0,t.jsx)(a.h2,{id:"logging",children:"Logging"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?logging=logical-logging",children:"Logical Logging"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora's logging design is logical logging. The system separates the database engine from the backend storage, where the database engine propagates logs continuously to the backend storage. Such logs are then asynchronously processed by the distributed storage servers to bring the database to its latest state."}),"\n",(0,t.jsx)(a.h2,{id:"query-compilation",children:"Query Compilation"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?query-compilation=not-supported",children:"Not Supported"})}),"\n",(0,t.jsx)(a.p,{children:"Similar to MySQL, Aurora doesn't support query compilation."}),"\n",(0,t.jsx)(a.h2,{id:"query-execution",children:"Query Execution"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?query-execution=tuple-at-a-time-model",children:"Tuple-at-a-Time Model"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora uses the same query execution engine as MySQL."}),"\n",(0,t.jsx)(a.h2,{id:"query-interface",children:"Query Interface"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?query-interface=sql",children:"SQL"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora supports the standard SQL query interface. It inherits the SQL compatibility from MySQL, as well as the extensions MySQL made to the SQL standard."}),"\n",(0,t.jsx)(a.h2,{id:"storage-architecture",children:"Storage Architecture"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?storage-architecture=disk-oriented",children:"Disk-oriented"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora is a disk-oriented database."}),"\n",(0,t.jsx)(a.h2,{id:"storage-model",children:"Storage Model"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?storage-model=n-ary-storage-model-rowrecord",children:"N-ary Storage Model (Row/Record)"})}),"\n",(0,t.jsx)(a.p,{children:"Same as MySQL/InnoDB, Aurora is a row-storage DBMS. The tuples are stored row-by-row in the distributed storage servers."}),"\n",(0,t.jsx)(a.h2,{id:"stored-procedures",children:"Stored Procedures"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?stored-procedures=supported",children:"Supported"})}),"\n",(0,t.jsx)(a.p,{children:"Same as MySQL/InnoDB, Aurora supports stored procedures."}),"\n",(0,t.jsx)(a.h2,{id:"system-architecture",children:"System Architecture"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?system-architecture=shared-nothing",children:"Shared-Nothing"})}),"\n",(0,t.jsx)(a.p,{children:"Aurora decouples its database engine from the storage backend. The database engine is a modified version with MySQL/InnoDB, where the storage backend consists of distributed replicas that span across different availability zones in AWS. The database engine will propagates logs to the backend storage, and the backend storage utilizes a quorum based synchronization scheme to ensure the consistency of the database."}),"\n",(0,t.jsx)(a.p,{children:"Aurora architecture works on the basis of a cluster volume that manages the data for all the database instances in that particular cluster. A cluster volume spans across multiple availability zones and is effectively virtual database storage. The underlying storage volume is on top of multiple cluster nodes which are distributed across different availability zones. Separate from this, Aurora database can also have read-replicas. Only one instance usually serves as the primary instance and it supports reads as well as writes. The rest of the instances serve as read-replicas and load balancing needs to be handled by the user. This is different from the multiAZ deployment, where instances are located across the availability zone and support automatic failover."}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.a,{href:"https://aws.amazon.com/rds/aurora/",children:"Amazon Aurora"})," is a relational database that was designed to take full advantage of the abundance of networking, processing, and storage resources available in the cloud. While maintaining compatibility with MySQL and PostgreSQL on the user-visible side, Aurora makes use of a modern, purpose-built distributed storage system under the covers. Your data is striped across hundreds of storage nodes distributed over three distinct AWS Availability Zones, with two copies per zone, on fast SSD storage. Here's what this looks like:"]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"image",src:r(728638).A+"",width:"845",height:"562"})}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Asynchronous Key Fetch"}),"\n",(0,t.jsx)(a.li,{children:"Batched Scans"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"views",children:"Views"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/browse?views=materialized-views",children:"Materialized Views"})}),"\n",(0,t.jsx)(a.p,{children:"Same as MySQL, Aurora supports materialized views"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://dbdb.io/db/aurora",children:"https://dbdb.io/db/aurora"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://aws.amazon.com/rds/aurora/faqs",children:"https://aws.amazon.com/rds/aurora/faqs"})}),"\n",(0,t.jsx)(a.h2,{id:"questions",children:"Questions"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Since storage is shared how will delete in reader work?"}),"\n",(0,t.jsx)(a.li,{children:"Can you write in aurora reader"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"others",children:"Others"}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://medium.com/awesome-cloud/aws-difference-between-amazon-aurora-and-amazon-rds-comparison-aws-aurora-vs-aws-rds-databases-60a69dbec41f",children:"AWS \u2014 Difference between Amazon Aurora and Amazon RDS | by Ashish Patel | Awesome Cloud | Medium"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://www.percona.com/blog/when-should-i-use-amazon-aurora-and-when-should-i-use-rds-mysql/",children:"Aurora vs RDS: How to Choose the Right AWS Database Solution"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/DBActivityStreams.Overview.html",children:"Overview of Database Activity Streams - Amazon Aurora"})}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://youtu.be/DA5W8tO_7Nw",children:"What the heck is Storage-Compute Separation? | Aurora Paper Deep Dive - Section 1 - YouTube"})})]})}function c(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},728638:(e,a,r)=>{r.d(a,{A:()=>s});const s=r.p+"assets/images/AWS-Aurora-image1-465189ebe244f641a224ab82de03500e.jpg"},28453:(e,a,r)=>{r.d(a,{R:()=>i,x:()=>n});var s=r(296540);const t={},o=s.createContext(t);function i(e){const a=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function n(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(o.Provider,{value:a},e.children)}}}]);