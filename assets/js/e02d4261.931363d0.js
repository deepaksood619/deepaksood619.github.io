"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[72263],{40124:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>l,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"devops/kubernetes/concepts-and-overview/configuration/readme","title":"Configuration","description":"- Configuration Best Practices","source":"@site/docs/devops/kubernetes/concepts-and-overview/configuration/readme.md","sourceDirName":"devops/kubernetes/concepts-and-overview/configuration","slug":"/devops/kubernetes/concepts-and-overview/configuration/","permalink":"/devops/kubernetes/concepts-and-overview/configuration/","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/kubernetes/concepts-and-overview/configuration/readme.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1701793554000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Concepts & Overview","permalink":"/devops/kubernetes/concepts-and-overview/"},"next":{"title":"Secrets","permalink":"/devops/kubernetes/concepts-and-overview/configuration/secrets"}}');var s=o(474848),t=o(28453);const r={},c="Configuration",a={},d=[{value:"Assigning pods to nodes",id:"assigning-pods-to-nodes",level:2},{value:"Taints and Tolerations",id:"taints-and-tolerations",level:2},{value:"Pods Priority and Preemption",id:"pods-priority-and-preemption",level:2},{value:"Configmaps",id:"configmaps",level:2},{value:"Secrets vs ConfigMaps",id:"secrets-vs-configmaps",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/overview/",children:"Configuration Best Practices"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/configmap/",children:"ConfigMaps"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/secret/",children:"Secrets"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/",children:"Managing Resources for Containers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-overhead/",children:"Pod Overhead"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/resource-bin-packing/",children:"Resource Bin Packing for Extended Resources"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/",children:"Organizing Cluster Access Using kubeconfig Files"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/",children:"Pod Priority and Preemption"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"assigning-pods-to-nodes",children:"Assigning pods to nodes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector",children:"nodeSelector"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#built-in-node-labels",children:"Interlude: built-in node labels"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#node-isolation-restriction",children:"Node isolation/restriction"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity",children:"Affinity and anti-affinity"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node",children:"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: with-node-affinity\nspec:\n  affinity:\n    nodeAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        nodeSelectorTerms:\n        - matchExpressions:\n          - key: kubernetes.io/e2e-az-name\n            operator: In\n            values:\n            - e2e-az1\n            - e2e-az2\n      preferredDuringSchedulingIgnoredDuringExecution:\n      - weight: 1\n        preference:\n          matchExpressions:\n          - key: another-node-label-key\n            operator: In\n            values:\n            - another-node-label-value\n  containers:\n  - name: with-node-affinity\n    image: k8s.gcr.io/pause:2.0\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodename",children:"nodeName"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node",children:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node"})}),"\n",(0,s.jsx)(n.h2,{id:"taints-and-tolerations",children:"Taints and Tolerations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/#taint-based-evictions",children:"Taint based Evictions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/#taint-nodes-by-condition",children:"Taint Nodes by Condition"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/taint-and-toleration",children:"https://kubernetes.io/docs/concepts/configuration/taint-and-toleration"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/aks/operator-best-practices-advanced-scheduler#provide-dedicated-nodes-using-taints-and-tolerations",children:"https://docs.microsoft.com/en-us/azure/aks/operator-best-practices-advanced-scheduler#provide-dedicated-nodes-using-taints-and-tolerations"})}),"\n",(0,s.jsx)(n.p,{children:"Node affinity is a property of Pods that attracts them to a set of nodes (either as a preference or a hard requirement). Taints are theopposite --they allow a node to repel a set of pods. Tolerations are applied to pods, and allow (but do not require) the pods to schedule onto nodes with matching taints."}),"\n",(0,s.jsx)(n.h2,{id:"pods-priority-and-preemption",children:"Pods Priority and Preemption"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#how-to-use-priority-and-preemption",children:"How to use priority and preemption"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#how-to-disable-preemption",children:"How to disable preemption"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass",children:"PriorityClass"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#pod-priority",children:"Pod priority"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#preemption",children:"Preemption"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#debugging-pod-priority-and-preemption",children:"Debugging Pod Priority and Preemption"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#interactions-of-pod-priority-and-qos",children:"Interactions of Pod priority and QoS"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption",children:"https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption"})}),"\n",(0,s.jsx)(n.h2,{id:"configmaps",children:"Configmaps"}),"\n",(0,s.jsxs)(n.p,{children:["A ConfigMap is an API object used to store non-confidential data in key-value pairs.",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/",children:"Pods"})," can consume ConfigMaps as environment variables, command-line arguments, or as configuration files in a ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/storage/volumes/",children:"volume"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["A ConfigMap allows you to decouple environment-specific configuration from your ",(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/glossary/?all=true#term-image",children:"container images"}),", so that your applications are easily portable."]}),"\n",(0,s.jsx)(n.p,{children:"ConfigMaps can be consumed in various ways:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Pod environmental variables from single or multiple ConfigMaps"}),"\n",(0,s.jsx)(n.li,{children:"Use ConfigMap values in Pod commands"}),"\n",(0,s.jsx)(n.li,{children:"Populate Volume from ConfigMap"}),"\n",(0,s.jsx)(n.li,{children:"Add ConfigMap data to specific path in Volume"}),"\n",(0,s.jsx)(n.li,{children:"Set file names and access mode in Volume from ConfigMap data"}),"\n",(0,s.jsx)(n.li,{children:"Can be used by system components and controllers"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Like secrets, you can use ConfigMaps as environment variablesor using a volume mount. Theymust exist prior to being used by a Pod, unless marked asoptional. They also reside in a specific namespace."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"env:\n- name: SPECIAL_LEVEL_KEY\n   valueFrom:\n      configMapKeyRef:\n      name: special-config\n      key: special.how\n"})}),"\n",(0,s.jsx)(n.p,{children:"With volumes, youdefine a volume with theconfigMaptype in your podand mount it where it needs to be used."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"volumes:\n- name: config-volume\n   configMap:\n    name: special-config\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/configmap",children:"https://kubernetes.io/docs/concepts/configuration/configmap"})}),"\n",(0,s.jsx)(n.h2,{id:"secrets-vs-configmaps",children:"Secrets vs ConfigMaps"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Use secrets for things which are actually secret like API keys, credentials, etc"}),"\n",(0,s.jsx)(n.li,{children:"Use config map for not-secret configuration data"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"In the future there will likely be some differentiators for secrets like rotation or support for backing the secret API w/ HSMs, etc. In general we like intent-based APIs, and the intent is definitely different for secret data vs. plain old configs."})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>c});var i=o(296540);const s={},t=i.createContext(s);function r(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);