"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[77429],{824030:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>r});var l=i(785893),d=i(511151);const t={},s="Models",o={id:"python/django/models",title:"Models",description:"A model is the single, definitive source of information about your data. It contains the essential fields and behaviors of the data you're storing. Generally, each model maps to a single database table.",source:"@site/docs/python/django/models.md",sourceDirName:"python/django",slug:"/python/django/models",permalink:"/python/django/models",draft:!1,unlisted:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/python/django/models.md",tags:[],version:"current",lastUpdatedAt:1719081324,formattedLastUpdatedAt:"Jun 22, 2024",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Logging",permalink:"/python/django/logging"},next:{title:"Other Topics",permalink:"/python/django/other-topics"}},a={},r=[{value:"Field types",id:"field-types",level:2},{value:"Common field arguments",id:"common-field-arguments",level:2},{value:"Common field types",id:"common-field-types",level:2},{value:"Relationship fields",id:"relationship-fields",level:2},{value:"Metadata",id:"metadata",level:2},{value:"Singleton model in Django",id:"singleton-model-in-django",level:2},{value:"Exception Handling",id:"exception-handling",level:2},{value:"Django Models",id:"django-models",level:2},{value:"Ordering",id:"ordering",level:2},{value:"Indexing",id:"indexing",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"models",children:"Models"}),"\n",(0,l.jsx)(n.p,{children:"A model is the single, definitive source of information about your data. It contains the essential fields and behaviors of the data you're storing. Generally, each model maps to a single database table."}),"\n",(0,l.jsx)(n.p,{children:"The basics:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Each model is a Python class that subclasses ",(0,l.jsx)(n.a,{href:"https://docs.djangoproject.com/en/1.11/ref/models/instances/#django.db.models.Model",children:(0,l.jsx)(n.strong,{children:"django.db.models.Model"})}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Each attribute of the model represents a database field."}),"\n",(0,l.jsx)(n.li,{children:"With all of this, Django gives you an automatically-generated database-access API"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from django.db import models\nclass Person(models.Model):\n    first_name = models.CharField(max_length=30)\n    last_name = models.CharField(max_length=30)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["The name of the table, ",(0,l.jsx)(n.strong,{children:"myapp_person"}),", is automatically derived from some model metadata but can be overridden."]}),"\n",(0,l.jsxs)(n.li,{children:["An ",(0,l.jsx)(n.strong,{children:"id"})," field is added automatically, but this behavior can be overridden."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"field-types",children:"Field types"}),"\n",(0,l.jsxs)(n.p,{children:["Each field in your model should be an instance of the appropriate ",(0,l.jsx)(n.a,{href:"https://docs.djangoproject.com/en/1.11/ref/models/fields/#django.db.models.Field",children:(0,l.jsx)(n.strong,{children:"Field"})})," class. Django uses the field class types to determine a few things:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["The column type, which tells the database what kind of data to store (e.g.",(0,l.jsx)(n.strong,{children:"INTEGER"}),", ",(0,l.jsx)(n.strong,{children:"VARCHAR"}),", ",(0,l.jsx)(n.strong,{children:"TEXT"}),")."]}),"\n",(0,l.jsxs)(n.li,{children:["The default HTML ",(0,l.jsx)(n.a,{href:"https://docs.djangoproject.com/en/1.11/ref/forms/widgets/",children:"widget"})," to use when rendering a form field (e.g.",(0,l.jsx)(n.code,{children:'<inputtype="text">'}),", ",(0,l.jsx)(n.code,{children:"<select>"}),")."]}),"\n",(0,l.jsx)(n.li,{children:"The minimal validation requirements, used in Django's admin and in automatically-generated forms."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"common-field-arguments",children:"Common field arguments"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://docs.djangoproject.com/en/2.0/ref/models/fields/#field-options",children:"https://docs.djangoproject.com/en/2.0/ref/models/fields/#field-options"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"null"}),"\n",(0,l.jsx)(n.li,{children:"blank"}),"\n",(0,l.jsx)(n.li,{children:"choices"}),"\n",(0,l.jsx)(n.li,{children:"db_column"}),"\n",(0,l.jsx)(n.li,{children:"db_index"}),"\n",(0,l.jsx)(n.li,{children:"db_tablespace"}),"\n",(0,l.jsx)(n.li,{children:"default"}),"\n",(0,l.jsx)(n.li,{children:"Editable"}),"\n",(0,l.jsx)(n.li,{children:"Error_messages"}),"\n",(0,l.jsx)(n.li,{children:"Help_text"}),"\n",(0,l.jsx)(n.li,{children:"Primary_key"}),"\n",(0,l.jsx)(n.li,{children:"Unique"}),"\n",(0,l.jsx)(n.li,{children:"Unique_for_date"}),"\n",(0,l.jsx)(n.li,{children:"Unique_for_month"}),"\n",(0,l.jsx)(n.li,{children:"Unique_for_year"}),"\n",(0,l.jsx)(n.li,{children:"Verbose_name"}),"\n",(0,l.jsx)(n.li,{children:"Validators"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"common-field-types",children:"Common field types"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://docs.djangoproject.com/en/2.0/ref/models/fields/#field-types",children:"https://docs.djangoproject.com/en/2.0/ref/models/fields/#field-types"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Char field"}),"\n",(0,l.jsx)(n.li,{children:"Text field"}),"\n",(0,l.jsx)(n.li,{children:"Integer field"}),"\n",(0,l.jsx)(n.li,{children:"Date field and DateTime field"}),"\n",(0,l.jsx)(n.li,{children:"EmailField"}),"\n",(0,l.jsx)(n.li,{children:"FileField and ImageField"}),"\n",(0,l.jsx)(n.li,{children:"AutoField"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"relationship-fields",children:"Relationship fields"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://docs.djangoproject.com/en/2.0/ref/models/fields/#module-django.db.models.fields.related",children:"https://docs.djangoproject.com/en/2.0/ref/models/fields/#module-django.db.models.fields.related"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"ForeignKey"}),"\n",(0,l.jsx)(n.li,{children:"ManyToManyField"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Use the add() method on the field to add a record to the relation. Including multiple arguments in the call to add() will add multiple records to a ManyToManyField"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"OneToOneField"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"metadata",children:"Metadata"}),"\n",(0,l.jsx)(n.p,{children:"You can declare model-level metadata for your Model by declaringclass Meta, as shown."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'class Meta:\n    ordering = ["-my_field_name"]\n    ...\n'})}),"\n",(0,l.jsxs)(n.p,{children:["One of the most useful features of this metadata is to control the ",(0,l.jsx)(n.em,{children:"default ordering"})," of records returned when you query the model type. You do this by specifying the match order in a list of field names to theorderingattribute, as shown above. The ordering will depend on the type of field (character fields are sorted alphabetically, while date fields are sorted in chronological order). As shown above, you can prefix the field name with a minus symbol (-) to reverse the sorting order."]}),"\n",(0,l.jsx)(n.h2,{id:"singleton-model-in-django",children:"Singleton model in Django"}),"\n",(0,l.jsx)(n.p,{children:"The singleton patternis a design pattern that restricts the instantiation of a class to one object"}),"\n",(0,l.jsx)(n.p,{children:"Sometimes it's useful to have a database table with just one row. A typical example are user-editable settings -- we want to store them with all the other data (in the database), but there's really only one set of settings at any time."}),"\n",(0,l.jsx)(n.p,{children:"This is easily done in Django by making sure we have only one database entry at model instance save. We can also go one step further and ensure we can always load the singleton object, even if that means creating a new (default) one in memory if the database is still empty."}),"\n",(0,l.jsx)(n.h2,{id:"exception-handling",children:"Exception Handling"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"ObjectDoesNotExists\n    from django.core.exceptions import ObjectDoesNotExist\n    try:\n        user = ZenatixUser.objects.get(email='deepak.sood@zenatix.com')\n    except ObjectDoesNotExist:\n        print('user not found')\n"})}),"\n",(0,l.jsx)(n.h2,{id:"django-models",children:"Django Models"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Proxy Model"}),"\n",(0,l.jsx)(n.li,{children:"Abstract Model (for just creating a parent class for code reuse, table is not created in database)"}),"\n",(0,l.jsx)(n.li,{children:"Multi-table inheritance"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"ordering",children:"Ordering"}),"\n",(0,l.jsx)(n.p,{children:"Add meta in the object Model"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"class Meta:\n    ordering=('device__owner__client_name','issue__display_name')\n"})}),"\n",(0,l.jsx)(n.h2,{id:"indexing",children:"Indexing"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://realpython.com/create-django-index-without-downtime/",children:"How to Create an Index in Django Without Downtime \u2013 Real Python"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://docs.djangoproject.com/en/5.0/ref/models/indexes/",children:"Model index reference | Django documentation | Django"})})]})}function h(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},511151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>s});var l=i(667294);const d={},t=l.createContext(d);function s(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);