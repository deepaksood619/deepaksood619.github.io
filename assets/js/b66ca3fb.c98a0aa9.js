"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[44386],{476387:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"databases-sql/postgres/indexes","title":"Indexes in Postgres","description":"PostgreSQL 16: Chapter 11. Indexes","source":"@site/docs/databases-sql/postgres/indexes.md","sourceDirName":"databases-sql/postgres","slug":"/databases-sql/postgres/indexes","permalink":"/databases-sql/postgres/indexes","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases-sql/postgres/indexes.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1757661758000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Documentation","permalink":"/databases-sql/postgres/documentation"},"next":{"title":"Intro","permalink":"/databases-sql/postgres/intro"}}');var r=n(474848),i=n(28453);const a={},o="Indexes in Postgres",d={},l=[{value:"Types",id:"types",level:2},{value:"B-tree indexes",id:"b-tree-indexes",level:3},{value:"Hash Indexes",id:"hash-indexes",level:3},{value:"B-tree vs Hash Indexes",id:"b-tree-vs-hash-indexes",level:4},{value:"Hash Index Characteristics",id:"hash-index-characteristics",level:4},{value:"BRIN indexes",id:"brin-indexes",level:3},{value:"Bloom filter index",id:"bloom-filter-index",level:3},{value:"GIN and GiST indexes (Generalized Inverted Index)",id:"gin-and-gist-indexes-generalized-inverted-index",level:3},{value:"SP-GiST",id:"sp-gist",level:3},{value:"Partial Indexes",id:"partial-indexes",level:2}];function h(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"indexes-in-postgres",children:"Indexes in Postgres"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/indexes.html",children:"PostgreSQL: Documentation: 16: Chapter 11. Indexes"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://frontendmasters.com/blog/intro-to-postgres-indexes/",children:"Introduction to Postgres Indexes \u2013 Frontend Masters Blog"})}),"\n",(0,r.jsx)(s.h2,{id:"types",children:"Types"}),"\n",(0,r.jsx)(s.h3,{id:"b-tree-indexes",children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/btree-intro.html",children:"B-tree indexes"})}),"\n",(0,r.jsxs)(s.p,{children:["B-tree indexes are binary trees that are used to sort data efficiently. They're the default if you use the INDEX command. Most of the time, a B-tree index suffices. As you scale, inconsistencies can be a larger problem, so use the ",(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/11/amcheck.html",children:"amcheck"})," extension periodically."]}),"\n",(0,r.jsx)(s.h3,{id:"hash-indexes",children:"Hash Indexes"}),"\n",(0,r.jsx)(s.p,{children:"Hash indexes store a 32-bit hash code derived from the value of the indexed column. Hence, such indexes can only handle simple equality comparisons. The query planner will consider using a hash index whenever an indexed column is involved in a comparison using the equal operator"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/indexes-types.html#INDEXES-TYPES-HASH",children:"PostgreSQL: Documentation: 16: 11.2. Index Types"})}),"\n",(0,r.jsx)(s.h4,{id:"b-tree-vs-hash-indexes",children:"B-tree vs Hash Indexes"}),"\n",(0,r.jsxs)(s.p,{children:["A B-tree index can be used for column comparisons in expressions that use the =, ",(0,r.jsx)(s.code,{children:">"}),", ",(0,r.jsx)(s.code,{children:">="}),", ",(0,r.jsx)(s.code,{children:"<="}),", ",(0,r.jsx)(s.code,{children:"<"}),", or BETWEEN operators. The index also can be used for ",(0,r.jsx)(s.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_like",children:(0,r.jsx)(s.code,{children:"LIKE"})})," comparisons if the argument to ",(0,r.jsx)(s.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_like",children:(0,r.jsx)(s.code,{children:"LIKE"})})," is a constant string that does not start with a wildcard character."]}),"\n",(0,r.jsx)(s.h4,{id:"hash-index-characteristics",children:"Hash Index Characteristics"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["They are used only for equality comparisons that use the = or ",(0,r.jsx)(s.code,{children:"<=>"})," operators (but are ",(0,r.jsx)(s.em,{children:"very"})," fast). They are not used for comparison operators such as ",(0,r.jsx)(s.code,{children:"<"}),' that find a range of values. Systems that rely on this type of single-value lookup are known as "key-value stores"; to use MySQL for such applications, use hash indexes wherever possible.']}),"\n",(0,r.jsxs)(s.li,{children:["The optimizer cannot use a hash index to speed up ",(0,r.jsx)(s.code,{children:"ORDER BY"})," operations. (This type of index cannot be used to search for the next entry in order.)"]}),"\n",(0,r.jsxs)(s.li,{children:["MySQL cannot determine approximately how many rows there are between two values (this is used by the range optimizer to decide which index to use). This may affect some queries if you change a ",(0,r.jsx)(s.code,{children:"MyISAM"})," or ",(0,r.jsx)(s.code,{children:"InnoDB"})," table to a hash-indexed ",(0,r.jsx)(s.code,{children:"MEMORY"})," table."]}),"\n",(0,r.jsx)(s.li,{children:"Only whole keys can be used to search for a row. (With a B-tree index, any leftmost prefix of the key can be used to find rows.)"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/index-btree-hash.html",children:"8.3.9 Comparison of B-Tree and Hash Indexes"})}),"\n",(0,r.jsx)(s.h3,{id:"brin-indexes",children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/11/brin-intro.html",children:"BRIN indexes"})}),"\n",(0,r.jsx)(s.p,{children:"A Block Range INdex (BRIN) can be used when your table is naturally already sorted by a column, and you need to sort by that column. For example, for a log table that was written sequentially, setting a BRIN index on the timestamp column lets the server know that the data is already sorted."}),"\n",(0,r.jsxs)(s.p,{children:["BRIN works in terms of ",(0,r.jsx)(s.em,{children:"block ranges"}),' (or "page ranges"). A block range is a group of pages that are physically adjacent in the table; for each block range, some summary info is stored by the index. For example, a table storing a store\'s sale orders might have a date column on which each order was placed, and most of the time the entries for earlier orders will appear earlier in the table as well; a table storing a ZIP code column might have all codes for a city grouped together naturally.']}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/brin-intro.html",children:"PostgreSQL: Documentation: 16: 71.1. Introduction"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://medium.com/geekculture/postgres-brin-index-large-data-performance-with-minimal-storage-4db6b9f64ca4",children:"Postgres BRIN Index - Large Data Performance With Minimal Storage | by Eresh Gorantla | Geek Culture | Medium"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Block_Range_Index",children:"Block Range Index - Wikipedia"})}),"\n",(0,r.jsx)(s.h3,{id:"bloom-filter-index",children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/11/bloom.html",children:"Bloom filter index"})}),"\n",(0,r.jsx)(s.p,{children:"A bloom index is perfect for multi-column queries on big tables where you only need to test for equality. It uses a special mathematical structure called a bloom filter that's based on probability and uses significantly less space."}),"\n",(0,r.jsxs)(s.h3,{id:"gin-and-gist-indexes-generalized-inverted-index",children:[(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/11/textsearch-indexes.html",children:"GIN and GiST indexes"})," (Generalized Inverted Index)"]}),"\n",(0,r.jsx)(s.p,{children:"Use a GIN or GiST index for efficient indexes based on composite values like text, arrays, and JSON."}),"\n",(0,r.jsx)(s.p,{children:"A Generalized Inverted Index (GIN) is a type of index that stores mappings from values in a column to the rows that contain those values. GIN indexes are used to speed up searches for specific elements within composite values, such as arrays, JSONB documents, and full-text search vectors."}),"\n",(0,r.jsx)(s.p,{children:"There are two kinds of indexes that can be used to speed up full text searches. Note that indexes are not mandatory for full text searching, but in cases where a column is searched on a regular basis, an index is usually desirable."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- Creates a GiST (Generalized Search Tree)-based index. The column can be of tsvector or tsquery type.\nCREATE INDEX name ON table USING gist(column);\n\n-- Creates a GIN (Generalized Inverted Index)-based index. The column must be of tsvector type.\nCREATE INDEX name ON table USING gin(column);\n"})}),"\n",(0,r.jsxs)(s.p,{children:["A GiST index is ",(0,r.jsx)(s.em,{children:"lossy"}),", meaning that the index may produce false matches, and it is necessary to check the actual table row to eliminate such false matches."]}),"\n",(0,r.jsx)(s.p,{children:"GIN indexes are not lossy for standard queries, but their performance depends logarithmically on the number of unique words."}),"\n",(0,r.jsx)(s.p,{children:"Performance"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"GIN index lookups are about three times faster than GiST"}),"\n",(0,r.jsx)(s.li,{children:"GIN indexes take about three times longer to build than GiST"}),"\n",(0,r.jsx)(s.li,{children:"GIN indexes are moderately slower to update than GiST indexes, but about 10 times slower if fast-update support was disabled."}),"\n",(0,r.jsx)(s.li,{children:"GIN indexes are two-to-three times larger than GiST indexes"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://habr.com/en/company/postgrespro/blog/448746",children:"https://habr.com/en/company/postgrespro/blog/448746"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/gin.html",children:"PostgreSQL: Documentation: 17: 64.4. GIN Indexes"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/9.1/textsearch-indexes.html",children:"PostgreSQL: Documentation: 9.1: GiST and GIN Index Types"})}),"\n",(0,r.jsx)(s.h3,{id:"sp-gist",children:"SP-GiST"}),"\n",(0,r.jsx)(s.p,{children:"SP-GiST indexes, like GiST indexes, offer an infrastructure that supports various kinds of searches. SP-GiST permits implementation of a wide range of different non-balanced disk-based data structures, such as quadtrees, k-d trees, and radix trees (tries)."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/indexes-types.html#INDEXES-TYPE-SPGIST",children:"PostgreSQL: Documentation: 16: 11.2. Index Types"})}),"\n",(0,r.jsx)(s.h2,{id:"partial-indexes",children:"Partial Indexes"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.em,{children:"partial index"})," is an index built over a subset of a table; the subset is defined by a conditional expression (called the ",(0,r.jsx)(s.em,{children:"predicate"})," of the partial index). The index contains entries only for those table rows that satisfy the predicate."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/indexes-partial.html",children:"PostgreSQL: Documentation: 16: 11.8. Partial Indexes"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.geeksforgeeks.org/postgresql-partial-index/",children:"PostgreSQL - Partial Index - GeeksforGeeks"})})]})}function c(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var t=n(296540);const r={},i=t.createContext(r);function a(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);