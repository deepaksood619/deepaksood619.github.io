"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[26865],{817564:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>i});const n=JSON.parse('{"id":"databases-sql/mysql/percona-toolkit","title":"Percona Toolkit","description":"- Verify MySQL replication integrity by checking source and replica data consistency","source":"@site/docs/databases-sql/mysql/percona-toolkit.md","sourceDirName":"databases-sql/mysql","slug":"/databases-sql/mysql/percona-toolkit","permalink":"/databases-sql/mysql/percona-toolkit","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases-sql/mysql/percona-toolkit.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1749575438000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Partitioning","permalink":"/databases-sql/mysql/partitioning"},"next":{"title":"Percona XtraBackup","permalink":"/databases-sql/mysql/percona-xtrabackup"}}');var r=o(474848),c=o(28453);const l={},a="Percona Toolkit",s={},i=[{value:"Alternative",id:"alternative",level:2}];function p(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"percona-toolkit",children:"Percona Toolkit"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Verify MySQL replication integrity by checking source and replica data consistency"}),"\n",(0,r.jsx)(t.li,{children:"Efficiently archive rows"}),"\n",(0,r.jsx)(t.li,{children:"Find duplicate indexes"}),"\n",(0,r.jsx)(t.li,{children:"Summarize MySQL and MongoDB servers"}),"\n",(0,r.jsx)(t.li,{children:"Analyze MySQL queries from logs and tcpdump"}),"\n",(0,r.jsx)(t.li,{children:"Analyze MongoDB query profiler"}),"\n",(0,r.jsx)(t.li,{children:"Collect vital system information when problems occur"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"sudo apt-get install percona-toolkit\n\nbrew install percona-toolkit\n"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-align.html",children:"pt-align"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-archiver.html",children:"pt-archiver"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-config-diff.html",children:"pt-config-diff"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-diskstats.html",children:"pt-diskstats"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-duplicate-key-checker.html",children:"pt-duplicate-key-checker"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-fifo-split.html",children:"pt-fifo-split"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-find.html",children:"pt-find"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-fingerprint.html",children:"pt-fingerprint"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-fk-error-logger.html",children:"pt-fk-error-logger"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-heartbeat.html",children:"pt-heartbeat"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-index-usage.html",children:(0,r.jsx)(t.strong,{children:"pt-index-usage"})})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Read queries from a log and analyze how they use indexes."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-align.html",children:"pt-align"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-archiver.html",children:"pt-archiver"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-config-diff.html",children:"pt-config-diff"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-deadlock-logger.html",children:(0,r.jsx)(t.strong,{children:"pt-deadlock-logger"})})}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["pt-deadlock-loggerprints information about MySQL deadlocks by polling and parsingSHOWENGINEINNODBSTATUS. When a new deadlock occurs, it's printed toSTDOUTand, if specified, saved to ",(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-deadlock-logger.html#cmdoption-pt-deadlock-logger-dest",children:"--dest"})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"pt-deadlock-logger -host sttash-main-db-instance-new-cluster.cluster-ro-c1z93jsyca9u.ap-south-1.rds.amazonaws.com --user lms-website --password Rf9zdHwB9E3GHWKq2yZM- [pt-diskstats](https://www.percona.com/doc/percona-toolkit/LATEST/pt-diskstats.html)"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-duplicate-key-checker.html",children:"pt-duplicate-key-checker"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"pt-duplicate-key-checker -host sttash-main-db-instance-new-cluster.cluster-ro-c1z93jsyca9u.ap-south-1.rds.amazonaws.com --user lms-website --password Rf9zdHwB9E3GHWKq2yZM"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-fifo-split.html",children:"pt-fifo-split"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-find.html",children:"pt-find"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-fingerprint.html",children:"pt-fingerprint"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-fk-error-logger.html",children:"pt-fk-error-logger"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-heartbeat.html",children:"pt-heartbeat"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-index-usage.html",children:"pt-index-usage"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-ioprofile.html",children:"pt-ioprofile"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-kill.html",children:"pt-kill"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-mext.html",children:"pt-mext"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-mongodb-query-digest.html",children:"pt-mongodb-query-digest"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-mongodb-summary.html",children:"pt-mongodb-summary"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-mysql-summary.html",children:"pt-mysql-summary"})}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://docs.percona.com/percona-toolkit/pt-online-schema-change.html",children:"pt-online-schema-change \u2014 Percona Toolkit Documentation"})," (pt-osc)"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"pt-mysql-summary --host localhost --user root --ask-pass > mysql-summary.txt\n\npt-mysql-summary --host sttash-main-db-instance-new-cluster.cluster-ro-c1z93jsyca9u.ap-south-1.rds.amazonaws.com --user user --password password > mysql-summary.txt- [pt-online-schema-change](https://www.percona.com/doc/percona-toolkit/LATEST/pt-online-schema-change.html)\n\npt-online-schema-change --host dailydb.snapshot.example.com --user user_abc --password xyzabc123 --alter='ENGINE=InnoDB' D=db_name, t=table_name --preserve-triggers --dry-run\n"})}),"\n",(0,r.jsx)(t.p,{children:"Works by creating an empty copy of the table to alter, modifying it as desired, and then copying rows from the original table into the new table. When the copy is complete, it moves away the original table and replaces it with the new one. By default, it also drops the original table."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://dev.mysql.com/doc/refman/5.7/en/innodb-online-ddl-operations.html",children:"https://dev.mysql.com/doc/refman/5.7/en/innodb-online-ddl-operations.html"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/3.0/pt-online-schema-change.html-",children:"https://www.percona.com/doc/percona-toolkit/3.0/pt-online-schema-change.html-"})," ",(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-pmp.html",children:"pt-pmp"})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://medium.com/@gauraangkhurana/percona-pt-online-schema-change-performance-1def5866b43",children:"Percona pt-online-schema-change Performance | by Gauraang Khurana | Medium"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-query-digest.html",children:"pt-query-digest"})," - Analyze MySQL queries from logs, processlist, and tcpdump."]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-secure-collect.html",children:"pt-secure-collect"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-show-grants.html",children:"pt-show-grants"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-sift.html",children:"pt-sift"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-slave-delay.html",children:"pt-slave-delay"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-slave-find.html",children:"pt-slave-find"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-slave-restart.html",children:"pt-slave-restart"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-stalk.html",children:"pt-stalk"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-summary.html",children:"pt-summary"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-table-checksum.html",children:"pt-table-checksum"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-table-sync.html",children:"pt-table-sync"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-table-usage.html",children:"pt-table-usage"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-upgrade.html",children:"pt-upgrade"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-variable-advisor.html",children:"pt-variable-advisor"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-visual-explain.html",children:"pt-visual-explain"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-slave-find.html",children:"pt-slave-find"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-slave-restart.html",children:"pt-slave-restart"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-stalk.html",children:"pt-stalk"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-summary.html",children:"pt-summary"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-table-checksum.html",children:"pt-table-checksum"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-table-sync.html",children:"pt-table-sync"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-table-usage.html",children:"pt-table-usage"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-upgrade.html",children:"pt-upgrade"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-variable-advisor.html",children:"pt-variable-advisor"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/doc/percona-toolkit/LATEST/pt-visual-explain.html",children:"pt-visual-explain"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://www.percona.com/software/database-tools/percona-toolkit",children:"https://www.percona.com/software/database-tools/percona-toolkit"})}),"\n",(0,r.jsx)(t.h2,{id:"alternative",children:"Alternative"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/databases-sql/mysql/gh-ost",children:"gh-ost"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>l,x:()=>a});var n=o(296540);const r={},c=n.createContext(r);function l(e){const t=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(c.Provider,{value:t},e.children)}}}]);