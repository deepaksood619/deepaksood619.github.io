"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[92108],{506168:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"devops/docker/docker-compose","title":"docker-compose","description":"Commands","source":"@site/docs/devops/docker/docker-compose.md","sourceDirName":"devops/docker","slug":"/devops/docker/docker-compose","permalink":"/devops/docker/docker-compose","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/docker/docker-compose.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1732180496000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"docker-compose example","permalink":"/devops/docker/docker-compose-example"},"next":{"title":"Dockerfile example","permalink":"/devops/docker/dockerfile-example"}}');var i=o(474848),r=o(28453);const c={},t="docker-compose",l={},d=[{value:"Commands",id:"commands",level:2},{value:"Installation",id:"installation",level:3},{value:"Usage",id:"usage",level:3},{value:"Options",id:"options",level:3},{value:"Commands",id:"commands-1",level:3},{value:"Environment file priority",id:"environment-file-priority",level:2},{value:"Updates",id:"updates",level:2},{value:"Tips",id:"tips",level:2},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"docker-compose",children:"docker-compose"})}),"\n",(0,i.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,i.jsx)(n.p,{children:"Define and run multi-container applications with Docker."}),"\n",(0,i.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"brew install docker-compose\n\nsudo apt install docker-compose\n"})}),"\n",(0,i.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose [-f <arg>...] [options] [COMMAND] [ARGS...]\ndocker-compose -h|--help\n"})}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"-f, --file FILE             Specify an alternate compose file\n                            (default: docker-compose.yml)\n-p, --project-name NAME     Specify an alternate project name\n                            (default: directory name)\n--verbose                   Show more output\n--log-level LEVEL           Set log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)\n--no-ansi                   Do not print ANSI control characters\n-v, --version               Print version and exit\n-H, --host HOST             Daemon socket to connect to\n--tls                       Use TLS; implied by --tlsverify\n--tlscacert CA_PATH         Trust certs signed only by this CA\n--tlscert CLIENT_CERT_PATH  Path to TLS certificate file\n--tlskey TLS_KEY_PATH       Path to TLS key file\n--tlsverify                 Use TLS and verify the remote\n--skip-hostname-check       Don't check the daemon's hostname against the\n                            name specified in the client certificate\n--project-directory PATH    Specify an alternate working directory\n                            (default: the path of the Compose file)\n--compatibility             If set, Compose will attempt to convert deploy\n                            keys in v3 files to their non-Swarm equivalent\n"})}),"\n",(0,i.jsx)(n.h3,{id:"commands-1",children:"Commands"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"build              Build or rebuild services\n    docker-compose up --build kafka-consumer\n    docker-compose up --no-build zenalytix-dev\n  bundle             Generate a Docker bundle from the Compose file\nconfig             Validate and view the Compose file\n    docker-compose config | less\n  create             Create services\ndown               Stop and remove containers, networks, images, and volumes\nevents             Receive real time events from containers\nexec               Execute a command in a running container\nhelp               Get help on a command\nimages             List images\nkill               Kill containers\nlogs               View output from containers\n    docker-compose logs\n    docker-compose logs --tail 10 --follow\n    ^S and ^Q to pause/resume log output\n  pause              Pause services\nport               Print the public port for a port binding\nps                 List containers\npull               Pull service images\npush               Push service images\nrestart            Restart services\n    Restarts all stopped and running services.\n    Usage: restart [options] [SERVICE...]\n  rm                 Remove stopped containers\nrun                Run a one-off command\nscale              Set number of containers for a service\nstart              Start services\nstop               Stop services\n    docker-compose stop <service_name>\ntop                Display the running processes\nunpause            Unpause services\nup                 Create and start containers\nversion            Show the Docker-Compose version information\n"})}),"\n",(0,i.jsx)(n.h2,{id:"environment-file-priority",children:"Environment file priority"}),"\n",(0,i.jsx)(n.p,{children:"When you set the same environment variable in multiple files, here's the priority used by Compose to choose which value to use:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Compose file"}),"\n",(0,i.jsx)(n.li,{children:"Shell environment variables"}),"\n",(0,i.jsx)(n.li,{children:"Environment file"}),"\n",(0,i.jsx)(n.li,{children:"Dockerfile"}),"\n",(0,i.jsx)(n.li,{children:"Variable is not defined"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.strong,{children:".env"})," file is present in the folder docker-compose command is executed, those environment variables are used as environment variables for ",(0,i.jsx)(n.strong,{children:"docker-compose execution and variable substitution."})]}),"\n",(0,i.jsxs)(n.p,{children:["However when you define ",(0,i.jsx)(n.strong,{children:"env_file"})," option to your service, the service will get those variables from the file as ",(0,i.jsx)(n.strong,{children:"environment variables"})," and those are not used for variable substitution."]}),"\n",(0,i.jsx)(n.h2,{id:"updates",children:"Updates"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Version 3"})}),"\n",(0,i.jsxs)(n.p,{children:["Designed to be cross-compatible between Compose and the Docker Engine's ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/engine/swarm/",children:"swarm mode"}),", version 3 removes several options and adds several more."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Removed: volume_driver, volumes_from, cpu_shares, cpu_quota, cpuset, mem_limit, memswap_limit, extends, group_add. See the ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-versioning/#upgrading",children:"upgrading"})," guide for how to migrate away from these. (For more information onextends, see ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/extends/#extending-services",children:"Extending services"}),".)"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Added: ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#deploy",children:"deploy"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Version 3.3"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker Engine version17.06.0+, and higher."}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#build",children:"buildlabels"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#credentialspec",children:"credential_spec"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#configs",children:"configs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#endpointmode",children:"deployendpoint_mode"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Version 3.4"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker Engine version17.09.0and higher."}),"\n",(0,i.jsxs)(n.li,{children:["targetandnetworkin ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#build",children:"build configurations"})]}),"\n",(0,i.jsxs)(n.li,{children:["start_periodfor ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#healthcheck",children:"healthchecks"})]}),"\n",(0,i.jsxs)(n.li,{children:["orderfor ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#update_config",children:"update configurations"})]}),"\n",(0,i.jsxs)(n.li,{children:["namefor ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#volume-configuration-reference",children:"volumes"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Version 3.5"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker Engine version17.12.0and higher."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-versioning/#isolation",children:"isolation"})," in service definitions"]}),"\n",(0,i.jsx)(n.li,{children:"namefor networks, secrets and configs"}),"\n",(0,i.jsxs)(n.li,{children:["shm_sizein ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-versioning/#build",children:"build configurations"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Version 3.6"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker Engine version18.02.0and higher."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-versioning/#long-syntax-3",children:"tmpfssize"})," fortmpfs-type mounts"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Version 3.7"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker Engine version18.06.0and higher."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-versioning/#init",children:"init"})," in service definitions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-versioning/#rollback_config",children:"rollback_config"})," in deploy configurations"]}),"\n",(0,i.jsx)(n.li,{children:"Support for extension fields at the root of service, network, volume, secret and config definitions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"tips",children:"Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No variable sustitution for keys in docker-compose"}),"\n",(0,i.jsxs)(n.li,{children:["Can use default and err with variables","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"$VARIABLE:-default evaluates to default if VARIABLE is unset or empty in the environment."}),"\n",(0,i.jsx)(n.li,{children:"$VARIABLE-default evaluates todefaultonly if VARIABLE is unset in the environment."}),"\n",(0,i.jsx)(n.li,{children:"$VARIABLE:?err exits with an error message containing err if VARIABLE is unset or empty in the environment."}),"\n",(0,i.jsx)(n.li,{children:"$VARIABLE?err exits with an error message containing err if VARIABLE is unset in the environment."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["You can use a ",(0,i.jsx)(n.code,{children:"$$"})," (double-dollar sign) when your configuration needs a literal dollar sign. This also prevents Compose from interpolating a value, so a ",(0,i.jsx)(n.code,{children:"$$"})," allows you to refer to environment variables that you don't want processed by Compose."]}),"\n",(0,i.jsx)(n.li,{children:"Two different docker networks cannot access each other services"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file",children:"https://docs.docker.com/compose/compose-file"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/reference/up",children:"https://docs.docker.com/compose/reference/up"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-versioning",children:"https://docs.docker.com/compose/compose-file/compose-versioning"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>c,x:()=>t});var s=o(296540);const i={},r=s.createContext(i);function c(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);