"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[44235],{650464:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"data-warehouses/snowflake/intro","title":"Intro","description":"Multi-cluster, shared storage architecture","source":"@site/docs/data-warehouses/snowflake/intro.md","sourceDirName":"data-warehouses/snowflake","slug":"/data-warehouses/snowflake/intro","permalink":"/data-warehouses/snowflake/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/data-warehouses/snowflake/intro.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1756323597000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Data Ingestion / Loading","permalink":"/data-warehouses/snowflake/ingestion"},"next":{"title":"Optimizations","permalink":"/data-warehouses/snowflake/optimizations"}}');var s=t(474848),r=t(28453);const a={},o="Intro",l={},d=[{value:"History",id:"history",level:4},{value:"Concurrency Control",id:"concurrency-control",level:4},{value:"Data Model",id:"data-model",level:4},{value:"Foreign Keys",id:"foreign-keys",level:4},{value:"Indexes",id:"indexes",level:4},{value:"Isolation Levels",id:"isolation-levels",level:4},{value:"Joins",id:"joins",level:4},{value:"Query Compilation",id:"query-compilation",level:4},{value:"Query Execution",id:"query-execution",level:4},{value:"Query Interface",id:"query-interface",level:4},{value:"Storage Architecture",id:"storage-architecture",level:4},{value:"Storage Model",id:"storage-model",level:4},{value:"Stored Procedures",id:"stored-procedures",level:4},{value:"System Architecture",id:"system-architecture",level:4},{value:"Views",id:"views",level:4},{value:"Features",id:"features",level:3},{value:"Others",id:"others",level:2},{value:"Links",id:"links",level:2}];function c(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"intro",children:"Intro"})}),"\n",(0,s.jsx)(n.p,{children:"Multi-cluster, shared storage architecture"}),"\n",(0,s.jsx)(n.p,{children:"Snowflake is a cloud-based database and is currently offered as a pay-as-you-go service in AWS, Azure and GCP cloud. It is developed by Snowflake Computing."}),"\n",(0,s.jsx)(n.p,{children:"Snowflake adopts a shared-storage architecture. It uses Amazon S3 for its underlying data storage. It performs query execution within in elastic clusters of virtual machines, called virtual warehouse. The Cloud Service layer stores the collection of services that manage computation clusters, queries, transactions, and all the metadata like database catalogs and access control information in a key-value store (FoundationDB)."}),"\n",(0,s.jsx)(n.h4,{id:"history",children:"History"}),"\n",(0,s.jsx)(n.p,{children:"Implementation of Snowflake began in late 2012 and has been generally available since June 2015."}),"\n",(0,s.jsx)(n.h4,{id:"concurrency-control",children:"Concurrency Control"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?concurrency-control=multi-version-concurrency-control-mvcc",children:"Multi-version Concurrency Control (MVCC)"})}),"\n",(0,s.jsx)(n.p,{children:"Snowflake supports MVCC. As Snowflake's underlying data storage is done by Amazon S3, each write operation instead of performing writes in place, it creates a new entire file including the changes. The stale version of data is replaced by the newly created file, but is not deleted immediately. Snowflake allows users to define how long the stale version will be kept in S3, which is up to 90 days. Based on MVCC, Snowflake also supports time travel query."}),"\n",(0,s.jsx)(n.h4,{id:"data-model",children:"Data Model"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?data-model=relational",children:"Relational"})," ",(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?data-model=document-xml",children:"Document / XML"})]}),"\n",(0,s.jsx)(n.p,{children:"Snowflake is relational as it supports ANSI SQL and ACID transactions. It offers built-in functions and SQL extensions for traversing, flattening, and nesting of semi-structured data, with support for popular formats such as JSON and Avro. When storing semi-structured data, Snowflake can perform automatic type inference to find the most common types and store them using the same compressed columnar format as native relational data. Thus it can accelerate query execution on them."}),"\n",(0,s.jsx)(n.h4,{id:"foreign-keys",children:"Foreign Keys"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?foreign-keys=supported",children:"Supported"})}),"\n",(0,s.jsx)(n.p,{children:"Snowflake supports defining and maintaining constraints, but does not enforce them, except for NOT NULL constraints, which are always enforced including foreign key constraint."}),"\n",(0,s.jsx)(n.p,{children:"Snowflake relies on deferred constraint checking during query execution rather than during data modification, allowing for flexibility in data loading."}),"\n",(0,s.jsx)(n.p,{children:"Snowflake, cannot handle referential integrity because, even though it supports integrity and other constraints, they are not enforced except the NOT NULL constraint that is always enforced. Other constraints than NOT NULL are created as disabled constraints."}),"\n",(0,s.jsx)(n.p,{children:"Snowflake provides the following constraint functionality:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Unique, primary, and foreign keys, and NOT NULL columns."}),"\n",(0,s.jsx)(n.li,{children:"Named constraints."}),"\n",(0,s.jsx)(n.li,{children:"Single-column and multi-column constraints."}),"\n",(0,s.jsx)(n.li,{children:"Creation of constraints inline and out-of-line."}),"\n",(0,s.jsx)(n.li,{children:"Support for creation, modification and deletion of constraints."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.snowflake.com/en/sql-reference/constraints-overview",children:"Overview of Constraints | Snowflake Documentation"})}),"\n",(0,s.jsx)(n.h4,{id:"indexes",children:"Indexes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?indexes=not-supported",children:"Not Supported"})}),"\n",(0,s.jsx)(n.p,{children:"Snowflake does not support index, as maintaining index is expensive due to its architecture. Snowflake uses min-max based pruning, and other techniques to accelerate data access."}),"\n",(0,s.jsx)(n.h4,{id:"isolation-levels",children:"Isolation Levels"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?isolation-levels=snapshot-isolation",children:"Snapshot Isolation"})}),"\n",(0,s.jsx)(n.p,{children:"According to their paper and talk, Snowflake supports Snapshot Isolation. However, according to their documentation, it is said that Read Committed is the only Isolation level that is supported."}),"\n",(0,s.jsx)(n.h4,{id:"joins",children:"Joins"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?joins=hash-join",children:"Hash Join"})}),"\n",(0,s.jsx)(n.h4,{id:"query-compilation",children:"Query Compilation"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?query-compilation=not-supported",children:"Not Supported"})}),"\n",(0,s.jsx)(n.h4,{id:"query-execution",children:"Query Execution"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?query-execution=vectorized-model",children:"Vectorized Model"})}),"\n",(0,s.jsx)(n.p,{children:"Snowflake processes data in pipelined fashion, in batches of a few thousand rows in columnar format. It also uses a push instead of pull model as the relational operators push the intermediate results to their downstream operators."}),"\n",(0,s.jsx)(n.h4,{id:"query-interface",children:"Query Interface"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?query-interface=sql",children:"SQL"})}),"\n",(0,s.jsx)(n.p,{children:"Snowflake's SQL query engine includes an automatic query optimization feature. The query optimizer assesses the query and execution plan, taking into account factors like table statistics, data distribution, and available compute resources. This dynamic optimization process ensures that queries are executed efficiently, leveraging the platform's resources effectively for optimal performance."}),"\n",(0,s.jsx)(n.h4,{id:"storage-architecture",children:"Storage Architecture"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?storage-architecture=disk-oriented",children:"Disk-oriented"})}),"\n",(0,s.jsx)(n.p,{children:"Snowflake's data storage is done via Amazon S3 service. Upon query execution, the responsible work nodes uses HTTP-based interface to read/write data. The worker node also uses its local disk as a cache."}),"\n",(0,s.jsx)(n.h4,{id:"storage-model",children:"Storage Model"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?storage-model=hybrid",children:"Hybrid"})}),"\n",(0,s.jsx)(n.p,{children:"Snowflake horizontally partitions data into large immutable files which are equivalent to blocks or pages in a traditional database system. Within each file, the values of each attribute or column are grouped together and heavily compressed, a well-known scheme called PAX or hybrid columnar. Each table file has a header which, among other metadata, contains the offsets of each column within the file."}),"\n",(0,s.jsx)(n.h4,{id:"stored-procedures",children:"Stored Procedures"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?stored-procedures=not-supported",children:"Not Supported"})}),"\n",(0,s.jsx)(n.h4,{id:"system-architecture",children:"System Architecture"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?system-architecture=shared-disk",children:"Shared-Disk"})}),"\n",(0,s.jsx)(n.p,{children:"It uses Amazon S3 for its underlying data storage. It performs query execution within its elastic clusters of virtual machines, called virtual warehouse. Upon query execution, virtual warehouse use HTTP-based interface to read/write data from S3. The Cloud Service layer stores the collection of services that manage computation clusters, queries, transactions, and all the metadata like database catalogs and access control information, in FoundationDB."}),"\n",(0,s.jsx)(n.p,{children:"Snowflake actually uses a multi-cluster, shared data architecture. The storage and compute layers are separate, and the data is stored in a centralized object store (like Amazon S3). Compute clusters, or virtual warehouses, can access and process this shared data concurrently."}),"\n",(0,s.jsx)(n.h4,{id:"views",children:"Views"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://dbdb.io/browse?views=virtual-views",children:"Virtual Views"})}),"\n",(0,s.jsx)(n.h3,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Multiple Cloud Provider Support"}),"\n",(0,s.jsx)(n.li,{children:"Unlimited Storage & Compute"}),"\n",(0,s.jsx)(n.li,{children:"Data Platform as Service"}),"\n",(0,s.jsx)(n.li,{children:"Unique 3 Layer Architecture"}),"\n",(0,s.jsx)(n.li,{children:"Virtual Warehouse (compute)"}),"\n",(0,s.jsx)(n.li,{children:"Support for semi structure data"}),"\n",(0,s.jsx)(n.li,{children:"Snowflake Time Travel"}),"\n",(0,s.jsx)(n.li,{children:"Snowflake Zero Copy Clone"}),"\n",(0,s.jsx)(n.li,{children:"Continuous Data Loading (Snowpipe)"}),"\n",(0,s.jsx)(n.li,{children:"Support for ANSI SQL + Extended SQL"}),"\n",(0,s.jsx)(n.li,{children:"Snowflake Micropartition / Clustering"}),"\n",(0,s.jsx)(n.li,{children:"Snowflake Data Security & Encryption"}),"\n",(0,s.jsx)(n.li,{children:"Snowflake RBAC & DAC"}),"\n",(0,s.jsx)(n.li,{children:"Data Sharing & Reader's Account"}),"\n",(0,s.jsx)(n.li,{children:"Data Replication & Failover"}),"\n",(0,s.jsx)(n.li,{children:"Snowflake Connectors & Drivers"}),"\n",(0,s.jsx)(n.li,{children:"Tasks / Task Scheduling / DAGs"}),"\n",(0,s.jsx)(n.li,{children:"Streams (CDC - any changes in the table)"}),"\n",(0,s.jsxs)(n.li,{children:["Sequences","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sequences are used to generate unique numbers across sessions and statements, including concurrent statements. They can be used to generate values for a primary key or any column that requires a unique value."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Snowpark for Python, Java ans Scala - Runtimes and libraries that securely deploy and process non-SQL code in Snowflake."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"others",children:"Others"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Streamlit"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"links",children:"Links"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.youtube.com/playlist?list=PLba2xJ7yxHB71_GEKbQDBk0EKMq6b6S-k",children:(0,s.jsx)(n.strong,{children:"Snowflake SnowPro Certification - Tutorial - YouTube"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.youtube.com/playlist?list=PLba2xJ7yxHB7SWc4Sm-Sp3uGN74ulI4pS",children:(0,s.jsx)(n.strong,{children:"Snowflake Tutorial - YouTube"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.snowflake.com/en/",children:"The Snowflake Data Cloud - Mobilize Data, Apps, and AI"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.youtube.com/watch?v=9PBvVeCQi0w",children:"What is Snowflake? 8 Minute Demo - YouTube"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.youtube.com/watch?v=hJHWmYcdDn8",children:"Snowflake Explained In 9 Mins | What Is Snowflake Database | Careers In Snowflake | MindMajix - YouTube"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.snowflake.com/",children:"Snowflake Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.interviewbit.com/snowflake-interview-questions/",children:"Top Snowflake Interview Questions and Answers (2023) - InterviewBit"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://mindmajix.com/snowflake-interview-questions",children:"Top 50 Snowflake Interview Questions And Answers 2023"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.youtube.com/watch?v=1lrQ8r6XxUM&ab_channel=SnowflakeInc.",children:"Leveraging Cortex AISQL For Multi-Modal Analytics - YouTube"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.snowflake.com/en/blog/ai-sql-query-language/",children:"Cortex AISQL: Reimagining SQL into AI Query Language for Multimodal Data"})}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(296540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);