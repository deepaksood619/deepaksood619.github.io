"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[39151],{528049:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"about-deepak-sood/projects/34-optimizing-real-time-user-analytics-using-clickhouse","title":"Case Study: Optimizing Real-time User Analytics for a Large EdTech Platform Using ClickHouse","description":"- Client: A leading EdTech platform with millions of active college students across India.","source":"@site/docs/about-deepak-sood/projects/34-optimizing-real-time-user-analytics-using-clickhouse.md","sourceDirName":"about-deepak-sood/projects","slug":"/about-deepak-sood/projects/34-optimizing-real-time-user-analytics-using-clickhouse","permalink":"/about-deepak-sood/projects/34-optimizing-real-time-user-analytics-using-clickhouse","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/about-deepak-sood/projects/34-optimizing-real-time-user-analytics-using-clickhouse.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1747378179000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Powering Granular Cloud Cost Analytics with ClickHouse","permalink":"/about-deepak-sood/projects/33-powering-granular-cloud-cost-analytics-with-clickhouse"},"next":{"title":"AWS Hands-On Amazon Q Workshop","permalink":"/about-deepak-sood/projects/35-aws-hands-on-amazon-q-workshop"}}');var t=s(474848),r=s(28453);const l={},a="Case Study: Optimizing Real-time User Analytics for a Large EdTech Platform Using ClickHouse",o={},d=[{value:"The Challenge",id:"the-challenge",level:2},{value:"Our Approach at Opstree",id:"our-approach-at-opstree",level:2},{value:"Step 1: Event Pipeline &amp; Modeling",id:"step-1-event-pipeline--modeling",level:2},{value:"Step 2: ClickHouse Deployment &amp; Optimization",id:"step-2-clickhouse-deployment--optimization",level:2},{value:"Step 3: Analytics &amp; Visualization",id:"step-3-analytics--visualization",level:2},{value:"Step 4: Ad Personalization Engine (Phase 2)",id:"step-4-ad-personalization-engine-phase-2",level:2},{value:"Business Impact",id:"business-impact",level:2},{value:"Why ClickHouse?",id:"why-clickhouse",level:2},{value:"Summary",id:"summary",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"case-study-optimizing-real-time-user-analytics-for-a-large-edtech-platform-using-clickhouse",children:"Case Study: Optimizing Real-time User Analytics for a Large EdTech Platform Using ClickHouse"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Client:"})," A leading EdTech platform with millions of active college students across India."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Technology Stack:"})," ClickHouse, Kafka, Python (ETL), Grafana, Kubernetes"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"the-challenge",children:"The Challenge"}),"\n",(0,t.jsxs)(n.p,{children:["The EdTech platform was facing challenges in delivering ",(0,t.jsx)(n.strong,{children:"real-time ad personalization"})," for its internal college ad network. The core issues included:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Slow analytics pipelines"})," due to a legacy OLAP database."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Inability to track fine-grained clickstream data"})," from internal ad placements."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Difficulty in aggregating user interaction data"})," (searches, course clicks, page visits) in real time."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Poor ad relevance"})," leading to low engagement and click-through rates."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The client needed a high-performance analytics solution to:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Track and analyze ",(0,t.jsx)(n.strong,{children:"user behavior in real time"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Run ",(0,t.jsx)(n.strong,{children:"complex aggregations on billions of events"})," quickly."]}),"\n",(0,t.jsx)(n.li,{children:"Optimize ad recommendations using deep user interaction data."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"our-approach-at-opstree",children:"Our Approach at Opstree"}),"\n",(0,t.jsxs)(n.p,{children:["We designed and implemented a modern ",(0,t.jsx)(n.strong,{children:"ClickHouse-based analytics pipeline"})," to solve this at scale."]}),"\n",(0,t.jsx)(n.h2,{id:"step-1-event-pipeline--modeling",children:"Step 1: Event Pipeline & Modeling"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Built a ",(0,t.jsx)(n.strong,{children:"Kafka-based event ingestion layer"})," for real-time user interaction events (ad clicks, scrolls, hovers, etc.)."]}),"\n",(0,t.jsxs)(n.li,{children:["Modeled the data to support ",(0,t.jsx)(n.strong,{children:"wide-column schema design"})," in ClickHouse optimized for analytical queries."]}),"\n",(0,t.jsx)(n.li,{children:"Partitioned by day, and used MergeTree engines for efficient compression and fast reads."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-2-clickhouse-deployment--optimization",children:"Step 2: ClickHouse Deployment & Optimization"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Deployed ClickHouse in ",(0,t.jsx)(n.strong,{children:"HA mode on Kubernetes"}),", ensuring scalability and fault tolerance."]}),"\n",(0,t.jsx)(n.li,{children:"Tuned system configurations (merge settings, buffer sizes) for high-throughput ingestion."}),"\n",(0,t.jsxs)(n.li,{children:["Created ",(0,t.jsx)(n.strong,{children:"materialized views and pre-aggregated tables"})," for faster dashboard loading and complex joins."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-3-analytics--visualization",children:"Step 3: Analytics & Visualization"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Integrated ClickHouse with ",(0,t.jsx)(n.strong,{children:"Grafana and Superset"})," for real-time dashboards."]}),"\n",(0,t.jsxs)(n.li,{children:["Built custom ad-performance dashboards showing:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CTR per college/user cohort"}),"\n",(0,t.jsx)(n.li,{children:"Heatmaps of ad positions on pages"}),"\n",(0,t.jsx)(n.li,{children:"Funnel analysis (search \u2192 view \u2192 click)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Enabled ",(0,t.jsx)(n.strong,{children:"real-time campaign performance tracking"})," for the internal marketing team."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-4-ad-personalization-engine-phase-2",children:"Step 4: Ad Personalization Engine (Phase 2)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Leveraged user interaction logs stored in ClickHouse to build a ",(0,t.jsx)(n.strong,{children:"lightweight personalization layer"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Queried user interest segments and behavior patterns to ",(0,t.jsx)(n.strong,{children:"serve dynamic, more relevant ads"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Enabled the platform to run ",(0,t.jsx)(n.strong,{children:"A/B experiments"})," efficiently using event data snapshots."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"business-impact",children:"Business Impact"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Metric"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Before ClickHouse"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"After Opstree's Solution"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Ad CTR"}),(0,t.jsx)(n.td,{children:"~1.1%"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"2.8%"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Dashboard load time"}),(0,t.jsx)(n.td,{children:"~40s"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"2s"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Query time on 1B+ records"}),(0,t.jsx)(n.td,{children:"~30s"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<1s"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Infrastructure cost (OLAP)"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"~35%"})})," with ClickHouse compression"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Ad personalization capability"}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Live & contextual"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"why-clickhouse",children:"Why ClickHouse?"}),"\n",(0,t.jsx)(n.p,{children:"ClickHouse was selected due to its:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Columnar storage"})," ideal for analytical queries"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Blazing-fast aggregation"})," over large datasets"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Advanced compression"})," for reduced storage cost"]}),"\n",(0,t.jsxs)(n.li,{children:["Native support for ",(0,t.jsx)(n.strong,{children:"real-time inserts and joins"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"Opstree delivered a high-performance, scalable analytics solution using ClickHouse, enabling real-time user behavior tracking and ad personalization for a leading EdTech platform. The result: faster insights, better user targeting, and measurable business outcomes."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(296540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);