"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[39813],{610954:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"technologies/elasticsearch/elastalert","title":"ElastAlert","description":"ElastAlert is a simple framework for alerting on anomalies, spikes, or other patterns of interest from data in Elasticsearch.","source":"@site/docs/technologies/elasticsearch/elastalert.md","sourceDirName":"technologies/elasticsearch","slug":"/technologies/elasticsearch/elastalert","permalink":"/technologies/elasticsearch/elastalert","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/technologies/elasticsearch/elastalert.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1732901510000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Commands","permalink":"/technologies/elasticsearch/commands"},"next":{"title":"Elasticsearch: The Definitive Guide","permalink":"/technologies/elasticsearch/elasticsearch-the-definitive-guide"}}');var l=s(474848),t=s(28453);const r={},a="ElastAlert",c={},h=[{value:"Rule Types",id:"rule-types",level:2},{value:"Types",id:"types",level:2},{value:"Common Configuration Example",id:"common-configuration-example",level:2},{value:"1. Required settings",id:"1-required-settings",level:3},{value:"2. Optional settings",id:"2-optional-settings",level:3},{value:"Example",id:"example",level:2},{value:"References",id:"references",level:2},{value:"Other Plugins",id:"other-plugins",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"elastalert",children:"ElastAlert"})}),"\n",(0,l.jsx)(n.p,{children:"ElastAlert is a simple framework for alerting on anomalies, spikes, or other patterns of interest from data in Elasticsearch."}),"\n",(0,l.jsx)(n.p,{children:"It works by combining Elasticsearch with two types of components, rule types and alerts. Elasticsearch is periodically queried and the data is passed to the rule type, which determines when a match is found. When a match occurs, it is given to one or more alerts, which take action based on the match."}),"\n",(0,l.jsx)(n.p,{children:"This is configured by a set of rules, each of which defines a query, a rule type, and a set of alerts."}),"\n",(0,l.jsx)(n.p,{children:"Several rule types with common monitoring paradigms are included with ElastAlert:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:'"Match where there are X events in Y time" (frequencytype)'}),"\n",(0,l.jsx)(n.li,{children:'"Match when the rate of events increases or decreases" (spiketype)'}),"\n",(0,l.jsx)(n.li,{children:'"Match when there are less than X events in Y time" (flatlinetype)'}),"\n",(0,l.jsx)(n.li,{children:'"Match when a certain field matches a blacklist/whitelist" (blacklistandwhitelisttype)'}),"\n",(0,l.jsx)(n.li,{children:'"Match on any event matching a given filter" (anytype)'}),"\n",(0,l.jsx)(n.li,{children:'"Match when a field has two different values within some time" (changetype)'}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"In addition to this basic usage, there are many other features that make alerts more useful:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Alerts link to Kibana dashboards"}),"\n",(0,l.jsx)(n.li,{children:"Aggregate counts for arbitrary fields"}),"\n",(0,l.jsx)(n.li,{children:"Combine alerts into periodic reports"}),"\n",(0,l.jsx)(n.li,{children:"Separate alerts by using a unique key field"}),"\n",(0,l.jsx)(n.li,{children:"Intercept and enhance match data"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"rule-types",children:"Rule Types"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"'flatline' -- when there are less than X events in Y time"}),"\n",(0,l.jsx)(n.li,{children:"'blacklist/whitelist' -- when a certain field matches 'blacklist' or 'whitelist'"}),"\n",(0,l.jsx)(n.li,{children:"'any' -- when an event that matches a given filter happens"}),"\n",(0,l.jsx)(n.li,{children:"'change' -- when a field has two different values within a specified period of time"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"types",children:"Types"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"spike"}),"\n",(0,l.jsx)(n.li,{children:"frequency"}),"\n",(0,l.jsx)(n.li,{children:"flatline"}),"\n",(0,l.jsx)(n.li,{children:"new_term"}),"\n",(0,l.jsx)(n.li,{children:"change"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"common-configuration-example",children:"Common Configuration Example"}),"\n",(0,l.jsx)(n.h3,{id:"1-required-settings",children:"1. Required settings"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"es_host"}),"\n",(0,l.jsx)(n.li,{children:"es_port"}),"\n",(0,l.jsx)(n.li,{children:"index"}),"\n",(0,l.jsx)(n.li,{children:"name"}),"\n",(0,l.jsx)(n.li,{children:"type"}),"\n",(0,l.jsx)(n.li,{children:"alert"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2-optional-settings",children:"2. Optional settings"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"import"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"use_ssl"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"verify_certs"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"client_cert"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"client_key"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"ca_certs"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"es_username"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"es_password"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"es_url_prefix"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"es_send_get_body_as"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"use_strftime_index"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"search_extra_index"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"aggregation"})}),"\n",(0,l.jsx)(n.p,{children:"aggregation:\nschedule: '2 4 ** mon, fri'"}),"\n",(0,l.jsx)(n.p,{children:"aggregation:\nhours: 2"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"aggregate_by_match_time"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"realert"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"exponential_realert"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"buffer_time"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"query_delay"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"owner"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"priority"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"category"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"max_query_size"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"filter"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"include"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"top_count_keys"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"top_count_number"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"raw_count_keys"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"description"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"generate_kibana_link"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"kibana_url"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"use_kibana_dashboard"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"use_kibana4_dashboard"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"kibana4_start_timedelta"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"kibana4_end_timedelta"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"use_local_time"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"match_enhancements"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"run_enhancements_first"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"query_key"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"aggregation_key"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"summary_table_fields"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"timestamp_type"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"timestamp_format"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"timestamp_format_expr"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"_source_enabled"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"scan_entire_timeframe"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://elastalert.readthedocs.io/en/latest/ruletypes.html#common-configuration-options",children:"https://elastalert.readthedocs.io/en/latest/ruletypes.html#common-configuration-options"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://elastalert.readthedocs.io/en/latest/ruletypes.html",children:"https://elastalert.readthedocs.io/en/latest/ruletypes.html"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://elastalert.readthedocs.io/en/latest/ruletypes.html#rule-types",children:"https://elastalert.readthedocs.io/en/latest/ruletypes.html#rule-types"})}),"\n",(0,l.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'deadman_slack: |-\n  ---\n  name: Deadman Switch Slack\n  type: frequency\n  index: containers-*\n  num_events: 3\n  timeframe:\n    minutes: 3\n  filter:\n  - term:\n      message: "deadmanslack"\n  alert:\n  - "slack"\n  slack:\n  slack_webhook_url: dummy\n\ndeadman_pagerduty: |-\n  ---\n  name: Deadman Switch PagerDuty\n  type: frequency\n  index: containers-*\n  num_events: 3\n  timeframe:\n    minutes: 3\n  filter:\n  - term:\n      message: "deadmanpd"\n  alert:\n  - "pagerduty"\n  pagerduty:\n  pagerduty_service_key: dummy\n  pagerduty_client_name: Elastalert Deadman Switch\n'})}),"\n",(0,l.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://elastalert.readthedocs.io/en/latest/index.html",children:"https://elastalert.readthedocs.io/en/latest/index.html"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://engineeringblog.yelp.com/2015/10/elastalert-alerting-at-scale-with-elasticsearch.html",children:"https://engineeringblog.yelp.com/2015/10/elastalert-alerting-at-scale-with-elasticsearch.html"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/bitsensor/elastalert",children:"https://github.com/bitsensor/elastalert"})}),"\n",(0,l.jsx)(n.h2,{id:"other-plugins",children:"Other Plugins"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/sivasamyk/logtrail",children:"https://github.com/sivasamyk/logtrail"})})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var i=s(296540);const l={},t=i.createContext(l);function r(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);