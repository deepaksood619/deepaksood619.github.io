"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[32441],{457079:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"cloud/others/firebase/fcm-notifications","title":"FCM Notifications","description":"Firebase Cloud Messaging (FCM) is a cross-platform messaging solution that lets you reliably send messages at no cost.","source":"@site/docs/cloud/others/firebase/fcm-notifications.md","sourceDirName":"cloud/others/firebase","slug":"/cloud/others/firebase/fcm-notifications","permalink":"/cloud/others/firebase/fcm-notifications","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/cloud/others/firebase/fcm-notifications.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1734554726000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Automatic Collected Events","permalink":"/cloud/others/firebase/automatic-collected-events"},"next":{"title":"Firebase / Google Analytics","permalink":"/cloud/others/firebase/firebase-google-analytics"}}');var n=t(474848),o=t(28453);const a={},r="FCM Notifications",l={},c=[{value:"Notifications to web",id:"notifications-to-web",level:3},{value:"Message delivery reports",id:"message-delivery-reports",level:2},{value:"Notification funnel analysis",id:"notification-funnel-analysis",level:2},{value:"How Firebase Cloud Messaging (FCM) works",id:"how-firebase-cloud-messaging-fcm-works",level:2},{value:"Steps 1 - 2",id:"steps-1---2",level:3},{value:"Step 3",id:"step-3",level:3},{value:"Step 4",id:"step-4",level:3},{value:"Step 5",id:"step-5",level:3},{value:"Step 6",id:"step-6",level:3},{value:"Step 7",id:"step-7",level:3},{value:"Commands",id:"commands",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"fcm-notifications",children:"FCM Notifications"})}),"\n",(0,n.jsx)(s.p,{children:"Firebase Cloud Messaging (FCM) is a cross-platform messaging solution that lets you reliably send messages at no cost."}),"\n",(0,n.jsx)(s.h3,{id:"notifications-to-web",children:"Notifications to web"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://www.itwonders-web.com/blog/push-notification-using-firebase-demo-tutorial/",children:"https://www.itwonders-web.com/blog/push-notification-using-firebase-demo-tutorial/"})}),"\n",(0,n.jsx)(s.h2,{id:"message-delivery-reports",children:"Message delivery reports"}),"\n",(0,n.jsxs)(s.p,{children:["You can evaluate whether the messages you send reach your users. In the ",(0,n.jsx)(s.a,{href:"https://console.firebase.google.com/project/_/notification/reporting?authuser=1",children:"Reports"})," tab in the Firebase console, you can view the following data for messages sent to Android or iOS FCM SDKs, including those sent via the Notifications composer and the FCM APIs:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Sends -"})," The data message or notification message has been enqueued for delivery or has been successfully passed to a third-party service like APNs for delivery. See ",(0,n.jsx)(s.a,{href:"https://firebase.google.com/docs/cloud-messaging/concept-options?authuser=1#lifetime",children:"lifetime of a message"})," for more information."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Received (available only on Android devices) -"})," The data message or notification message has been received by the app. This data is available when the receiving Android device has FCM SDK 18.0.1 or higher installed."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Impressions (available only for notification messages on Android devices) -"})," The display notification has been displayed on the device while the app is in the background."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Opens -"})," The user opened the notification message. Reported only for notifications received when the app is in the background."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"notification-funnel-analysis",children:"Notification funnel analysis"}),"\n",(0,n.jsx)(s.p,{children:"A built-in Notifications funnel analysis shows you how your users respond to particular notifications sent from the Firebase console. This view includes data for targeted iOS and Android devices in these categories:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Notifications sent -"})," The message has been enqueued for delivery or has been successfully passed to a third-party service like APNs for delivery. Note that targeting stale tokens or inactive registrations may inflate these statistics."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Notifications opened -"})," The number of notifications opened. Reported only for notifications received when the app is in the background."]}),"\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.strong,{children:"number of unique users"})," who have triggered a conversion event, if one is defined."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://firebase.google.com/docs/cloud-messaging/understand-delivery",children:"https://firebase.google.com/docs/cloud-messaging/understand-delivery"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://firebase.google.com/docs/cloud-messaging",children:"https://firebase.google.com/docs/cloud-messaging"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://firebase.googleblog.com/2019/02/life-of-a-message.html",children:"https://firebase.googleblog.com/2019/02/life-of-a-message.html"})}),"\n",(0,n.jsx)(s.h2,{id:"how-firebase-cloud-messaging-fcm-works",children:"How Firebase Cloud Messaging (FCM) works"}),"\n",(0,n.jsx)(s.p,{children:"FCM is a cross-platform messaging solution that can compose, send, queue, and route notifications reliably. It provides a unified API between message senders (app servers) and receivers (client apps). The app developer can use this solution to drive user retention."}),"\n",(0,n.jsx)(s.h3,{id:"steps-1---2",children:"Steps 1 - 2"}),"\n",(0,n.jsx)(s.p,{children:"When the client app starts for the first time, the client app sends credentials to FCM, including Sender ID, API Key, and App ID. FCM generates Registration Token for the client app instance (so the Registration Token is also called Instance ID). This token must be included in the notifications."}),"\n",(0,n.jsx)(s.h3,{id:"step-3",children:"Step 3"}),"\n",(0,n.jsx)(s.p,{children:"The client app sends the Registration Token to the app server. The app server caches the token for subsequent communications. Over time, the app server has too many tokens to maintain, so the recommended practice is to store the token with timestamps and to remove stale tokens from time to time."}),"\n",(0,n.jsx)(s.h3,{id:"step-4",children:"Step 4"}),"\n",(0,n.jsx)(s.p,{children:"There are two ways to send messages. One is to compose messages directly in the console GUI (Step 4.1,) and the other is to send the messages from the app server (Step 4.2.) We can use the Firebase Admin SDK or HTTP for the latter."}),"\n",(0,n.jsx)(s.h3,{id:"step-5",children:"Step 5"}),"\n",(0,n.jsx)(s.p,{children:"FCM receives the messages, and queues the messages in the storage if the devices are not online."}),"\n",(0,n.jsx)(s.h3,{id:"step-6",children:"Step 6"}),"\n",(0,n.jsx)(s.p,{children:"FCM forwards the messages to platform-level transport. This transport layer handles platform-specific configurations."}),"\n",(0,n.jsx)(s.h3,{id:"step-7",children:"Step 7"}),"\n",(0,n.jsx)(s.p,{children:"The messages are routed to the targeted devices. The notifications can be displayed according to the configurations sent from the app server (1)."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"How FCM Works",src:t(201784).A+"",width:"999",height:"786"})}),"\n",(0,n.jsx)(s.h2,{id:"commands",children:"Commands"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'curl -X POST \\\n  https://fcm.googleapis.com/fcm/send \\\n  -H \'Authorization: key=xxx:xxx-xxx\' \\\n  -H \'Content-Type: application/json\' \\\n  -H \'cache-control: no-cache\' \\\n  -d \'{\n    "to": "xxx",\n    "data":{\n        "body":"Test Notification !!!",\n        "title":"Test Title !!!"\n    }\n}\'\n'})})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},201784:(e,s,t)=>{t.d(s,{A:()=>i});const i=t.p+"assets/images/Pasted image 20240229100535-c2e0ea5fd95f9292992cda091f7040d6.jpg"},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>r});var i=t(296540);const n={},o=i.createContext(n);function a(e){const s=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);