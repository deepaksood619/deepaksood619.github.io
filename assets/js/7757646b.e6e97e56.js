"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[33931],{495476:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>h,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"devops/monitoring/prometheus/querying","title":"Querying","description":"Functions","source":"@site/docs/devops/monitoring/prometheus/querying.md","sourceDirName":"devops/monitoring/prometheus","slug":"/devops/monitoring/prometheus/querying","permalink":"/devops/monitoring/prometheus/querying","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/monitoring/prometheus/querying.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1701846168000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Prometheus Architecture","permalink":"/devops/monitoring/prometheus/prometheus-architecture"},"next":{"title":"Rules","permalink":"/devops/monitoring/prometheus/rules"}}');var r=t(474848),o=t(28453);const i={},c="Querying",h={},l=[{value:"Functions",id:"functions",level:2},{value:"PromQL",id:"promql",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"querying",children:"Querying"})}),"\n",(0,r.jsx)(s.h2,{id:"functions",children:"Functions"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#abs",children:"abs()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#absent",children:"absent()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#ceil",children:"ceil()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#changes",children:"changes()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#clamp_max",children:"clamp_max()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#clamp_min",children:"clamp_min()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#day_of_month",children:"day_of_month()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#day_of_week",children:"day_of_week()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#days_in_month",children:"days_in_month()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#delta",children:"delta()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#deriv",children:"deriv()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#exp",children:"exp()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#floor",children:"floor()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#histogram_quantile",children:"histogram_quantile()"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#holt_winters",children:"holt_winters()"})}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"holt_winters(v range-vector, sf scalar, tf scalar)produces a smoothed value for time series based on the range inv. The lower the smoothing factorsf, the more importance is given to old data. The higher the trend factortf, the more trends in the data is considered. Bothsfandtfmust be between 0 and 1."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#hour",children:(0,r.jsx)(s.code,{children:"hour()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#idelta",children:(0,r.jsx)(s.code,{children:"idelta()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#increase",children:(0,r.jsx)(s.code,{children:"increase()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#irate",children:(0,r.jsx)(s.code,{children:"irate()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#label_join",children:(0,r.jsx)(s.code,{children:"label_join()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#label_replace",children:(0,r.jsx)(s.code,{children:"label_replace()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#ln",children:(0,r.jsx)(s.code,{children:"ln()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#log2",children:(0,r.jsx)(s.code,{children:"log2()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#log10",children:(0,r.jsx)(s.code,{children:"log10()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#minute",children:(0,r.jsx)(s.code,{children:"minute()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#month",children:(0,r.jsx)(s.code,{children:"month()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#predict_linear",children:(0,r.jsx)(s.code,{children:"predict_linear()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#rate",children:(0,r.jsx)(s.code,{children:"rate()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#resets",children:(0,r.jsx)(s.code,{children:"resets()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#round",children:(0,r.jsx)(s.code,{children:"round()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#scalar",children:(0,r.jsx)(s.code,{children:"scalar()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#sort",children:(0,r.jsx)(s.code,{children:"sort()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#sort_desc",children:(0,r.jsx)(s.code,{children:"sort_desc()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#sqrt",children:(0,r.jsx)(s.code,{children:"sqrt()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#time",children:(0,r.jsx)(s.code,{children:"time()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#timestamp",children:(0,r.jsx)(s.code,{children:"timestamp()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#vector",children:(0,r.jsx)(s.code,{children:"vector()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#year",children:(0,r.jsx)(s.code,{children:"year()"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#aggregation_over_time",children:(0,r.jsx)(s.code,{children:"<aggregation>_over_time()"})})}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"promql",children:"PromQL"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'sum by (instance) (\n    irate(\n        container_cpu_usage_seconds_total{\n            pod_name=~"worker.*"\n        }[5m]\n    )\n)\n'})}),"\n",(0,r.jsxs)(s.p,{children:["To subtract two metrics use ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"on ()"})})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'celery_tasks_total{instance="celery-exporter.airflow.svc.cluster.local:8888", job="celery-monitoring", name="airflow.executors.celery_executor.execute_command", namespace="airflow", queue="undefined", state="RECEIVED"} - on ()\n\n(celery_tasks_total{instance="celery-exporter.airflow.svc.cluster.local:8888", job="celery-monitoring", name="airflow.executors.celery_executor.execute_command", namespace="airflow", queue="undefined", state="SUCCESS"} + on () celery_tasks_total{instance="celery-exporter.airflow.svc.cluster.local:8888", job="celery-monitoring", name="airflow.executors.celery_executor.execute_command", namespace="airflow", queue="undefined", state="FAILURE"})\n'})})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>c});var n=t(296540);const r={},o=n.createContext(r);function i(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);