"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[41003],{794671:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"technologies/kafka/kafka-python","title":"kafka-python","description":"Python client for the Apache Kafka distributed stream processing system. (consumer iterators)","source":"@site/docs/technologies/kafka/kafka-python.md","sourceDirName":"technologies/kafka","slug":"/technologies/kafka/kafka-python","permalink":"/technologies/kafka/kafka-python","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/technologies/kafka/kafka-python.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1732812944000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Kafka Producers","permalink":"/technologies/kafka/kafka-producers"},"next":{"title":"kafka-rest proxy","permalink":"/technologies/kafka/kafka-rest-proxy"}}');var s=r(474848),t=r(28453);const o={},i="kafka-python",c={},h=[{value:"Kafka Consumer",id:"kafka-consumer",level:2},{value:"Kafka Producer",id:"kafka-producer",level:2},{value:"Kafka Producer Settings",id:"kafka-producer-settings",level:2},{value:"Corner cases",id:"corner-cases",level:2},{value:"Questions",id:"questions",level:2},{value:"Errors",id:"errors",level:2},{value:"Enhancements",id:"enhancements",level:2},{value:"References",id:"references",level:2},{value:"Other Kafka Clients",id:"other-kafka-clients",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"kafka-python",children:"kafka-python"})}),"\n",(0,s.jsx)(n.p,{children:"Python client for the Apache Kafka distributed stream processing system. (consumer iterators)"}),"\n",(0,s.jsx)(n.h2,{id:"kafka-consumer",children:"Kafka Consumer"}),"\n",(0,s.jsx)(n.p,{children:"The consumer iterator returns ConsumerRecords, which are simple namedtuples that expose basic message attributes: topic, partition, offset, key, and value:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from kafka import KafkaConsumer\nconsumer = KafkaConsumer('my_favorite_topic')\nfor msg in consumer:\n    print (msg)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"kafka-producer",children:"Kafka Producer"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://kafka-python.readthedocs.io/en/master/apidoc/kafka.html#kafka.KafkaProducer",children:"KafkaProducer"})," is a high-level, asynchronous message producer."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from kafka import KafkaProducer\nproducer = KafkaProducer(bootstrap_servers='localhost:1234')\nfor _ in range(100):\n    producer.send('foobar', b'some_message_bytes')\n"})}),"\n",(0,s.jsx)(n.p,{children:"The KafkaProducer can be used across threads without issue, unlike the KafkaConsumer which cannot."}),"\n",(0,s.jsx)(n.h2,{id:"kafka-producer-settings",children:"Kafka Producer Settings"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"retries"}),"\n",(0,s.jsx)(n.li,{children:"batch_size"}),"\n",(0,s.jsx)(n.li,{children:"linger_ms"}),"\n",(0,s.jsx)(n.li,{children:"buffer_memory"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"corner-cases",children:"Corner cases"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Broker down"}),"\n",(0,s.jsx)(n.li,{children:"Internet connection down"}),"\n",(0,s.jsx)(n.li,{children:"Internet connection slow"}),"\n",(0,s.jsx)(n.li,{children:"Data encoding error"}),"\n",(0,s.jsx)(n.li,{children:"Ack not received (write error on broker)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"questions",children:"Questions"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Should be asynchronous / block until delivered, and what to do if error arises after some time, when the thread is moved on further."}),"\n",(0,s.jsx)(n.li,{children:"How to handle error logs? Use LogStash and Elasticsearch? (Errors like No brokers error or any other error that arises?)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"errors",children:"Errors"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If the net is not there in first attempt, then kafka doesn't run after the net is back."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"enhancements",children:"Enhancements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"msgpack"})," / lz4 / snappy for compression"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kafka-python.readthedocs.io/en/master",children:"https://kafka-python.readthedocs.io/en/master"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kafka-python.readthedocs.io/en/master/apidoc/KafkaProducer.html",children:"https://kafka-python.readthedocs.io/en/master/apidoc/KafkaProducer.html"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://kafka-python.readthedocs.io/en/master/usage.html",children:"https://kafka-python.readthedocs.io/en/master/usage.html"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/edenhill/kafkacat",children:"https://github.com/edenhill/kafkacat"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION",children:"https://github.com/edenhill/librdkafka/blob/master/CONFIGURATION"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://towardsdatascience.com/3-libraries-you-should-know-to-master-apache-kafka-in-python-c95fdf8700f2",children:"https://towardsdatascience.com/3-libraries-you-should-know-to-master-apache-kafka-in-python-c95fdf8700f2"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"other-kafka-clients",children:"Other Kafka Clients"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.confluent.io/kafka-clients/java/current/overview.html",children:"Java Client for Apache Kafka | Confluent Documentation"})})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var a=r(296540);const s={},t=a.createContext(s);function o(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);