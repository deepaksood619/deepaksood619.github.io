"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[56564],{616426:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"devops/servers/apache-server","title":"Apache Server","description":"Apache HTTP Server","source":"@site/docs/devops/servers/apache-server.md","sourceDirName":"devops/servers","slug":"/devops/servers/apache-server","permalink":"/devops/servers/apache-server","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/servers/apache-server.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1745778295000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Servers","permalink":"/devops/servers/"},"next":{"title":"Gunicorn","permalink":"/devops/servers/gunicorn"}}');var t=r(474848),i=r(28453);const o={},a="Apache Server",c={},h=[{value:"Apache HTTP Server",id:"apache-http-server",level:2},{value:"Commands",id:"commands",level:2},{value:"Configs / Commands",id:"configs--commands",level:2},{value:"Configs",id:"configs",level:2},{value:"Document Roots",id:"document-roots",level:2},{value:"modules",id:"modules",level:2},{value:"Apache MPM (Multi Processing Module)",id:"apache-mpm-multi-processing-module",level:2},{value:"Prefork MPM",id:"prefork-mpm",level:3},{value:"Worker MPM",id:"worker-mpm",level:3},{value:"Event MPM",id:"event-mpm",level:3},{value:"Optimizations",id:"optimizations",level:2},{value:"Remove the Burden of Processing Code From Apache",id:"remove-the-burden-of-processing-code-from-apache",level:3},{value:"Change Apache&#39;s MaxKeepAliveRequests, KeepAlive, and KeepAliveTimeout Settings",id:"change-apaches-maxkeepaliverequests-keepalive-and-keepalivetimeout-settings",level:3},{value:"Workers",id:"workers",level:3},{value:"Optimizations",id:"optimizations-1",level:3},{value:"OS Specifics",id:"os-specifics",level:2},{value:"Configurations",id:"configurations",level:2},{value:"Log Management",id:"log-management",level:3},{value:"Metrics to monitor",id:"metrics-to-monitor",level:3},{value:"Worker utilization",id:"worker-utilization",level:3},{value:"Keep-alive connections",id:"keep-alive-connections",level:3},{value:"Memory usage",id:"memory-usage",level:3},{value:"CPU utilization",id:"cpu-utilization",level:3},{value:"Open file descriptors",id:"open-file-descriptors",level:3},{value:"Apache Tomcat",id:"apache-tomcat",level:2},{value:"Difference between Apache HTTP Server and Apache Tomcat",id:"difference-between-apache-http-server-and-apache-tomcat",level:2},{value:"Varnish",id:"varnish",level:2}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"apache-server",children:"Apache Server"})}),"\n",(0,t.jsx)(s.h2,{id:"apache-http-server",children:"Apache HTTP Server"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/",children:"Apache HTTP Server"}),", also known as Apache HTTPd, is a widely used open source web server that is extremely customizable. Its functionality can be extended through modules that suit a wide range of use cases, from serving ",(0,t.jsx)(s.a,{href:"https://wiki.apache.org/httpd/php",children:"dynamic PHP content"})," to acting as a ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/current/mod/mod_proxy.html",children:"forward or reverse proxy"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"The Apache HTTP Server, colloquially called Apache, is a Web server application notable for playing a key role in the initial growth of the World Wide Web. Originally based on the NCSA HTTPd server, development of Apache began in early 1995 after work on the NCSA code stalled. Apache quickly overtook NCSA HTTPd as the dominant HTTP server, and has remained the most popular HTTP server in use since April 1996."}),"\n",(0,t.jsx)(s.p,{children:"Also known as HTTPd -- open source web server and extremely customizable"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Dynamic PHP content"}),"\n",(0,t.jsx)(s.li,{children:"Acting as forward or reverse proxy"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"commands",children:"Commands"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"apt install apache2\ncd /etc/apache2/sites-available/\ncp 000-default.conf gci.conf\nnano gci.conf\na2ensite gci.conf\nservice apache2 start\nservice apache2 reload\nnano /etc/apache2/apache2.conf\n"})}),"\n",(0,t.jsx)(s.h2,{id:"configs--commands",children:"Configs / Commands"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat /etc/apache2/mods-available/mpm_prefork.conf\n\ncat /etc/apache2/apache2.conf\n\nsudo systemctl restart apache2\n\napache2 reload\n\napache2ctl -l\n\napachectl configtest\n\napachectl -V\n\nsudo apachectl status\nsudo apachectl start\nsudo apachectl restart\nsudo apachectl stop\n"})}),"\n",(0,t.jsx)(s.h2,{id:"configs",children:"Configs"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-txt",children:"/etc/apache2/\n|-- apache2.conf\n|-- ports.conf\n|-- mods-enabled\n||-- *.load\n|-- *.conf\n|-- conf-enabled\n|-- *.conf\n|-- sites-enabled\n|--*.conf\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"apache2.conf"})," is the main configuration file. It puts the pieces together by including all remaining configuration files when starting up the web server."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ports.conf"})," is always included from the main configuration file. It is used to determine the listening ports for incoming connections, and this file can be customized anytime."]}),"\n",(0,t.jsxs)(s.li,{children:["Configuration files in the ",(0,t.jsx)(s.strong,{children:"mods-enabled/, conf-enabled/andsites-enabled/"})," directories contain particular configuration snippets which manage modules, global configuration fragments, or virtual host configurations, respectively."]}),"\n",(0,t.jsx)(s.li,{children:"They are activated by symlinking available configuration files from their respective -available/ counterparts. These should be managed by using our helpers a2enmod, a2dismod, a2ensite, a2dissite, and a2enconf, a2disconf. See their respective man pages for detailed information."}),"\n",(0,t.jsx)(s.li,{children:"The binary is called apache2. Due to the use of environment variables, in the default configuration, apache2 needs to be started/stopped with/etc/init.d/apache2 or apache2ctl. Calling /usr/bin/apache2 directly will not work with the default configuration."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"document-roots",children:"Document Roots"}),"\n",(0,t.jsxs)(s.p,{children:["By default, Ubuntu does not allow access through the web browser toanyfile apart of those located in/var/www, ",(0,t.jsx)(s.a,{href:"http://httpd.apache.org/docs/2.4/mod/mod_userdir.html",children:"public_html"})," directories (when enabled) and/usr/share(for web applications). If your site is using a web document root located elsewhere (such as in/srv) you may need to whitelist your document root directory in/etc/apache2/apache2.conf."]}),"\n",(0,t.jsxs)(s.p,{children:["The default Ubuntu document root is/var/www/html. You can make your own virtual hosts under /var/",(0,t.jsx)(s.a,{href:"http://www",children:"www"}),"."," This is different to previous releases which provides better security out of the box."]}),"\n",(0,t.jsx)(s.h2,{id:"modules",children:"modules"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"mod_status"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/mod/mod_status.html",children:"https://httpd.apache.org/docs/2.4/mod/mod_status.html"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.datadoghq.com/blog/collect-apache-performance-metrics",children:"https://www.datadoghq.com/blog/collect-apache-performance-metrics"})}),"\n",(0,t.jsx)(s.h2,{id:"apache-mpm-multi-processing-module",children:"Apache MPM (Multi Processing Module)"}),"\n",(0,t.jsx)(s.p,{children:"Apache's Multi-Processing Modules (MPMs) are responsible for binding to network ports on the machine, accepting requests, and dispatching children to handle the requests"}),"\n",(0,t.jsx)(s.p,{children:"By default mpm is prefork which is thread safe."}),"\n",(0,t.jsx)(s.h3,{id:"prefork-mpm",children:"Prefork MPM"}),"\n",(0,t.jsx)(s.p,{children:"Implements a non-threaded, pre-forking web server that handles requests in a manner similar to Apache 1.3. It is appropriate for sites that need to avoid threading for compatibility with non-thread-safe libraries. It is also the best MPM for isolating each request, so that a problem with a single request will not affect any other."}),"\n",(0,t.jsx)(s.p,{children:"Prefork MPM uses multiple child processes with one thread each and each process handles one connection at a time."}),"\n",(0,t.jsx)(s.p,{children:"That means that each Apache child process contains a single thread and handles one request at a time. Because of that, it consumes more resources than the threaded MPMs: Worker and Event."}),"\n",(0,t.jsx)(s.p,{children:"Prefork is the default MPM, so if no MPM is selected in EasyApache, Prefork will be selected. It still is the best choice if Apache has to use non-thread safe libraries such as mod_php (DSO), and is ideal if isolation of processes is important."}),"\n",(0,t.jsx)(s.p,{children:"The self-regulating MPM Prefork derives its namesake from how it forks or copies itself into new identical processes preemptively to wait for incoming requests. A non-threaded process-based approach at multiprocessing, MPM Prefork runs Apache in a single master parent server process. This parent is responsible for managing any additional child servers that make up its serverpool. While using MPM Prefork, each child server handles only a single request. This focus provides complete isolation from other requests dealt with on the server. MPM Prefork is typically used for compatibility when non-threaded libraries/software, like mod_php (DSO), are required. From an optimization standpoint, MPM Prefork can be sorely lacking when compared to multi-threaded solutions, requiring vastly more resources to reach similar traffic levels as a threaded MPM. It is resource intensive due to its need to spawn full copies of Apache for every request."}),"\n",(0,t.jsxs)(s.p,{children:["Each idle child process joins a queue to listen for incoming requests. This MPM uses a method called ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/mod/core.html#mutex",children:"accept mutex"})," to ensure that only one process listens for and accepts the next TCP request (mutex stands for MUTual EXclusion mechanism). The first idle worker process in the queue acquires the mutex and listens for the next incoming connection. After receiving a connection, it releases the accept mutex by passing it to the next idle process in the queue, and processes the request (during which time it is considered a busy worker). After it finishes processing the request, it joins the queue once again."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"image",src:r(747674).A+"",width:"1000",height:"400"})}),"\n",(0,t.jsxs)(s.p,{children:["Because this MPM needs a higher number of processes to handle any given number of requests, it is generally more memory-hungry than multi-threaded MPMs like worker and event. For this reason, if you are using mod_php you should consider switching over to ",(0,t.jsx)(s.a,{href:"https://wiki.apache.org/httpd/PHP-FPM",children:"PHP-FPM"})," so that you can use the worker or event MPM instead."]}),"\n",(0,t.jsx)(s.p,{children:"Avoid using MPM Prefork whenever possible. It's inability to scale well with increased traffic will quickly outpace the available hardware on most system configurations."}),"\n",(0,t.jsx)(s.h3,{id:"worker-mpm",children:"Worker MPM"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.a,{href:"http://httpd.apache.org/docs/2.2/mod/worker.html",children:"workerMPM"})," implements a hybrid multi-process multi-threaded server and gives better performance, hence it should be preferred unless one is using other modules that contain non-thread-safe libraries"]}),"\n",(0,t.jsx)(s.p,{children:"Worker MPM uses multiple child processes with many threads each. Each thread handles one connection at a time."}),"\n",(0,t.jsx)(s.p,{children:"Unlike Prefork, each child process under Worker can have multiple threads. As such, Worker can handle more requests with fewer resources than Prefork. Worker generally is recommended for high-traffic servers running Apache versions prior to 2.4. However, Worker is incompatible with non-thread safe libraries. If you need to run something that isn't thread safe, you will need to stick with Prefork."}),"\n",(0,t.jsxs)(s.p,{children:["In the ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/current/mod/worker.html",children:"worker MPM"}),", the parent process creates a certain number of child processes (once again, determined byStartServersin the main ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/current/configuring.html",children:"configuration file"}),"), and each child process creates a constant number of threads (ThreadsPerChild), as well as a listener thread."]}),"\n",(0,t.jsx)(s.p,{children:"Like the prefork MPM, the worker MPM usesaccept mutexto designate which thread will process the next incoming request. Each child process's listener thread only joins the idle queue (which indicates that it is eligible to obtain accept mutex) if it detects that at least one worker thread within the child process is currently idle. Therefore, for every process that has at least one idle worker thread, the listener thread will join the queue to apply for accept mutex."}),"\n",(0,t.jsx)(s.p,{children:"The listener thread that accepts the mutex will listen for the next incoming request, accept the connection, and release the accept mutex so that another listener thread can shepherd the next incoming request. The listener thread then passes the socket to an idle worker thread within its process."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"image",src:r(370277).A+"",width:"999",height:"605"})}),"\n",(0,t.jsx)(s.p,{children:"Unlike the prefork MPM, the worker MPM enables each child process to serve more than one request at a time, by utilizing multiple threads. Because you only need one thread per connection, instead of forking one process per connection, this MPM tends to be more memory-efficient than the prefork MPM."}),"\n",(0,t.jsx)(s.p,{children:"The KeepAliveTimeOut directive currently defines the amount of time Apache will wait for requests. When utilizing KeepAlive with MPM Worker use the smallest KeepAliveTimeout as possible (1 second preferably)."}),"\n",(0,t.jsx)(s.h3,{id:"event-mpm",children:"Event MPM"}),"\n",(0,t.jsx)(s.p,{children:"MPM tries to fix the 'keep alive problem' in HTTP."}),"\n",(0,t.jsx)(s.p,{children:"Each process under Event also can contain multiple threads but, unlike Worker, each is capable of more than one task. Apache has the lowest resource requirements when used with the Event MPM."}),"\n",(0,t.jsx)(s.p,{children:"Event, though, is supported only on servers running Apache 2.4. Under Apache 2.2, Event is considered experimental and is incompatible with some modules on older versions of Apache."}),"\n",(0,t.jsx)(s.p,{children:'Based off the MPM Worker source code, MPM Event shares configuration directives with MPM Worker. It works nearly identical to MPM Worker except when it comes to handling KeepAlive requests. MPM Event uses a dedicated Listener thread in each child process. This Listening thread is responsible for directing incoming requests to an available worker thread. The Listening thread solves the issue encountered by MPM Worker which locks entire threads into waiting for the KeepAliveTimeout. The Listener approach of MPM Event ensures worker threads are not "stuck" waiting for KeepAliveTimeout to expire. This method keeps the maximum amount of worker threads handling as many requests as possible.'}),"\n",(0,t.jsxs)(s.p,{children:["As of version 2.4 of Apache, the ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/current/mod/event.html",children:"event MPM"})," is now an official MPM (it was formerly experimental). Like the worker MPM, each child process in the event MPM creates multiple threads (determined byThreadsPerChild), in addition to one listener thread."]}),"\n",(0,t.jsx)(s.p,{children:"In the other types of MPMs, if a worker thread or process handles a request on a keep-alive connection, the connection stays open (and the worker is blocked from processing other requests) for the duration of theKeepAliveTimeout, or until the client closes the connection."}),"\n",(0,t.jsxs)(s.p,{children:["A major benefit of the event MPM is that it handles keep-alive connections more efficiently by utilizing the kernel's I/O methods like ",(0,t.jsx)(s.a,{href:"http://man7.org/linux/man-pages/man7/epoll.7.html",children:"epoll"}),"(on Linux) and ",(0,t.jsx)(s.a,{href:"https://www.freebsd.org/cgi/man.cgi?kqueue",children:"kqueue"}),"(on BSD systems)."]}),"\n",(0,t.jsx)(s.p,{children:'In the event MPM, a worker thread can write a request to the client, and then pass control of the socket to the listener thread, freeing the worker to address another request. The listener thread assumes control of sockets that don\'t require immediate action from a worker thread, until it detects an "event" on a socket (e.g. if the client sends a new request on a keep-alive connection, the kernel will create an event to notify the listener that the socket is readable). Once the event is detected, the listener thread will pass it on to the next available idle worker thread.'}),"\n",(0,t.jsx)(s.p,{children:"If the KeepAliveTimeout is reached before any activity occurs on the socket, the listener thread will close the connection. Also, if any listener thread detects that all worker threads within its process are busy, it will close keep-alive connections, forcing clients to create new connections that can be processed more quickly by other processes' worker threads (although, for the sake of simplicity, we do not show this in the example below). Because the dedicated listener thread helps monitor the lifetime of each keep-alive connection, worker threads that would otherwise have been blocked (waiting for further activity) are instead free to address other active requests."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"image",src:r(443112).A+"",width:"999",height:"433"})}),"\n",(0,t.jsx)(s.p,{children:"There are a number of other experimental MPMs such as Threadpool, Perchild, and Leader."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.liquidweb.com/kb/apache-performance-tuning-apache-mpm-modules",children:"https://www.liquidweb.com/kb/apache-performance-tuning-apache-mpm-modules"})}),"\n",(0,t.jsx)(s.h2,{id:"optimizations",children:"Optimizations"}),"\n",(0,t.jsx)(s.h3,{id:"remove-the-burden-of-processing-code-from-apache",children:"Remove the Burden of Processing Code From Apache"}),"\n",(0,t.jsx)(s.p,{children:"Apache modules provide a quick and easy solution to process the code needed to operate your website. Some of the most popular modules are mod_php for PHP, mod_rails for Ruby on Rails, and mod_python for Python."}),"\n",(0,t.jsx)(s.p,{children:"However, these modules come with a price: they put the burden of code processing on Apache, which can slow down website response times across the board."}),"\n",(0,t.jsx)(s.p,{children:"To improve Apache's performance, consider migrating to these alternative solutions instead:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["PHP: ",(0,t.jsx)(s.a,{href:"https://php-fpm.org/",children:"php-fpm"})]}),"\n",(0,t.jsxs)(s.li,{children:["Ruby: ",(0,t.jsx)(s.a,{href:"https://bogomips.org/unicorn/",children:"Unicorn"})]}),"\n",(0,t.jsxs)(s.li,{children:["Python: ",(0,t.jsx)(s.a,{href:"https://uwsgi-docs.readthedocs.io/en/latest/",children:"uWSGI"})," or ",(0,t.jsx)(s.a,{href:"http://gunicorn.org/",children:"gnunicorn"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"change-apaches-maxkeepaliverequests-keepalive-and-keepalivetimeout-settings",children:"Change Apache's MaxKeepAliveRequests, KeepAlive, and KeepAliveTimeout Settings"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"MaxKeepAliveRequests"})," sets the maximum number of requests to accept per connection. The higher this number, the better the performance of the server, up to a point. The recommended value is 500."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"KeepAliveTimeout"})," sets the number of seconds Apache will wait for a new request from a connection before it closes the connection. This number should be kept low. The recommended value is between 1 and 5."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"MaxKeepAliveRequests"})," 500"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"KeepAlive"})," On"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"KeepAliveTimeout"})," 3"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"workers",children:"Workers"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'sudo ps -y l C apache2 | awk \'{x += $8;y += 1} END {print "Apache Memory Usage (MB): "x/1024; print "Average Process Size (MB): "x/((y-1)*1024)}\'\n\nMaxRequestWorkers = Baseline Free (with buffer space) / Avg Process Size\n\ncat /etc/apache2/mods-available/mpm_prefork.conf\n\n<IfModule mpm_prefork_module>\nStartServers 10\nMinSpareServers 20\nMaxSpareServers 80\nMaxRequestWorkers 250\nMaxConnectionsPerChild 10000\n</IfModule>\n'})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"StartServers"})," is the number of child processes created upon starting Apache."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/mod/mpm_common.html#maxrequestworkers",children:(0,t.jsx)(s.strong,{children:"MaxRequestWorkers"})}),"(orMaxClientsin versions prior to 2.4) is the maximum number of connections that can be open at one time. Once this limit has been reached, any additional incoming connections are queued. The maximum size of the queue is determined by theListenBacklogsetting (by default 511, though it can be smaller depending on your OS; on Linux, the queue length is limited bynet.core.somaxconn)."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"MinSpareServers"})," / MinSpareThreads and MaxSpareServers / MaxSpareThreads refer to the minimum and maximum number of child processes (in the prefork MPM) or worker threads (in the worker and event MPMs) that should be idle at any one time. If the number of idle processes/threads does not fall within these bounds, the parent process will kill or spawn new processes/threads accordingly."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"MaxConnectionsPerChild"})," (known as MaxRequestsPerChild prior to version 2.4) determines the total number of connections each child process can serve before it is restarted, which can be important for guarding against ",(0,t.jsx)(s.a,{href:"https://www.datadoghq.com/blog/monitoring-apache-web-server-performance/#toc-host-level-resource-metrics",children:"memory leaks"})," when using certain modules like mod_php."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Backlog Queue"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Backlog Queue settingnet.core.somaxconnfrom128to32768"}),"\n",(0,t.jsx)(s.li,{children:"Ephemeral Ports settingnet.ipv4.ip_local_port_rangefrom32768 60999to1024 65000"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"optimizations-1",children:"Optimizations"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Remove Unused Modules"}),"\n",(0,t.jsx)(s.li,{children:"Save memory by not loading modules that you do not need, including but not limited to mod_php, mod_ruby, mod_perl, etc."}),"\n",(0,t.jsx)(s.li,{children:"Use this command to list out modulesapache2 -Mit will list all the modules and then we have to stop loading unwanted modules. Please follow this articlehttps://haydenjames.io/strip-apache-improve-performance-memory-efficiency"}),"\n",(0,t.jsx)(s.li,{children:"Please check and comparempm_prefork_moduleandmpm_event_module(better than prefork)."}),"\n",(0,t.jsx)(s.li,{children:"Turn HostnameLookups Off"}),"\n",(0,t.jsx)(s.li,{children:"Stop doing expensive DNS lookups. You will rarely ever need them and when you do, you can look them up after the fact."}),"\n",(0,t.jsx)(s.li,{children:"Do Not set KeepAliveTimeout too high"}),"\n",(0,t.jsx)(s.li,{children:"If you have more requests than apache children, this setting can starve your pool of available clients."}),"\n",(0,t.jsx)(s.li,{children:"Check for SYMLINKS"}),"\n",(0,t.jsx)(s.li,{children:"Avoid Wildcards in DirectoryIndex"}),"\n",(0,t.jsx)(s.li,{children:"Use a specific DirectoryIndex, i.e. index.html or index.php, not index."}),"\n",(0,t.jsx)(s.li,{children:"Avoid using hostname in configs"}),"\n",(0,t.jsx)(s.li,{children:"If you have HostnameLookups off, this will prevent you from having to wait for the DNS resolve of the hostnames in your configs, use IP addresses instead."}),"\n",(0,t.jsx)(s.li,{children:"Use Persistent Connections"}),"\n",(0,t.jsx)(s.li,{children:"Set KeepAlive on and then set KeepAliveTimeout and KeepAliveRequests. KeepAliveTimeout is how long apache will wait for the next request, and KeepAliveRequests is the max number of requests for a client prior to resetting the connection. This will prevent the client from having to reconnect between each request."}),"\n",(0,t.jsx)(s.li,{children:"Turn off safe_mode for php"}),"\n",(0,t.jsx)(s.li,{children:"It will utilize about 50-70% of your script time checking against these safe directives. Instead configure open_base_dir properly and utilize plugins such as mod_itk."}),"\n",(0,t.jsx)(s.li,{children:"Don't use threaded mpm with mod_php"}),"\n",(0,t.jsx)(s.li,{children:"Look at using mod_itk, mod_php tends to segfault with threaded mpm."}),"\n",(0,t.jsx)(s.li,{children:"Flush buffers early for pre render"}),"\n",(0,t.jsx)(s.li,{children:"It takes a relatively long time to create a web page on the backend, flush your buffer prior to page completion to send a partial page to the client, so it can start rendering. A good place to do this is right after the HEAD section -- so that the browser can start fetching other objects."}),"\n",(0,t.jsx)(s.li,{children:"Use mod_disk_cache NOT mod_mem_cache"}),"\n",(0,t.jsx)(s.li,{children:"mod_mem_cache will not share its cache among different apache processes, which results in high memory usage with little performance gain since on an active server, mod_mem_cache will rarely serve the same page twice in the same apache process."}),"\n",(0,t.jsx)(s.li,{children:"Configure mod_disk_cache with a flat hierarchy"}),"\n",(0,t.jsx)(s.li,{children:"Ensure that you are using CacheDirLength=2 and CacheDirLevels=1 to ensure htcacheclean will not take forever when cleaning up your cache directory."}),"\n",(0,t.jsx)(s.li,{children:"Disabling .htaccess"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"htaccess allows setting specific configuration for every single directory in our server root, without restarting. So, traversing all the directories, looking for the .htaccess files, on every request, incurs a performance penalty."}),"\n",(0,t.jsx)(s.p,{children:"In general, you should only use.htaccessfiles when you don't have access to the main server configuration file."}),"\n",(0,t.jsxs)(s.p,{children:["In general, use of.htaccessfiles should be avoided when possible. Any configuration that you would consider putting in a.htaccessfile, can just as effectively be made in a ",(0,t.jsx)(s.code,{children:"<directory>"})," section in your main server configuration file."]}),"\n",(0,t.jsx)(s.p,{children:"The solution is to disable it in/etc/apache2/apache2.conf:"}),"\n",(0,t.jsx)(s.p,{children:"AllowOverride None"}),"\n",(0,t.jsx)(s.p,{children:"If we need it for the specific directories, we can then enable it withinsections in our virtual host files:"}),"\n",(0,t.jsx)(s.p,{children:"AllowOverride All"}),"\n",(0,t.jsx)(s.h2,{id:"os-specifics",children:"OS Specifics"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Increase Swappiness"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Particularly on single site hosts this will increase performance. On linux systems increase /proc/sys/vm/swappiness to at least 60 if not greater. This will try to load as many files as possible into the memory cache for faster access."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Increase Write Buffer Size"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Increase your write buffer size for tcp/ip buffers. On linux systems increase /proc/sys/net/core/wmem_max and /proc/sys/net/core/wmem_default. If your pages fit within this buffer, apache will complete a process in one call to the tcp/ip buffer."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Increase Max Open Files"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"If you are handling high loads increase the number of allowed open files. On linux, increase /proc/sys/fs/file-max and run ulimit -H -n 4096."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["If you need to get more speed from dynamic pages, you have a few options: add a ",(0,t.jsx)(s.strong,{children:"Varnish"})," or ",(0,t.jsx)(s.strong,{children:"Memcached"})," caching layer, switch to a faster PHP runtime (e.g., ",(0,t.jsx)(s.strong,{children:"HHVM"}),"), do load balancing, or invest in extra hardware."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"configurations",children:"Configurations"}),"\n",(0,t.jsx)(s.h3,{id:"log-management",children:"Log Management"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Mod_log_config, which lets you define the settings and storage location for your logs."}),"\n",(0,t.jsx)(s.li,{children:"Mod_log_forensicrecords system state immediately before and after each request, so narrowing down suspicious activity becomes much easier."}),"\n",(0,t.jsx)(s.li,{children:"Mod_logiocharts all in and out traffic in bytes."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Apache gathers only two distinct types of logs: Access Log and Error Logs."}),"\n",(0,t.jsx)(s.h3,{id:"metrics-to-monitor",children:"Metrics to monitor"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Throughput and latency metrics","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Request Processing Time"}),"\n",(0,t.jsx)(s.li,{children:"Rate of Requests"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:"Resource Utilization and activity metrics"}),"\n",(0,t.jsx)(s.li,{children:"Host-level resource metrics"}),"\n",(0,t.jsx)(s.li,{children:"Errors"}),"\n"]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Name"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Description"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Busy workers"}),(0,t.jsx)(s.td,{children:"Total number of busy worker threads/processes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Idle workers"}),(0,t.jsx)(s.td,{children:"Total number of idle worker threads/processes"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Asynchronous connections: writing"}),(0,t.jsx)(s.td,{children:"Number of async connections in writing state (only applicable to event MPM)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Asynchronous connections: keep-alive"}),(0,t.jsx)(s.td,{children:"Number of async connections in keep-alive state (only applicable to event MPM)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Asynchronous connections: closing"}),(0,t.jsx)(s.td,{children:"Number of async connections in closing state (only applicable to event MPM)"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"worker-utilization",children:"Worker utilization"}),"\n",(0,t.jsx)(s.p,{children:'A worker is considered "busy" if it is in any of the following states: reading, writing, keep-alive, logging, closing, or gracefully finishing. An "idle" worker is not in any of the busy states;'}),"\n",(0,t.jsx)(s.p,{children:"If you consistently see a large number of idle workers, you may want to lower yourMinSpareServers(for the prefork MPM) orMinSpareThreads(for the worker and event MPMs) setting so that you are not sustaining a higher number of processes or threads than necessary to process your rate of traffic. Maintaining more processes or threads than you actually need will unncessarily exhaust system resources."}),"\n",(0,t.jsx)(s.p,{children:"If, on the other hand, you have very few idle workers at all times, you may see slower request processing times because your server continually needs to spawn new processes or threads to handle new requests, rather than making use of the idle threads or processes already on hand. If you see thetotal number of workers (busy + idle)approaching yourMaxRequestWorkerslimit, any additional requests that come in will end up in the TCP ListenBacklog (which has a maximum size ofListenBacklog), until the next worker thread becomes available."}),"\n",(0,t.jsx)(s.p,{children:"IncreasingMaxRequestWorkerscan help reduce the number of queued requests, but be careful not to set it unnecessarily high, as each additional worker thread or process requires additional system resources."}),"\n",(0,t.jsx)(s.h3,{id:"keep-alive-connections",children:"Keep-alive connections"}),"\n",(0,t.jsx)(s.p,{children:"If you see a lot of connections in a keep-alive state (indicated by aKon the mod_status scoreboard), you may be getting many requests from clients that don't make subsequent requests (and therefore do not help you reap the intended benefits of keep-alive connections). If you are not already using the event MPM, try switching to it if possible, because this MPM was designed to process keep-alive connections more efficiently."}),"\n",(0,t.jsx)(s.p,{children:"If youareusing the event MPM, Apache will expose the count of keep-alive async connections (any connections that are waiting for further events to signal that they are ready to get passed back to worker threads). If you see a high number of keep-alive async connections, combined with high CPU and memory utilization, you may want to lower the maximum number of simultaneous connections to the server (MaxRequestWorkers), and/or decrease theKeepAliveTimeoutto avoid holding connections open longer than necessary"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.datadoghq.com/blog/monitoring-apache-web-server-performance/#host-level-resource-metrics",children:(0,t.jsx)(s.strong,{children:"Host-level resource metrics"})})}),"\n",(0,t.jsx)(s.h3,{id:"memory-usage",children:"Memory usage"}),"\n",(0,t.jsx)(s.p,{children:"Memory is one of the most important resources to monitor when using Apache. If Apache runs out of memory, it will start swapping to disk, which greatly degrades performance. To guard against memory leakage (which is particularly important if you use mod_php), you could setMaxConnectionsPerChildto a high value (e.g. 1,000) rather than leaving it unbounded (by setting it to 0). By default, this directive is unbounded, which means that processes will never be forced to restart. If you do choose to set this directive, make sure not to set it too low, because restarting processes carries some overhead."}),"\n",(0,t.jsxs)(s.p,{children:["As mentioned above, memory use is also impacted by theMaxRequestWorkerssetting, which controls the maximum number of processes or threads running at any one time. The value ofMaxRequestWorkers(known asMaxClientsprior to version 2.4) should be calculated based on the maximum amount of memory you feel comfortable reserving for Apache processes. Using a tool like ",(0,t.jsx)(s.a,{href:"http://hisham.hm/htop/",children:"htop"})," should give you a rough idea of the actual, virtual, and cached memory usage of each Apache process. You can use this to calculate an estimate of what yourMaxRequestWorkersvalue should be."]}),"\n",(0,t.jsxs)(s.p,{children:["For example, if you observe that each Apache process uses roughly 50MB, and your server has 4GB of RAM, you would calculateMaxRequestWorkerswith a rough formula of:( (4000 - ",(0,t.jsx)(s.code,{children:"<OTHER_MEMORY_NEEDED>"}),") / 50 )"]}),"\n",(0,t.jsxs)(s.p,{children:["The value of ",(0,t.jsx)(s.code,{children:"<OTHER_MEMORY_NEEDED>"})," depends on whatever else you're running, such as an application server or MySQL. You can also use htop to check how much memory your system is using when Apache isnotrunning, and use this value as a basis for ",(0,t.jsx)(s.code,{children:"<OTHER_MEMORY_NEEDED>"}),". Make sure to add in a bit of a cushion as an extra precaution - it's better to be conservative about theMaxRequestWorkersvalue because you don't want to run out of memory and start swapping to disk. The ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/trunk/misc/perf-scaling.html#sizing-maxClients",children:"Apache docs"})," offer more advice about determining a good value forMaxRequestWorkers."]}),"\n",(0,t.jsxs)(s.p,{children:["If Apache is using too much memory, you should try to switch from prefork to the worker or event MPM if your system allows it, and if you do not need to use non-thread-safe libraries. You can also disable any unnecessary Apache modules (to check which ones are currently loaded, runhttpd -D DUMP_MODULESon ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/platform/rpm.html",children:"RPM-based systems"})," orapache2ctl -Mon ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/programs/apachectl.html",children:"other Unix-based systems"}),")."]}),"\n",(0,t.jsxs)(s.p,{children:["Lowering the number of processes created upon startup (",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/mod/mpm_common.html#startservers",children:"StartServers"}),"), and/or decreasingMaxSpareThreads(maximum allowed number of idle worker threads) can also help lower your memory footprint. Alternatively, you can add more memory to your servers, or ",(0,t.jsx)(s.a,{href:"https://wiki.apache.org/httpd/PerformanceScalingOut",children:"scale horizontally"})," to distribute the load among a higher number of servers."]}),"\n",(0,t.jsx)(s.h3,{id:"cpu-utilization",children:"CPU utilization"}),"\n",(0,t.jsxs)(s.p,{children:["If you see CPU usage continually rising on your Apache servers, this can indicate that you don't have enough resources to serve the current rate of requests. If you are running a database and/or application server on the same host as Apache, you should consider moving them onto separate machines. This gives you more flexibility to ",(0,t.jsx)(s.a,{href:"https://wiki.apache.org/httpd/PerformanceScalingOut",children:"scale each layer of your environment"}),"(database, application, and web servers) as needed. The more connections Apache needs to serve, the more threads or processes are created (depending on the MPM in use), each of which requires additional CPU."]}),"\n",(0,t.jsx)(s.h3,{id:"open-file-descriptors",children:"Open file descriptors"}),"\n",(0,t.jsxs)(s.p,{children:["Apache opens a file descriptor for each connection, as well as every log file. If your server has a large number of virtual hosts, you may run into a problem with your system-imposed limit, because Apache generates separate log files for each virtual host. ",(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/vhosts/fd-limits.html",children:"The documentation"})," has some useful guidelines about how you can either raise the limit on your system, or ",(0,t.jsx)(s.a,{href:"http://httpd.apache.org/docs/current/logs.html#virtualhost",children:"reduce the total number of logs created"}),", by writing all virtual host logs to the same file, and using a script like ",(0,t.jsx)(s.a,{href:"http://httpd.apache.org/docs/current/programs/split-logfile.html",children:"split-logfile"})," for downstream categorization"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.datadoghq.com/blog/monitoring-apache-web-server-performance/#errors",children:(0,t.jsx)(s.strong,{children:"Errors"})})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Name"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Description"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Availability"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Client error rate"}),(0,t.jsx)(s.td,{children:"Rate of 4xx client errors (e.g. 403 Forbidden, 404 Not Found) per second"}),(0,t.jsx)(s.td,{children:"Apache access log"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Server error rate"}),(0,t.jsx)(s.td,{children:"Rate of 5xx server-side errors (e.g. 500 Internal Server Error, 502 Bad Gateway, 503 Service Unavailable) per second"}),(0,t.jsx)(s.td,{children:"Apache access log"})]})]})]}),"\n",(0,t.jsx)(s.p,{children:"Apache will typically generate a 503 Service Unavailable status code when it is overloaded."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Apache 2.2"})," can generate one processes per second."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Apache 2.4"})," can generate up to 32 processes in on second. When minimum idle spare processes are less than MinSpareServers value, Apache start 1 process and wait for one second, If it's still less, Apache start 2 processes and wait a second, If it's still less Apache starts 4 processes and wait for a second, similarly Apache can start-up to 32 spare child processes per second and it repeated until minimum spare process exceeded MinSpareServers value."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.datadoghq.com/blog/monitoring-apache-web-server-performance/",children:(0,t.jsx)(s.strong,{children:"https://www.datadoghq.com/blog/monitoring-apache-web-server-performance/"})})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.datadoghq.com/blog/collect-apache-performance-metrics",children:"https://www.datadoghq.com/blog/collect-apache-performance-metrics"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://cwiki.apache.org/confluence/display/httpd/PerformanceScalingUp",children:"https://cwiki.apache.org/confluence/display/httpd/PerformanceScalingUp"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://cwiki.apache.org/confluence/display/httpd/PerformanceScalingOut",children:"https://cwiki.apache.org/confluence/display/httpd/PerformanceScalingOut"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://httpd.apache.org/docs/2.4/mod/mpm_common.html",children:"https://httpd.apache.org/docs/2.4/mod/mpm_common.html"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.liquidweb.com/kb/apache-performance-tuning-mpm-directives/#prefork",children:"https://www.liquidweb.com/kb/apache-performance-tuning-mpm-directives/#prefork"})}),"\n",(0,t.jsx)(s.h2,{id:"apache-tomcat",children:"Apache Tomcat"}),"\n",(0,t.jsx)(s.p,{children:'Apache Tomcat (or simply Tomcat) is an open source web server and servlet container developed by the Apache Software Foundation (ASF). Tomcat implements the Java Servlet and the JavaServer Pages (JSP) specifications from Oracle, and provides a "pure Java" HTTP web server environment for Java code to run in. In the simplest config Tomcat runs in a single operating system process. The process runs a Java virtual machine (JVM). Every single HTTP request from a browser to Tomcat is processed in the Tomcat process in a separate thread.'}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://howtodoinjava.com/tomcat/running-multiple-instances-of-tomcat-with-single-server-installation/",children:"Running Multiple Tomcats with Single Server Installation"})}),"\n",(0,t.jsx)(s.h2,{id:"difference-between-apache-http-server-and-apache-tomcat",children:"Difference between Apache HTTP Server and Apache Tomcat"}),"\n",(0,t.jsx)(s.p,{children:'The Apache "http" server is often referred to as Apache and is a server that handles http requests. Its job is to listen for requests and pass it on to the appropriate module to process. There are modules to process C, Java, PERL, PHP, Python, Ruby etc.'}),"\n",(0,t.jsx)(s.p,{children:"Apache Tomcat is a Java Servlet container. It runs as an Apache http server module. It constructs the HTML pages by executing Java Servlets and Java Server Pages and returns them to the http server."}),"\n",(0,t.jsx)(s.p,{children:"In simple words, Apache is a web-server meant to serve static web-pages. Example includes plain HTML pages (you can create a simple HTML page & Apache will serve it for you. Try using XAMPP or WAMP Server to see it for yourself on Windows machines). Facebook, Google, or Wordpress sites are some of the examples ."}),"\n",(0,t.jsx)(s.p,{children:"Apache Tomcat, on the other hand, is an application server meant to serve Java applications (Servlets, JSPs etc). You can serve web-pages as well through Tomcat, but it is less efficient at that as compared to Apache. IRCTC is one such website."}),"\n",(0,t.jsx)(s.p,{children:"Apache is a server, And Tomcat is a Container."}),"\n",(0,t.jsx)(s.p,{children:"Apache Takes The request from user, And handover to Tomcat. And Tomcat handover the request to suitable programs."}),"\n",(0,t.jsx)(s.p,{children:"Programs process the request and provide a response and request back to Tomcat, Then Tomcat handover request and response object to Apache server and Finally Apache give a response to user."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.quora.com/What-is-the-difference-between-apache-and-apache-tomcat",children:"https://www.quora.com/What-is-the-difference-between-apache-and-apache-tomcat"})}),"\n",(0,t.jsx)(s.h2,{id:"varnish",children:"Varnish"}),"\n",(0,t.jsxs)(s.p,{children:["Varnish is an ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/HTTP_accelerator",children:"HTTP accelerator"})," designed for content-heavy ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Dynamic_web_site",children:"dynamic web sites"})," as well as APIs. In contrast to other ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Web_accelerator",children:"web accelerators"}),", such as ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Squid_(software)",children:"Squid"}),", which began life as a client-side cache, or ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Apache_HTTP_server",children:"Apache"})," and ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Nginx",children:"nginx"}),", which are primarily origin servers, Varnish was designed as an HTTP accelerator. Varnish is focused exclusively on ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/HTTP",children:"HTTP"}),", unlike other ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Proxy_server",children:"proxy servers"})," that often support ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/FTP",children:"FTP"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/SMTP",children:"SMTP"})," and other ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Network_protocol",children:"network protocols"})]}),"\n",(0,t.jsxs)(s.p,{children:["Varnish is used by websites including ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Wikipedia",children:"Wikipedia"}),", online newspaper sites such as ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/The_New_York_Times",children:"The New York Times"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/The_Guardian",children:"The Guardian"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Gulf_News",children:"Gulf News"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/The_Hindu",children:"The Hindu"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Corriere_della_Sera",children:"Corriere della Sera"}),", social media and content sites such as ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Facebook",children:"Facebook"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Twitter",children:"Twitter"}),", ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Reddit",children:"Reddit"}),", Spotify, ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Vimeo",children:"Vimeo"}),", and ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Tumblr",children:"Tumblr"}),". In 2012, 5% of the top 10,000 sites in the web used the software."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Layer 7 reverse proxy"}),"\n",(0,t.jsx)(s.li,{children:"HTTP Cache"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Varnish_(software)",children:"https://en.wikipedia.org/wiki/Varnish_(software)"})})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},747674:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/DevOps-Others-Apache-Server-image1-16f762935625ad0f452b02051131cf0a.jpg"},370277:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/DevOps-Others-Apache-Server-image2-036698f8c35c18521da03e0ea1cca134.jpg"},443112:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/DevOps-Others-Apache-Server-image3-1bdfb5795f96c3858e22202db8c9117b.jpg"},28453:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>a});var n=r(296540);const t={},i=n.createContext(t);function o(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);