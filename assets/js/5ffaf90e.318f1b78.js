"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[45351],{885656:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"languages/sql/interview-questions","title":"Interview Questions","description":"Sample Schema - Ecommerce Analytics","source":"@site/docs/languages/sql/interview-questions.md","sourceDirName":"languages/sql","slug":"/languages/sql/interview-questions","permalink":"/languages/sql/interview-questions","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/languages/sql/interview-questions.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1761991530000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Functions","permalink":"/languages/sql/functions"},"next":{"title":"Intro","permalink":"/languages/sql/intro"}}');var t=r(474848),o=r(28453);const i={},d="Interview Questions",c={},a=[{value:"Sample Schema - Ecommerce Analytics",id:"sample-schema---ecommerce-analytics",level:2},{value:"Basic Questions (SQL Fundamentals)",id:"basic-questions-sql-fundamentals",level:2},{value:"Intermediate Questions (Joins, Aggregation, Filtering)",id:"intermediate-questions-joins-aggregation-filtering",level:2},{value:"Advanced Questions (Subqueries, CTEs, Window Functions)",id:"advanced-questions-subqueries-ctes-window-functions",level:2},{value:"Expert Questions (Optimization, Edge Cases, Tricky Logic)",id:"expert-questions-optimization-edge-cases-tricky-logic",level:2},{value:"Bonus Topics for Senior-Level Interviews",id:"bonus-topics-for-senior-level-interviews",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"interview-questions",children:"Interview Questions"})}),"\n",(0,t.jsx)(n.h2,{id:"sample-schema---ecommerce-analytics",children:"Sample Schema - Ecommerce Analytics"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"+-------------------+\n|   customers       |\n+-------------------+\n| customer_id (PK)  |\n| name              |\n| email             |\n| city              |\n| signup_date       |\n+-------------------+\n          |\n          | 1..* (a customer can place many orders)\n          |\n          v\n+-------------------+\n|     orders        |\n+-------------------+\n| order_id (PK)     |\n| customer_id (FK)  ---\x3e customers.customer_id\n| order_date        |\n| total_amount      |\n+-------------------+\n          |\n          | 1..* (an order has many order_items)\n          |\n          v\n+-------------------+\n|   order_items     |\n+-------------------+\n| order_item_id (PK)|\n| order_id (FK)     ---\x3e orders.order_id\n| product_id (FK)   ---\x3e products.product_id\n| quantity          |\n| price_per_unit    |\n+-------------------+\n\n+-------------------+\n|    products       |\n+-------------------+\n| product_id (PK)   |\n| name              |\n| category          |\n| price             |\n+-------------------+\n\n          ^\n          | (each item refers to one product)\n          |\n\n+-------------------+\n|    payments       |\n+-------------------+\n| payment_id (PK)   |\n| order_id (FK)     ---\x3e orders.order_id\n| payment_date      |\n| amount            |\n| payment_method    |\n+-------------------+\n"})}),"\n",(0,t.jsx)(n.h2,{id:"basic-questions-sql-fundamentals",children:"Basic Questions (SQL Fundamentals)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q1."})," Fetch all customers who signed up in 2024."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM customers\nWHERE EXTRACT(YEAR FROM signup_date) = 2024;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q2."})," Get the total number of orders placed by each customer."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, COUNT(*) AS order_count\nFROM orders\nGROUP BY customer_id;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q3."})," Find customers who haven\u2019t placed any orders."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT c.customer_id, c.name\nFROM customers c\nLEFT JOIN orders o ON c.customer_id = o.customer_id\nWHERE o.order_id IS NULL;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"intermediate-questions-joins-aggregation-filtering",children:"Intermediate Questions (Joins, Aggregation, Filtering)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q4."})," Retrieve top 3 products by total revenue."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT p.name, SUM(oi.quantity * oi.price_per_unit) AS revenue\nFROM order_items oi\nJOIN products p ON oi.product_id = p.product_id\nGROUP BY p.name\nORDER BY revenue DESC\nLIMIT 3;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q5."})," Get total revenue by product category for the current year."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT p.category, SUM(oi.quantity * oi.price_per_unit) AS total_revenue\nFROM order_items oi\nJOIN products p ON oi.product_id = p.product_id\nJOIN orders o ON oi.order_id = o.order_id\nWHERE EXTRACT(YEAR FROM o.order_date) = EXTRACT(YEAR FROM CURRENT_DATE)\nGROUP BY p.category;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q6."})," Find customers who have spent more than \u20b910,000 in total."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT c.customer_id, c.name, SUM(o.total_amount) AS total_spent\nFROM customers c\nJOIN orders o ON c.customer_id = o.customer_id\nGROUP BY c.customer_id, c.name\nHAVING SUM(o.total_amount) > 10000;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"advanced-questions-subqueries-ctes-window-functions",children:"Advanced Questions (Subqueries, CTEs, Window Functions)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q7."})," Find the latest order for each customer."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, order_id, order_date\nFROM (\n  SELECT customer_id, order_id, order_date,\n         ROW_NUMBER() OVER (PARTITION BY customer_id ORDER BY order_date DESC) AS rn\n  FROM orders\n) t\nWHERE rn = 1;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q8."})," Get the top 5 customers by lifetime value (LTV)."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT c.name, SUM(o.total_amount) AS ltv\nFROM customers c\nJOIN orders o ON c.customer_id = o.customer_id\nGROUP BY c.name\nORDER BY ltv DESC\nLIMIT 5;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q9."})," Find the percentage contribution of each category to total revenue."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"WITH category_revenue AS (\n  SELECT p.category, SUM(oi.quantity * oi.price_per_unit) AS revenue\n  FROM order_items oi\n  JOIN products p ON oi.product_id = p.product_id\n  GROUP BY p.category\n)\nSELECT category,\n       revenue,\n       ROUND(100 * revenue / SUM(revenue) OVER (), 2) AS pct_of_total\nFROM category_revenue;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"expert-questions-optimization-edge-cases-tricky-logic",children:"Expert Questions (Optimization, Edge Cases, Tricky Logic)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q10."})," Identify orders where payment is missing or partial."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT o.order_id, o.total_amount, COALESCE(SUM(p.amount), 0) AS paid_amount\nFROM orders o\nLEFT JOIN payments p ON o.order_id = p.order_id\nGROUP BY o.order_id, o.total_amount\nHAVING COALESCE(SUM(p.amount), 0) < o.total_amount;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q11."})," For each customer, show month-over-month growth in spending."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"WITH monthly_spend AS (\n  SELECT customer_id,\n         DATE_TRUNC('month', order_date) AS month,\n         SUM(total_amount) AS spend\n  FROM orders\n  GROUP BY customer_id, DATE_TRUNC('month', order_date)\n)\nSELECT customer_id,\n       month,\n       spend,\n       spend - LAG(spend) OVER (PARTITION BY customer_id ORDER BY month) AS growth\nFROM monthly_spend;\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Q12."})," Find the most popular product category per city."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"WITH city_category_sales AS (\n  SELECT c.city, p.category, SUM(oi.quantity) AS qty\n  FROM order_items oi\n  JOIN orders o ON oi.order_id = o.order_id\n  JOIN customers c ON o.customer_id = c.customer_id\n  JOIN products p ON oi.product_id = p.product_id\n  GROUP BY c.city, p.category\n),\nranked AS (\n  SELECT *, ROW_NUMBER() OVER (PARTITION BY city ORDER BY qty DESC) AS rn\n  FROM city_category_sales\n)\nSELECT city, category, qty\nFROM ranked\nWHERE rn = 1;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"bonus-topics-for-senior-level-interviews",children:"Bonus Topics for Senior-Level Interviews"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Topic"}),(0,t.jsx)(n.th,{children:"Sample Question"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Indexes"})}),(0,t.jsxs)(n.td,{children:["Explain when to use composite indexes and how they affect ",(0,t.jsx)(n.code,{children:"WHERE"})," clause performance."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Query Optimization"})}),(0,t.jsx)(n.td,{children:"How would you debug a slow query that joins 5 tables?"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Transactions"})}),(0,t.jsx)(n.td,{children:"What happens if one statement in a transaction fails?"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Isolation Levels"})}),(0,t.jsx)(n.td,{children:"Explain \u201cphantom read\u201d and how to prevent it."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Partitioning"})}),(0,t.jsxs)(n.td,{children:["How would you partition the ",(0,t.jsx)(n.code,{children:"orders"})," table by year for performance?"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"CTE vs Subquery"})}),(0,t.jsx)(n.td,{children:"When to prefer one over the other?"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Window Functions"})}),(0,t.jsxs)(n.td,{children:["How are ",(0,t.jsx)(n.code,{children:"ROW_NUMBER()"})," and ",(0,t.jsx)(n.code,{children:"RANK()"})," different?"]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://chatgpt.com/share/69019e55-5d84-8008-9b05-83dd7f4143e5",children:"ChatGPT - SQL interview questions"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>d});var s=r(296540);const t={},o=s.createContext(t);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);