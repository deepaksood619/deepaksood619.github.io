"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[5191],{63487:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"computer-science/interview-question/system-design-mmog-game","title":"System Design - MMOG - Game","description":"System design: Design Multiplayer game","source":"@site/docs/computer-science/interview-question/system-design-mmog-game.md","sourceDirName":"computer-science/interview-question","slug":"/computer-science/interview-question/system-design-mmog-game","permalink":"/computer-science/interview-question/system-design-mmog-game","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/computer-science/interview-question/system-design-mmog-game.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1707138374000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"System Design - Messenger / WhatsApp","permalink":"/computer-science/interview-question/system-design-messenger-whatsapp"},"next":{"title":"System Design - Others","permalink":"/computer-science/interview-question/system-design-others"}}');var t=s(474848),r=s(28453);const a={},l="System Design - MMOG - Game",c={},d=[{value:"Game Loop",id:"game-loop",level:2},{value:"Physics Engines",id:"physics-engines",level:2},{value:"Authoritative Server",id:"authoritative-server",level:2},{value:"Networking",id:"networking",level:2},{value:"Handling states, corner cases, rules for objects",id:"handling-states-corner-cases-rules-for-objects",level:2},{value:"Patch Servers",id:"patch-servers",level:2},{value:"Game State Backup",id:"game-state-backup",level:2},{value:"CDN",id:"cdn",level:2},{value:"Database",id:"database",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"system-design---mmog---game",children:"System Design - MMOG - Game"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.youtube.com/playlist?list=PLkQkbY7JNJuCoOw3epgKcNIU6rFri4iQk",children:"System design: Design Multiplayer game"})}),"\n",(0,t.jsx)(n.h2,{id:"game-loop",children:"Game Loop"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(128692).A+"",width:"978",height:"832"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"while (true) {\ncheck_input()\nupdate_game_state()\nrender_screen()\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"physics-engines",children:"Physics Engines"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Unity"}),"\n",(0,t.jsx)(n.li,{children:"Unreal Engine"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(930499).A+"",width:"1162",height:"452"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Strategic games"}),"\n",(0,t.jsx)(n.li,{children:"Slow turn games"}),"\n",(0,t.jsx)(n.li,{children:"First person games"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"authoritative-server",children:"Authoritative Server"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Holds all the state information and validates each state information with it's own state"}),"\n",(0,t.jsx)(n.li,{children:"No one can hack the client and run mod commands"}),"\n",(0,t.jsx)(n.li,{children:"Therefore can't have peer to peer connection between players"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"networking",children:"Networking"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Deterministic Lock Step"})}),"\n",(0,t.jsx)(n.li,{children:"Sends only input only and not the new state of game character"}),"\n",(0,t.jsx)(n.li,{children:"Encode each bit for each input thereby saving more bandwidth"}),"\n",(0,t.jsx)(n.li,{children:"Using this other side can simulate their own environment"}),"\n",(0,t.jsx)(n.li,{children:"Sampling size - 60 / sec"}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"TCP (Head of line blocking), therefore can't use TCP"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Playout Buffer (keep 5 sec in buffer like in youtube, netflix, that keeps preloaded some data beforehand, so intermittent network can be smoothened)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Can have a buffer space (park space) of 50 ms so the overall experience is smooth"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Therefore instead of TCP use UDP,"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(549446).A+"",width:"1101",height:"434"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Send previous inputs in all packets"}),"\n",(0,t.jsxs)(n.li,{children:["Add timestamps for replay- ",(0,t.jsx)(n.strong,{children:"State Synchronization"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Sync state of the environments object","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Object State","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Position"}),"\n",(0,t.jsx)(n.li,{children:"Orientation"}),"\n",(0,t.jsx)(n.li,{children:"Linear Velocity"}),"\n",(0,t.jsx)(n.li,{children:"Angular Velocity"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Jitters and lagging"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Prediction"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Linear Interpolation"}),"\n",(0,t.jsx)(n.li,{children:"Polar Interpolation"}),"\n",(0,t.jsx)(n.li,{children:"Hermite Interpolation"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"handling-states-corner-cases-rules-for-objects",children:"Handling states, corner cases, rules for objects"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Via if-else statement","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Not maintainable"}),"\n",(0,t.jsx)(n.li,{children:"Not scalable"}),"\n",(0,t.jsx)(n.li,{children:"No design pattern"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(42797).A+"",width:"1099",height:"674"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(915696).A+"",width:"1268",height:"788"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(630655).A+"",width:"1099",height:"577"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(810658).A+"",width:"1405",height:"878"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"World Server"}),"\n",(0,t.jsx)(n.li,{children:"Game /Area Server"}),"\n",(0,t.jsx)(n.li,{children:"Data Structure - Map Template"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image",src:s(600281).A+"",width:"1100",height:"946"})}),"\n",(0,t.jsx)(n.h2,{id:"patch-servers",children:"Patch Servers"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Everyone should be in same version in MMOG"}),"\n",(0,t.jsx)(n.li,{children:"Real time updates"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"game-state-backup",children:"Game State Backup"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Important bits"}),"\n",(0,t.jsx)(n.li,{children:"Only if changed"}),"\n",(0,t.jsx)(n.li,{children:"Individual"}),"\n",(0,t.jsx)(n.li,{children:"Async"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"cdn",children:"CDN"}),"\n",(0,t.jsx)(n.p,{children:"Game Sprites"}),"\n",(0,t.jsx)(n.h2,{id:"database",children:"Database"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"SQL"}),"\n",(0,t.jsx)(n.li,{children:"Sharded SQL"}),"\n",(0,t.jsx)(n.li,{children:"NoSQL"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},128692:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image1-0b5fa7cb0ab29cdf63452bca1df05fba.jpg"},930499:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image2-173526ff51f403f9fbcac1db99ed07f6.jpg"},549446:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image3-4b2b568661c54d29a406e77db2892ad6.jpg"},42797:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image4-1f3c2a18624be1f767ca872b9701b378.jpg"},915696:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image5-9ecb57e1659aa64802c7f673e0285e33.jpg"},630655:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image6-62ce4a1d006cb9e5acb1a793f35110a2.jpg"},810658:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image7-b7a3dd884bc5b5be164d72416be43643.jpg"},600281:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/System-Design-MMOG-Game-image8-25aea4c0855481219f52f60d2466dc4f.jpg"},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(296540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);