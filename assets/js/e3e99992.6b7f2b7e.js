"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[3282],{346461:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"devops/docker/service-configuration-reference","title":"Service Configuration Reference","description":"build - Configuration options that are applied at build time","source":"@site/docs/devops/docker/service-configuration-reference.md","sourceDirName":"devops/docker","slug":"/devops/docker/service-configuration-reference","permalink":"/devops/docker/service-configuration-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/docker/service-configuration-reference.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1701793554000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Others","permalink":"/devops/docker/others"},"next":{"title":"Stack / Swarm","permalink":"/devops/docker/stack-swarm"}}');var r=i(474848),c=i(28453);const o={},l="Service Configuration Reference",d={},t=[{value:"build - Configuration options that are applied at build time",id:"build---configuration-options-that-are-applied-at-build-time",level:2},{value:"cap_add, cap_drop",id:"cap_add-cap_drop",level:2},{value:"command",id:"command",level:2},{value:"configs",id:"configs",level:2},{value:"cgroup_parent",id:"cgroup_parent",level:2},{value:"container_name",id:"container_name",level:2},{value:"credential_spec",id:"credential_spec",level:2},{value:"deploy",id:"deploy",level:2},{value:"1. endpoint_mode (vip / dnsrr)",id:"1-endpoint_mode-vip--dnsrr",level:3},{value:"2. labels",id:"2-labels",level:3},{value:"3. mode",id:"3-mode",level:3},{value:"4. placement",id:"4-placement",level:3},{value:"5. replicas",id:"5-replicas",level:3},{value:"6. resources",id:"6-resources",level:3},{value:"7. Out Of Memory Exceptions (OOME)",id:"7-out-of-memory-exceptions-oome",level:3},{value:"8. restart_policy",id:"8-restart_policy",level:3},{value:"9. rollback_config",id:"9-rollback_config",level:3},{value:"10. update_config",id:"10-update_config",level:3},{value:"Others",id:"others",level:2},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"service-configuration-reference",children:"Service Configuration Reference"})}),"\n",(0,r.jsx)(n.h2,{id:"build---configuration-options-that-are-applied-at-build-time",children:"build - Configuration options that are applied at build time"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"context - Either a path to a directory containing a Dockerfile, or a url to a git repository"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"dockerfile - Alternate Dockerfile"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"args - Add build arguments, which are environment variables accessible only during the build process"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"cache_from - A list of images that the engine uses for cache resolution"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["labels - Add metadata to the resulting image using ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/engine/userguide/labels-custom-metadata/",children:"Docker labels"}),". You can use either an array or a dictionary."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["shm_size - Set the size of the/dev/shmpartition for this build's containers. Specify as an integer value representing the number of bytes or as a string expressing a ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#specifying-byte-values",children:"byte value"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"target - Build the specified stage as defined inside theDockerfile"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cap_add-cap_drop",children:"cap_add, cap_drop"}),"\n",(0,r.jsx)(n.p,{children:"Add or drop container capabilities"}),"\n",(0,r.jsx)(n.h2,{id:"command",children:"command"}),"\n",(0,r.jsx)(n.p,{children:"Override the default command."}),"\n",(0,r.jsx)(n.h2,{id:"configs",children:"configs"}),"\n",(0,r.jsx)(n.p,{children:"Grant access to configs on a per-service basis using the per-serviceconfigsconfiguration."}),"\n",(0,r.jsx)(n.h2,{id:"cgroup_parent",children:"cgroup_parent"}),"\n",(0,r.jsx)(n.p,{children:"Specify an optional parent cgroup for the container."}),"\n",(0,r.jsx)(n.h2,{id:"container_name",children:"container_name"}),"\n",(0,r.jsx)(n.p,{children:"Specify a custom container name, rather than a generated default name."}),"\n",(0,r.jsx)(n.h2,{id:"credential_spec",children:"credential_spec"}),"\n",(0,r.jsx)(n.p,{children:"Configure the credential spec for managed service account."}),"\n",(0,r.jsx)(n.h2,{id:"deploy",children:"deploy"}),"\n",(0,r.jsxs)(n.p,{children:["Specify configuration related to the deployment and running of services. This only takes effect when deploying to a ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/engine/swarm/",children:"swarm"})," with ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/stack_deploy/",children:"docker stack deploy"}),", and is ignored bydocker-compose upanddocker-compose run."]}),"\n",(0,r.jsx)(n.h3,{id:"1-endpoint_mode-vip--dnsrr",children:"1. endpoint_mode (vip / dnsrr)"}),"\n",(0,r.jsx)(n.p,{children:"Specify a service discovery method for external clients connecting to a swarm."}),"\n",(0,r.jsx)(n.h3,{id:"2-labels",children:"2. labels"}),"\n",(0,r.jsxs)(n.p,{children:["Specify labels for the service. These labels are ",(0,r.jsx)(n.em,{children:"only"}),"set on the service, and ",(0,r.jsx)(n.em,{children:"not"}),"on any containers for the service."]}),"\n",(0,r.jsx)(n.h3,{id:"3-mode",children:"3. mode"}),"\n",(0,r.jsx)(n.p,{children:"Eitherglobal(exactly one container per swarm node) orreplicated(a specified number of containers). The default isreplicated."}),"\n",(0,r.jsx)(n.h3,{id:"4-placement",children:"4. placement"}),"\n",(0,r.jsx)(n.p,{children:"Specify placement of constraints and preferences."}),"\n",(0,r.jsx)(n.h3,{id:"5-replicas",children:"5. replicas"}),"\n",(0,r.jsx)(n.p,{children:"If the service isreplicated(which is the default), specify the number of containers that should be running at any given time."}),"\n",(0,r.jsx)(n.h3,{id:"6-resources",children:"6. resources"}),"\n",(0,r.jsx)(n.p,{children:"Configures resource constraints."}),"\n",(0,r.jsx)(n.p,{children:"deploy:\nresources:\nlimits:\ncpus: '0.50'\nmemory: 50M\nreservations:\ncpus: '0.25'\nmemory: 20M"}),"\n",(0,r.jsx)(n.h3,{id:"7-out-of-memory-exceptions-oome",children:"7. Out Of Memory Exceptions (OOME)"}),"\n",(0,r.jsx)(n.p,{children:"If your services or containers attempt to use more memory than the system has available, you may experience an Out Of Memory Exception (OOME) and a container, or the Docker daemon, might be killed by the kernel OOM killer."}),"\n",(0,r.jsx)(n.h3,{id:"8-restart_policy",children:"8. restart_policy"}),"\n",(0,r.jsxs)(n.p,{children:["Configures if and how to restart containers when they exit. Replaces ",(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/compose-file-v2/#orig-resources",children:"restart"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"condition - none/on-failure/any (default: any)"}),"\n",(0,r.jsx)(n.li,{children:"delay"}),"\n",(0,r.jsx)(n.li,{children:"max_attempts"}),"\n",(0,r.jsx)(n.li,{children:"window"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"9-rollback_config",children:"9. rollback_config"}),"\n",(0,r.jsx)(n.h3,{id:"10-update_config",children:"10. update_config"}),"\n",(0,r.jsx)(n.h2,{id:"others",children:"Others"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"devices"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"depends_on"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"dns"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"dns_search"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"tmpfs"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"entrypoint"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"env_file"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"environment"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"expose"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"external_links"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"extra_hosts"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"healthcheck"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"image"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"init"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"isolation"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"labels"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"links"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"logging"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"network_mode"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"networks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"aliases"}),"\n",(0,r.jsx)(n.li,{children:"ipv4, ipv6 addresses"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"pid"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"ports"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"secrets"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"security_opt"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"stop_grace_period"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"stop_signal"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"sysctls"}),"\n",(0,r.jsx)(n.p,{children:"sysctls:\nnet.core.somaxconn: 1024\nnet.ipv4.tcp_syncookies: 0"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"ulimits"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"userns_mode"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"volumes"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"restart"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"domainname, hostname, ipc, mac_address, privileged, read_only, shm_size, stdin_open, tty, user, working_dir"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Not supported for docker stack deploy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#build",children:"build"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#cgroup_parent",children:"cgroup_parent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#container_name",children:"container_name"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#devices",children:"devices"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#tmpfs",children:"tmpfs"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#external_links",children:"external_links"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#links",children:"links"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#network_mode",children:"network_mode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#restart",children:"restart"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#security_opt",children:"security_opt"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#stop_signal",children:"stop_signal"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#sysctls",children:"sysctls"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file/#userns_mode",children:"userns_mode"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.docker.com/compose/compose-file",children:"https://docs.docker.com/compose/compose-file"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(296540);const r={},c=s.createContext(r);function o(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);