"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[33618],{220157:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"devops/docker/docker-commands","title":"Docker Commands","description":"Installation","source":"@site/docs/devops/docker/docker-commands.md","sourceDirName":"devops/docker","slug":"/devops/docker/docker-commands","permalink":"/devops/docker/docker-commands","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/docker/docker-commands.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1754103225000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Containers","permalink":"/devops/docker/containers"},"next":{"title":"docker-compose example","permalink":"/devops/docker/docker-compose-example"}}');var s=r(474848),c=r(28453);const d={},i="Docker Commands",a={},l=[{value:"Installation",id:"installation",level:2},{value:"Containers",id:"containers",level:2},{value:"List",id:"list",level:3},{value:"Lifecycle",id:"lifecycle",level:3},{value:"Starting and Stopping",id:"starting-and-stopping",level:2},{value:"Info",id:"info",level:2},{value:"Example",id:"example",level:3},{value:"docker logs rotate",id:"docker-logs-rotate",level:3},{value:"Images",id:"images",level:2},{value:"Lifecycle",id:"lifecycle-1",level:3},{value:"Info",id:"info-1",level:3},{value:"Network",id:"network",level:2},{value:"Volumes",id:"volumes",level:2},{value:"Docker CLI",id:"docker-cli",level:2},{value:"Cleanup Commands",id:"cleanup-commands",level:2},{value:"Base Commands",id:"base-commands",level:2},{value:"Other Commands",id:"other-commands",level:2},{value:"Scaling",id:"scaling",level:2}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"docker-commands",children:"Docker Commands"})}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'sudo apt-get update\n\nsudo apt-get -y install docker.io\n\n--add-host="" : Add a line to /etc/hosts (host:IP)\n\n# https://docs.docker.com/engine/install/ubuntu\n\nsudo service docker start\n\nsudo usermod -a -G docker ubuntu\n\nsudo apt install docker-compose\n\nbrew install docker-compose\n'})}),"\n",(0,s.jsx)(n.h2,{id:"containers",children:"Containers"}),"\n",(0,s.jsx)(n.h3,{id:"list",children:"List"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker image ls -all #show all images\ndocker container ls --all #show all containers\ndocker info #Display system-wide information\n\ndocker info --format '{{.LoggingDriver}}'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"lifecycle",children:"Lifecycle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/create",children:"docker create"})," creates a container but does not start it."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/rename/",children:"docker rename"})," allows the container to be renamed."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/run",children:"docker run"})," creates and starts a container in one operation."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"--env, -e = Set environment variables"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run <image_name>\n\n# override entrypoint\ndocker run --rm -it --entrypoint /bin/bash cr0hn/festin\ndocker run --rm -it -p=8080:8080 inventree/inventree\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/rm",children:"docker rm"})," deletes a container."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/update/",children:"docker update"})," updates a container's resource limit"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"starting-and-stopping",children:"Starting and Stopping"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/start",children:"docker start"})," starts a container so it is running"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/stop",children:"docker stop"})," stops a running container"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/restart",children:"docker restart"})," stops and starts a container"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/pause/",children:"docker pause"}),' pauses a running container, "freezing" it in place']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/unpause/",children:"docker unpause"})," will unpause a running container"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/wait",children:"docker wait"})," blocks until running container stops"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/kill",children:"docker kill"})," sends a SIGKILL to a running container"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/attach",children:"docker attach"})," will connect to a running container"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker start **CONTAINER ID**\n"})}),"\n",(0,s.jsx)(n.h2,{id:"info",children:"Info"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/ps",children:"docker ps"})," shows running containers."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Options:"}),"\n",(0,s.jsx)(n.p,{children:"-s (for getting docker ip)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/logs",children:"docker logs"})," gets logs from container. You can use a custom log driver, but logs is only available for json-file and journald"]}),"\n",(0,s.jsx)(n.li,{}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Options:"}),"\n",(0,s.jsx)(n.p,{children:"--details Show extra details provided to logs"}),"\n",(0,s.jsx)(n.p,{children:"-f, --follow Follow log output"}),"\n",(0,s.jsx)(n.p,{children:"--since string Show logs since timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)"}),"\n",(0,s.jsx)(n.p,{children:'--tail string Number of lines to show from the end of the logs (default "all")'}),"\n",(0,s.jsx)(n.p,{children:"-t, --timestamps Show timestamps"}),"\n",(0,s.jsx)(n.p,{children:"--until string Show logs before a timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)"}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker logs -t --since 2018-08-02T00:00:00 example-prod\n\ndocker logs --timestamps --since='2019-04-22T14:40:36.750121287Z' --until='2019-04-22T15:30:36.750121287Z' kafkaconsumer_kafka-smap-consumer.1.7uq0n8eysgxf5wnx0pbu4lwcx\n\ndocker logs smap-archiver > stdout.log 2>stderr.log\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/inspect",children:"docker inspect"})," looks at all the info on a container (including IP address)."]})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/events",children:"docker events"})," gets events from container."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/port",children:"docker port"})," ",(0,s.jsx)(n.code,{children:"<container_name>"})," shows public facing port of container."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/top",children:"docker top"})," shows running processes in container."]}),"\n",(0,s.jsx)(n.code,{children:"- docker top <container_name>"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/stats",children:"docker stats"})," shows containers' resource usage statistics."]})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/diff",children:"docker diff"})," shows changed files in the container's FS."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"docker secret"})," - Manage docker secrets","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"create, inspect, ls, rm"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"docker-logs-rotate",children:"docker logs rotate"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'cat daemon.json\n{\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "250m",\n    "max-file": "3"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://forums.docker.com/t/how-to-limit-or-rotate-docker-container-logs/112378/6",children:"How to limit or rotate Docker container logs? - General - Docker Community Forums"})}),"\n",(0,s.jsx)(n.h2,{id:"images",children:"Images"}),"\n",(0,s.jsxs)(n.p,{children:["Images are just ",(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/understanding-docker/#how-does-a-docker-image-work",children:"templates for docker containers"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://hub.docker.com/r/ealen/echo-server",children:"https://hub.docker.com/r/ealen/echo-server"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://hub.docker.com/_/hello-world",children:"https://hub.docker.com/_/hello-world"})}),"\n",(0,s.jsx)(n.h3,{id:"lifecycle-1",children:"Lifecycle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/images",children:"docker images"})," shows all images."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/import",children:"docker import"})," creates an image from a tarball."]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/build",children:"docker build"})," creates image from Dockerfile."]})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker build -t <image-tag> ."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker build -f docker/Dockerfile.dev -t partners-api:latest ."})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/commit",children:"docker commit"})," creates image from a container, pausing it temporarily if it is running."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/rmi",children:"docker rmi"})," removes an image."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/load",children:"docker load"})," loads an image from a tar archive as STDIN, including images and tags (as of 0.7)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/save",children:"docker save"})," saves an image to a tar archive stream to STDOUT with all parent layers, tags & versions (as of 0.7)."]}),"\n",(0,s.jsx)(n.li,{children:"docker push"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker push gcr.io/example-data-archiver/azure-vote-front:v1"})}),"\n",(0,s.jsx)(n.h3,{id:"info-1",children:"Info"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/history",children:"docker history"})," shows history of image."]})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/tag",children:"docker tag"})," tags an image to a name (local or registry)."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo docker tag monolith:1.0.0 deepaksood619/monolith:1.0.0\n\ndocker tag azure-vote-front gcr.io/example-data-archiver/azure-vote-front:v1\n"})}),"\n",(0,s.jsx)(n.h2,{id:"network",children:"Network"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker network connect - Connect a container to a network\ndocker network create - Create a network\n\ndocker network create --subset=172.18.0.0/16 example-docker\n\ndocker network disconnect - Disconnect a container from a network\ndocker network inspect - Display detailed information on one or more networks\ndocker network ls - List networks\ndocker network prune - Remove all unused networks\ndocker network rm - Remove one or more networks\n"})}),"\n",(0,s.jsx)(n.h2,{id:"volumes",children:"Volumes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /var/lib/docker/volumes/druid-volume/_data/segment-cache\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/volume_create/",children:"docker volume create"})}),(0,s.jsx)(n.td,{children:"Create a volume"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/volume_inspect/",children:"docker volume inspect"})}),(0,s.jsx)(n.td,{children:"Display detailed information on one or more volumes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/volume_ls/",children:"docker volume ls"})}),(0,s.jsx)(n.td,{children:"List volumes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/volume_prune/",children:"docker volume prune"})}),(0,s.jsx)(n.td,{children:"Remove all unused local volumes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/volume_rm/",children:"docker volume rm"})}),(0,s.jsx)(n.td,{children:"Remove one or more volumes"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"docker-cli",children:"Docker CLI"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker cp <containerId>:/file/path/within/container /host/path/target"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker cp from_local_system_path to_docker_container_path"})}),"\n",(0,s.jsx)(n.h2,{id:"cleanup-commands",children:"Cleanup Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker stop $(docker ps -aq) #stop all running containers\ndocker rmi $(docker images -q) #Delete all images (unused)\ndocker rm -f $(docker ps -a -q) #Delete all containers\ndocker images -q | xargs docker rmi #remove all unused images\n\ndocker rmi $(docker images -q) #Delete all images\ndocker-compose config #Check if environment variables are loaded in source\ndocker ps -aq -f status=exited #Show all stopped containers\n\ndocker rm $(docker ps -a -f status=exited -q) #docker-remove-exited-containers\n\ndocker volume prune #remove docker volumes\ndocker volume rm $(docker volume ls -f dangling=true -q) #docker-remove-dangling-volumes\n\ndocker images -qf dangling=true | xargs docker rmi #remove all dangling images\n\ndocker builder prune -f\n\ndocker system prune -a #clean all, Can kill container in kubernetes cluster\n\n## Kubernetes Cleanup Commands\n\ndocker system df #check volume status (docker sizes)**\n\ndocker container prune\ndocker image prune -a\n\n#Section Docker\nalias docker-clean='docker rm $(docker ps -a -f status=exited -q); docker volume rm $(docker volume ls -f dangling=true -q); docker images -qf dangling=true | xargs docker rmi'\nalias docker-remove-all-images='docker rmi $(docker images -a -q)'\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/onfido/k8s-cleanup",children:"https://github.com/onfido/k8s-cleanup"})}),"\n",(0,s.jsx)(n.h2,{id:"base-commands",children:"Base Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'docker run --rm -it -v $PWD:/build ubuntu:18.04 #create a docker image of ubuntu:18.04\ndocker run --rm -it ubuntu:18.04 #create a docker image of ubuntu:18.04\ndocker run --rm -it exampletech/react-awscli:1.0.0 /bin/sh\ndocker run --rm -it -p=8080:8080 volttron_docker_image /bin/bash\ndocker commit suspicious_wescoff volttron_docker_image\ndocker run -i -t volttron_docker_image /bin/bash\n\nExit a container - CTRL + D\n\ndocker run -it --network="host" --name mynodered nodered/node-red-docker #for binding docker to localhost, published ports doesn\'t work when --network="host" is used\n'})}),"\n",(0,s.jsx)(n.h2,{id:"other-commands",children:"Other Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec -it --user root temp-emqx /bin/sh #get inside docker container as user root\nwhoami #get logged in user inside docker container\nsudo systemctl restart docker (When docker gets hanged)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"scaling",children:"Scaling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d --scale tasks_runner=5\n# don't use container_name in docker-compose\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>i});var o=r(296540);const s={},c=o.createContext(s);function d(e){const n=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);