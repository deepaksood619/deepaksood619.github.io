"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[45347],{126401:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"databases/concepts/core-concepts","title":"Core Concepts","description":"CRUD - Create, Read, Update, Delete","source":"@site/docs/databases/concepts/core-concepts.md","sourceDirName":"databases/concepts","slug":"/databases/concepts/core-concepts","permalink":"/databases/concepts/core-concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases/concepts/core-concepts.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1745778295000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Concurrency Control","permalink":"/databases/concepts/concurrency-control"},"next":{"title":"Database Workloads","permalink":"/databases/concepts/database-workloads"}}');var i=s(474848),a=s(28453);const r={},o="Core Concepts",l={},d=[{value:"Idempotent - UUID",id:"idempotent---uuid",level:2},{value:"Transaction Log",id:"transaction-log",level:2},{value:"Types of database log records",id:"types-of-database-log-records",level:2},{value:"Prepared Statement",id:"prepared-statement",level:2},{value:"Cursor",id:"cursor",level:2},{value:"Pros",id:"pros",level:2},{value:"Cons",id:"cons",level:2},{value:"LIMIT and OFFSET",id:"limit-and-offset",level:2},{value:"Cursor Pagination vs Offset Pagination",id:"cursor-pagination-vs-offset-pagination",level:2},{value:"Pros",id:"pros-1",level:3},{value:"Cons",id:"cons-1",level:3}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"core-concepts",children:"Core Concepts"})}),"\n",(0,i.jsx)(t.p,{children:"CRUD - Create, Read, Update, Delete"}),"\n",(0,i.jsx)(t.p,{children:"INSERT, SELECT, UPDATE, DELETE"}),"\n",(0,i.jsx)(t.h2,{id:"idempotent---uuid",children:"Idempotent - UUID"}),"\n",(0,i.jsx)(t.p,{children:"Try to make all statements Idempotent"}),"\n",(0,i.jsx)(t.h2,{id:"transaction-log",children:"Transaction Log"}),"\n",(0,i.jsxs)(t.p,{children:["In the field of ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Database",children:"databases"})," in ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Computer_science",children:"computer science"}),", atransaction log(alsotransaction journal, database log, binary logoraudit trail) is a history of actions executed by a ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Database_management_system",children:"database management system"})," used to guarantee ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/ACID",children:"ACID"})," properties over ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Crash_(computing)",children:"crashes"})," or hardware failures. Physically, a log is a ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Computer_file",children:"file"})," listing changes to the database, stored in a stable storage format."]}),"\n",(0,i.jsxs)(t.p,{children:["If, after a start, the database is found in an ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Consistency_(database_systems)",children:"inconsistent"})," state or not been shut down properly, the database management system reviews the database logs for ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Commit_(data_management)",children:"uncommitted"})," transactions and ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Rollback_(data_management)",children:"rolls back"})," the changes made by these ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Database_transaction",children:"transactions"}),". Additionally, all transactions that are already committed but whose changes were not yet materialized in the database are re-applied. Both are done to ensure ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Atomicity_(database_systems)",children:"atomicity"})," and ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Durability_(computer_science)",children:"durability"})," of transactions."]}),"\n",(0,i.jsx)(t.h2,{id:"types-of-database-log-records",children:"Types of database log records"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Update log record"}),"\n",(0,i.jsx)(t.li,{children:"Compensation log record"}),"\n",(0,i.jsx)(t.li,{children:"Commit record"}),"\n",(0,i.jsx)(t.li,{children:"Abort record"}),"\n",(0,i.jsx)(t.li,{children:"Checkpoint record"}),"\n",(0,i.jsx)(t.li,{children:"Completion record"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Transaction_log",children:"https://en.wikipedia.org/wiki/Transaction_log"})}),"\n",(0,i.jsx)(t.h2,{id:"prepared-statement",children:"Prepared Statement"}),"\n",(0,i.jsxs)(t.p,{children:["In ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Database_management_system",children:"database management systems"}),"(DBMS), aprepared statementorparameterized statementis a feature used to execute the same or similar database statements repeatedly with high efficiency. Typically used with ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/SQL",children:"SQL"})," statements such as queries or updates, the prepared statement takes the form of a ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Template_processor",children:"template"})," into which certain constant values are substituted during each execution."]}),"\n",(0,i.jsx)(t.p,{children:"The typical workflow of using a prepared statement is as follows:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Prepare:"}),' At first, the application creates the statement template and send it to the DBMS. Certain values are left unspecified, calledparameters, placeholdersorbind variables(labelled "?" below):']}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"INSERT INTO products(name, price)VALUES(?,?);\n"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Then, the DBMS compiles (parses, ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Query_optimization",children:"optimizes"})," and translates) the statement template, and stores the result without executing it."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Execute:"}),' At a later time, the application supplies (orbinds) values for the parameters of the statement template, and the DBMS executes the statement (possibly returning a result). The application may execute the statement as many times as it wants with different values. In the above example, it might supply "bike" for the first parameter and "10900" for the second parameter.\nAs compared to executing statements directly, prepared statements offer two main advantages:']}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"The overhead of compiling the statement is incurred only once, although the statement is executed multiple times. However not all optimization can be performed at the time the statement template is compiled, for two reasons: the best plan may depend on the specific values of the parameters, and the best plan may change as tables and indexes change over time."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Prepared statements are resilient against ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/SQL_injection",children:"SQL injection"})," because values which are transmitted later using a different protocol are not compiled like the statement template. If the statement template is not derived from external input, SQL injection cannot occur."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["On the other hand, if a query is executed only once, server-side prepared statements can be slower because of the additional round-trip to the server.Implementation limitations may also lead to performance penalties; for example, some versions of MySQL did not cache results of prepared queries. A ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Stored_procedure",children:"stored procedure"}),", which is also precompiled and stored on the server for later execution, has similar advantages. Unlike a stored procedure, a prepared statement is not normally written in a procedural language and cannot use or modify variables or use control flow structures, relying instead on the declarative database query language. Due to their simplicity and client-side emulation, prepared statements are more portable across vendors."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Prepared_statement",children:"https://en.wikipedia.org/wiki/Prepared_statement"})}),"\n",(0,i.jsx)(t.h2,{id:"cursor",children:"Cursor"}),"\n",(0,i.jsx)(t.p,{children:"Cursor is a Temporary Memory or Temporary Work Station. It is Allocated by Database Server at the Time of Performing DML operations on Table by User. Cursors are used to store Database Tables.\nThere are 2 types of Cursors:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Implicit Cursors"})," - Implicit Cursors are also known as Default Cursors of SQL SERVER. These Cursors are allocated by SQL SERVER when the user performs DML operations."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Explicit Cursors"})," - Explicit Cursors are Created by Users whenever the user requires them. Explicit Cursors are used for Fetching data from Table in Row-By-Row Manner."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://www.geeksforgeeks.org/what-is-cursor-in-sql",children:"https://www.geeksforgeeks.org/what-is-cursor-in-sql"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://www.youtube.com/watch?v=C1Y6P6vDFts",children:(0,i.jsx)(t.strong,{children:"How Database Cursors Help in Fetching Large Result sets from your SQL"})})}),"\n",(0,i.jsx)(t.h2,{id:"pros",children:"Pros"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Save on memory on client side"}),"\n",(0,i.jsx)(t.li,{children:"Streaming to websocket/grpc"}),"\n",(0,i.jsx)(t.li,{children:"Easily cancel the query"}),"\n",(0,i.jsx)(t.li,{children:"Paging"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"cons",children:"Cons"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Long running transaction (cannot share cursors)"}),"\n",(0,i.jsx)(t.li,{children:"Stateful"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"limit-and-offset",children:"LIMIT and OFFSET"}),"\n",(0,i.jsx)(t.p,{children:"LIMIT and OFFSET allow you to retrieve just a portion of the rows that are generated by the rest of the query"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://www.postgresql.org/docs/8.0/queries-limit.html",children:"https://www.postgresql.org/docs/8.0/queries-limit.html"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://youtu.be/WDJRRNCGIRs",children:'don\'t use "offset" in your SQL'})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"select * from communication_log limit 100 offset 1000000;"}),"\n",(0,i.jsx)(t.li,{children:"offset means fetch and drop the first X number of rows"}),"\n",(0,i.jsx)(t.li,{children:"fetch 110 rows and drop first 100"}),"\n",(0,i.jsx)(t.li,{children:"as the offset increases the database need to do more work, which means offset is very very expensive"}),"\n",(0,i.jsx)(t.li,{children:"You can accidently read duplicate rows, if someone inserted new row after reading 1st page"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"image",src:s(850575).A+"",width:"885",height:"566"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"select * from communication_log where id > 140211644 limit 100;"}),"\n",(0,i.jsx)(t.li,{children:"Change offset to where query to filter using id, using index scan"}),"\n",(0,i.jsx)(t.li,{children:"A good alternative for using OFFSET will be the Seek Method"}),"\n",(0,i.jsx)(t.li,{children:"The seek method is all about finding a unique column or set of columns that identifies each row. Then, instead of using the OFFSET clause, we can just use that unique value as a bookmark that presents the position of the last row we've fetched and query the next set of rows by starting from this position in the WHERE clause."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://www.eversql.com/faster-pagination-in-mysql-why-order-by-with-limit-and-offset-is-slow",children:"https://www.eversql.com/faster-pagination-in-mysql-why-order-by-with-limit-and-offset-is-slow"})}),"\n",(0,i.jsx)(t.h2,{id:"cursor-pagination-vs-offset-pagination",children:"Cursor Pagination vs Offset Pagination"}),"\n",(0,i.jsx)(t.h3,{id:"pros-1",children:"Pros"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Superior Real-Time Data Capabilities"}),"\n",(0,i.jsx)(t.li,{children:"No Skipped Data"}),"\n",(0,i.jsx)(t.li,{children:"No Duplicated Data"}),"\n",(0,i.jsx)(t.li,{children:"Handling Big Data Sets Efficiently"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"cons-1",children:"Cons"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Limited Sort Features"}),"\n",(0,i.jsx)(t.li,{children:"Cursors Can Be a Bit Trickier to Implement"}),"\n",(0,i.jsx)(t.li,{children:"Infinite Scroll Can Be Addicting"}),"\n",(0,i.jsx)(t.li,{children:'The cursor-based pagination presents an opaque "cursor" indicator that the client may use to page through the result set. This pagination style only presents forward and reverse controls, and does not allow the client to navigate to arbitrary positions.'}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://uxdesign.cc/why-facebook-says-cursor-pagination-is-the-greatest-d6b98d86b6c0",children:"https://uxdesign.cc/why-facebook-says-cursor-pagination-is-the-greatest-d6b98d86b6c0"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://medium.com/swlh/how-to-implement-cursor-pagination-like-a-pro-513140b65f32",children:"https://medium.com/swlh/how-to-implement-cursor-pagination-like-a-pro-513140b65f32"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://medium.com/swlh/how-to-implement-cursor-pagination-like-a-pro-513140b65f32",children:"https://medium.com/swlh/how-to-implement-cursor-pagination-like-a-pro-513140b65f32"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://www.django-rest-framework.org/api-guide/pagination/#cursorpagination",children:"https://www.django-rest-framework.org/api-guide/pagination/#cursorpagination"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://slack.engineering/evolving-api-pagination-at-slack",children:"https://slack.engineering/evolving-api-pagination-at-slack"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://betterprogramming.pub/building-apis-a-comparison-between-cursor-and-offset-pagination-88261e3885f8",children:"https://betterprogramming.pub/building-apis-a-comparison-between-cursor-and-offset-pagination-88261e3885f8"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://www.youtube.com/watch?v=14K_a2kKTxU",children:"API Pagination: Making Billions of Products Scrolling Possible - YouTube"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Different types of Database and API Pagination",src:s(398949).A+"",width:"1000",height:"649"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},850575:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/Concepts-database-image1-9c2f71cb148cf39454cc915927751c8c.jpg"},398949:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/Screenshot 2024-12-15 at 5.30.08 PM-3e61e229b70162db4733fa6c85ff58e5.jpg"},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>o});var n=s(296540);const i={},a=n.createContext(i);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);