"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[16065],{64390:(a,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>g,frontMatter:()=>d,metadata:()=>r,toc:()=>o});var n=s(785893),t=s(511151);const d={},i="CQL (Cassandra Query Language)",r={id:"databases/nosql-databases/cassandra/cql-cassandra-query-language",title:"CQL (Cassandra Query Language)",description:"CQL",source:"@site/docs/databases/nosql-databases/cassandra/cql-cassandra-query-language.md",sourceDirName:"databases/nosql-databases/cassandra",slug:"/databases/nosql-databases/cassandra/cql-cassandra-query-language",permalink:"/databases/nosql-databases/cassandra/cql-cassandra-query-language",draft:!1,unlisted:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases/nosql-databases/cassandra/cql-cassandra-query-language.md",tags:[],version:"current",lastUpdatedAt:1705054005,formattedLastUpdatedAt:"Jan 12, 2024",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Consistency",permalink:"/databases/nosql-databases/cassandra/consistency"},next:{title:"Data Model",permalink:"/databases/nosql-databases/cassandra/data-model"}},c={},o=[{value:"CQL",id:"cql",level:2},{value:"Commands",id:"commands",level:2},{value:"Remember this",id:"remember-this",level:3}];function l(a){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"cql-cassandra-query-language",children:"CQL (Cassandra Query Language)"}),"\n",(0,n.jsx)(e.h2,{id:"cql",children:"CQL"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"CQL mapping to cassandra's internal data structure"}),"\n",(0,n.jsx)(e.li,{children:"Use SQL like query language"}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.strong,{children:"CQL is a reintroduction of schema"})}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"CQL creates a common language"})," so that details of the data model can be easily communicated"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"CQL is a best-practices Cassandra interface"})," and hides the messy details"]}),"\n",(0,n.jsx)(e.li,{children:"CQL let's you take advantage of the C* Data structure"}),"\n",(0,n.jsx)(e.li,{children:"CQL protocol is binary and therefore interoperable with any language"}),"\n",(0,n.jsx)(e.li,{children:"CQL is asynchronous and fast (Thrift transport layer is synchronous)"}),"\n",(0,n.jsx)(e.li,{children:"CQL allows the possibility for prepared statements"}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:"commands",children:"Commands"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sql",children:"DESCRIBE KEYSPACES;\n\nDESCRIBE TABLES;\nCREATE KEYSPACE killrvideo WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};\nUSE killrvideo;\nCREATE TABLE raw_data_by_day ( sensor text, day text, ts timeuuid, reading int, primary key((sensor, day), ts) ) WITH CLUSTERING ORDER BY (ts DESC) AND COMPACTION = {'class': 'TimeWindowCompactionStrategy', 'compaction_window_unit': 'DAYS', 'compaction_window_size': 1};\nCREATE TABLE stuff ( a int, b int, myset set<int>, mylist list<int>, mymap map<int, int>, PRIMARY KEY (a,b));\n\nCREATE TABLE videos ( video_id timeuuid, added_date timestamp, Title text, PRIMARY KEY (video_id));\n\nCREATE TABLE videos_by_tag ( tag text, video_id timeuuid, added_date timestamp, Title text, PRIMARY KEY (tag, video_id));\nCREATE TABLE videos_by_tag ( tag text, video_id timeuuid, added_date timestamp, Title text, PRIMARY KEY (tag, added_date, video_id)) WITH CLUSTERING ORDER BY(added_date ASC, video_id ASC);\nINSERT INTO killrvideo.videos(video_id, added_date, Title) VALUES (1645ea59-14bd-11e5-a993-8138354b7e31, '2014-01-29', 'Cassandra History');\nBEGIN BATCH\n\nINSERT into users(username,name,age) VALUES('raziz12','Rashid Aziz',34);\n\nINSERT INTO users_by_cities(username,name,city, age) VALUES ('raziz12','Rashid Aziz','Karachi',30);\n\nAPPLY BATCH;UPDATE stuff SET myset = {1,2}, mylist = [3,4,5], mymap = {6:7, 8:9} WHERE a = 0 AND b = 1;\nSELECT * FROM stuff; (in cassandra-cli)\n\nSELECT * FROM killrvideo.videos;\n\nSELECT count(*) FROM killrvideo.videos;\n\nSELECT * FROM videos_by_tag WHERE tag='cassandra';\n\nSELECT * FROM videos_by_tag WHERE tag = 'cassandra' AND title='Cassandra Intro';\n\nSELECT * FROM videos_by_tag WHERE tag='cassandra' ORDER BY added_date DESC;\nLIST stuff;\nSELECT key_aliases, column_aliases FROM system.schema_columnfamilies WHERE keyspace_name = 'test' AND columnfamily_name = 'stuff'; (in cqlsh)\nTRUNCATE videos;\n\nDROP TABLE videos_by_tag;\nCOPY videos(video_id, added_date, title) FROM '/Users/deepaksood/Downloads/ds201-6.0-labwork/labwork/data-files/videos.csv' WITH HEADER=TRUE;\nCOPY videos_by_tag (tag, video_id, added_date, title) FROM '/Users/deepaksood/Downloads/ds201-6.0-labwork/labwork/data-files/videos-by-tag.csv' WITH HEADER=TRUE;\nQUIT\n## DESCRIBE TABLE videos;\n\nSELECT token(video_id), video_id FROM videos;\n"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(183988).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.h3,{id:"remember-this",children:"Remember this"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Cassandra finds rows fast"}),"\n",(0,n.jsx)(e.li,{children:"Cassandra scans columns fast"}),"\n",(0,n.jsx)(e.li,{children:"Cassandra does not scan rows"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(900859).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(287076).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(926888).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(79754).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(878013).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(748962).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(310456).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(679070).Z+"",width:"1440",height:"1080"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:"image",src:s(485974).Z+"",width:"1440",height:"1080"})})]})}function g(a={}){const{wrapper:e}={...(0,t.a)(),...a.components};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(l,{...a})}):l(a)}},183988:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image1-f2334e2fba9cd2450f2effb7f275920e.jpg"},310456:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image10-8f528860399a66ad03f1a18b63bb8fa3.jpg"},679070:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image11-004e69ef35d8d48e19cc0c137f40f252.jpg"},485974:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image12-d368cd84a9a88e0356e66105d29e7d9e.jpg"},900859:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image4-c237ead9f7798f16f495c0c28c9edb39.jpg"},287076:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image5-10e3247d80efef3725c27ad32f3d2b28.jpg"},926888:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image6-f0c8bc84ece1df2a08701a878c44ecb7.jpg"},79754:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image7-0959b92eaccd7766d976a4feed6bac2a.jpg"},878013:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image8-70d7f17e2ecafa85849252fb5939bdcc.jpg"},748962:(a,e,s)=>{s.d(e,{Z:()=>n});const n=s.p+"assets/images/Cassandra_CQL-(Cassandra-Query-Language)-image9-b46c04593597bd3270fcb318fea35b1c.jpg"},511151:(a,e,s)=>{s.d(e,{Z:()=>r,a:()=>i});var n=s(667294);const t={},d=n.createContext(t);function i(a){const e=n.useContext(d);return n.useMemo((function(){return"function"==typeof a?a(e):{...e,...a}}),[e,a])}function r(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(t):a.components||t:i(a.components),n.createElement(d.Provider,{value:e},a.children)}}}]);