"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[98526],{952623:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>d});var i=s(785893),r=s(511151);const t={},a="System Design - Uber Lyft ride sharing services",o={id:"computer-science/interview-question/system-design-uber-lyft-ride-sharing-services",title:"System Design - Uber Lyft ride sharing services",description:"System Design: Uber Lyft ride sharing services - Interview question",source:"@site/docs/computer-science/interview-question/system-design-uber-lyft-ride-sharing-services.md",sourceDirName:"computer-science/interview-question",slug:"/computer-science/interview-question/system-design-uber-lyft-ride-sharing-services",permalink:"/computer-science/interview-question/system-design-uber-lyft-ride-sharing-services",draft:!1,unlisted:!1,editUrl:"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/computer-science/interview-question/system-design-uber-lyft-ride-sharing-services.md",tags:[],version:"current",lastUpdatedAt:1700454012,formattedLastUpdatedAt:"Nov 20, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"System Design - Twitter",permalink:"/computer-science/interview-question/system-design-twitter"},next:{title:"System Design of YouTube",permalink:"/computer-science/interview-question/system-design-youtube"}},l={},d=[{value:"Core Features",id:"core-features",level:2},{value:"Storage",id:"storage",level:2},{value:"Logging (logging layer)",id:"logging-logging-layer",level:2},{value:"SOA (Service Oriented Architecture)",id:"soa-service-oriented-architecture",level:2},{value:"Provisioning (Getting apps into machines)",id:"provisioning-getting-apps-into-machines",level:2},{value:"Teraform is used to provision systems",id:"teraform-is-used-to-provision-systems",level:2},{value:"Containers (Shielded runtime environments) - Docker",id:"containers-shielded-runtime-environments---docker",level:2},{value:"Apache Mesos (distributed systems kernel, manage distributed computer clusters) - manages collaboration and interfaces between services in distributed systems",id:"apache-mesos-distributed-systems-kernel-manage-distributed-computer-clusters---manages-collaboration-and-interfaces-between-services-in-distributed-systems",level:2},{value:"Network Routing (Route requests to backend) - needs to know state of each application",id:"network-routing-route-requests-to-backend---needs-to-know-state-of-each-application",level:2},{value:"Stateless - there is no state for each communication, therefore if one request is to one server, then another request can be routed to any other server",id:"stateless---there-is-no-state-for-each-communication-therefore-if-one-request-is-to-one-server-then-another-request-can-be-routed-to-any-other-server",level:2},{value:"Testing",id:"testing",level:2},{value:"Uber - Hailstorm - goes to a random set of services or hosts and turns them down",id:"uber---hailstorm---goes-to-a-random-set-of-services-or-hosts-and-turns-them-down",level:2},{value:"Uber",id:"uber",level:2},{value:"Summary",id:"summary",level:3},{value:"Mapping",id:"mapping",level:2}];function c(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"system-design---uber-lyft-ride-sharing-services",children:"System Design - Uber Lyft ride sharing services"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=J3DY3Te3A_A",children:"System Design: Uber Lyft ride sharing services - Interview question"})}),"\n",(0,i.jsx)(n.h2,{id:"core-features",children:"Core Features"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Customer - Driver matching"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Mapping\nBottom up (What do we need to store?)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"storage",children:"Storage"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Trip Storage (needed immediately)"}),"\n",(0,i.jsx)(n.li,{children:"Analytics data - Cloud providers"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"In house storage- Close data center"}),"\n",(0,i.jsx)(n.li,{children:"Backup data center"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When close data center is down, data can be fetched from backup data center. Providing high availability, Low latency\nUber uses mix of sql and nosql databases, fork of mysql which operates schemaless"}),"\n",(0,i.jsx)(n.p,{children:"Also use cassandra for low latency\nperodically store data on data-warehouses, where they can run big expensive queries to find out trends in their services."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Where people are using uber"}),"\n",(0,i.jsx)(n.li,{children:"Where drivers are not enough drivers"}),"\n",(0,i.jsx)(n.li,{children:"trends regarding time and day"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Uber uses Hadoop as a Data Warehouse (for business analytics)"}),"\n",(0,i.jsx)(n.p,{children:"Whenever we have a service that needs to be highly available and serves million of customers, we need to think about some sort of caching layer, layer where data can be stored closer to the customers and probably in some sort of in-memory database, which is much faster than storing data on speeding disks."}),"\n",(0,i.jsx)(n.p,{children:"Can be closer to customers, We can prewarm them before the customer queries it."}),"\n",(0,i.jsx)(n.p,{children:"Position of driver, or live data is not feasible to store in cache, so it can be saved in an in-memory database like redis and then sent to customer."}),"\n",(0,i.jsx)(n.p,{children:"Cache - map data, event data"}),"\n",(0,i.jsx)(n.h2,{id:"logging-logging-layer",children:"Logging (logging layer)"}),"\n",(0,i.jsx)(n.p,{children:"Legal perspective"}),"\n",(0,i.jsx)(n.p,{children:"As real time as possible"}),"\n",(0,i.jsx)(n.p,{children:"Endpoints - driver app, customer app"}),"\n",(0,i.jsx)(n.p,{children:"Kafka (ingest logging message), it is a service that can ingest a lot of messages in real time. (guarantee that it's not lost). Lot of servers in cluster and synchronize with each other."}),"\n",(0,i.jsx)(n.p,{children:"Periodically dumps data to Data Warehouse (Hadoop)"}),"\n",(0,i.jsx)(n.h2,{id:"soa-service-oriented-architecture",children:"SOA (Service Oriented Architecture)"}),"\n",(0,i.jsx)(n.p,{children:"There are a lot of small machines distributed so one if goes down doesn't effect others. Service lives in many different machines and in many different regions"}),"\n",(0,i.jsx)(n.h2,{id:"provisioning-getting-apps-into-machines",children:"Provisioning (Getting apps into machines)"}),"\n",(0,i.jsx)(n.p,{children:"Getting all the software (libraries, code, applications) into a newly started machine or container.\nRepository of all applications and libraries is used to provision everything to individual systems"}),"\n",(0,i.jsx)(n.h2,{id:"teraform-is-used-to-provision-systems",children:"Teraform is used to provision systems"}),"\n",(0,i.jsx)(n.h2,{id:"containers-shielded-runtime-environments---docker",children:"Containers (Shielded runtime environments) - Docker"}),"\n",(0,i.jsx)(n.h2,{id:"apache-mesos-distributed-systems-kernel-manage-distributed-computer-clusters---manages-collaboration-and-interfaces-between-services-in-distributed-systems",children:"Apache Mesos (distributed systems kernel, manage distributed computer clusters) - manages collaboration and interfaces between services in distributed systems"}),"\n",(0,i.jsx)(n.h2,{id:"network-routing-route-requests-to-backend---needs-to-know-state-of-each-application",children:"Network Routing (Route requests to backend) - needs to know state of each application"}),"\n",(0,i.jsx)(n.h2,{id:"stateless---there-is-no-state-for-each-communication-therefore-if-one-request-is-to-one-server-then-another-request-can-be-routed-to-any-other-server",children:"Stateless - there is no state for each communication, therefore if one request is to one server, then another request can be routed to any other server"}),"\n",(0,i.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,i.jsx)(n.p,{children:"Unit Tests"}),"\n",(0,i.jsx)(n.p,{children:"Suite of Integration tests"}),"\n",(0,i.jsx)(n.p,{children:"Resiliency testing - Case of failure testing"}),"\n",(0,i.jsx)(n.h2,{id:"uber---hailstorm---goes-to-a-random-set-of-services-or-hosts-and-turns-them-down",children:"Uber - Hailstorm - goes to a random set of services or hosts and turns them down"}),"\n",(0,i.jsxs)(n.p,{children:["Use Shadow fleets, group of hosts that have some applications and gets all the data but doen't serve any customer. Get request, calls all the same services as in production.",(0,i.jsx)(n.strong,{children:"Mapping (Graph problem)"})]}),"\n",(0,i.jsx)(n.p,{children:"Travelling Salesman Problem (TSP - NP Complete Problem)"}),"\n",(0,i.jsx)(n.p,{children:"Optimization problem (no efficient solution)"}),"\n",(0,i.jsx)(n.p,{children:"Dijkstra's Algorithm"}),"\n",(0,i.jsx)(n.p,{children:"A* Search Algorithm"}),"\n",(0,i.jsx)(n.p,{children:"Directed Weighted Graph (Weights are speed limit/Traffic)"}),"\n",(0,i.jsx)(n.h2,{id:"uber",children:"Uber"}),"\n",(0,i.jsx)(n.p,{children:"Getting very precise ETA (driver to customer)"}),"\n",(0,i.jsx)(n.p,{children:"Include Traffic Congestion / Include Speed limits for roads"}),"\n",(0,i.jsx)(n.p,{children:"Precompute the data for maps"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.strong,{children:"historical data"})," for ETA calculation (pretty accurate)"]}),"\n",(0,i.jsx)(n.p,{children:"Split the city into smaller blocks and then re-calculate the ETA's in real time. (Splitting the graph algorithm)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:s(608317).Z+"",width:"972",height:"584"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:s(464058).Z+"",width:"1008",height:"786"})}),"\n",(0,i.jsx)(n.h3,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Core features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Driver Customer matching"}),"\n",(0,i.jsx)(n.li,{children:"Mapping"}),"\n",(0,i.jsx)(n.li,{children:"Driver Customer Matching"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Storage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Trip storage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Close Data Center"}),"\n",(0,i.jsx)(n.li,{children:"Backup Data Center"}),"\n",(0,i.jsx)(n.li,{children:"Cloud platforms"}),"\n",(0,i.jsx)(n.li,{children:"In-house data stores"}),"\n",(0,i.jsx)(n.li,{children:"Mix of SQL and NoSQL databases"}),"\n",(0,i.jsx)(n.li,{children:"Low Latency - Cassendra"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Caching"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"In-memory database - redis"}),"\n",(0,i.jsx)(n.li,{children:"Map data"}),"\n",(0,i.jsx)(n.li,{children:"Event data"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Analytics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Data Warehouse - Hadoop"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Logging"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kafka - ingest logging message"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"SOA (Service Oriented Architecture)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Provisioning"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Teraform (for installing apps from central repositories to distributed clusters)"}),"\n",(0,i.jsx)(n.li,{children:"Docker (Containerization)"}),"\n",(0,i.jsx)(n.li,{children:"Apache mesos (manage distributed system clusters)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Network Routing"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Stateless servers"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Testing"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Unit Tests"}),"\n",(0,i.jsx)(n.li,{children:"Suite of integration tests"}),"\n",(0,i.jsxs)(n.li,{children:["Resiliency testing","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"HailStorm"}),"\n",(0,i.jsx)(n.li,{children:"Shadow fleets"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"mapping",children:"Mapping"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Algorithms"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Dijkstra's Algorithm"}),"\n",(0,i.jsx)(n.li,{children:"A* Search Algorithm"}),"\n",(0,i.jsx)(n.li,{children:"Travelling Salesman Problem (TSP)"}),"\n",(0,i.jsx)(n.li,{children:"Optimization Problem"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Directed Weighted Graph"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Vertices - Intersections"}),"\n",(0,i.jsx)(n.li,{children:"Roads - Edges"}),"\n",(0,i.jsx)(n.li,{children:"Speed limit / Traffic / Blockage - Weights"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Uber"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Precompute the data for maps"}),"\n",(0,i.jsx)(n.li,{children:"Use historical data"}),"\n",(0,i.jsx)(n.li,{children:"Segment the city and do real time ETA calculation"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},608317:(e,n,s)=>{s.d(n,{Z:()=>i});const i=s.p+"assets/images/System-Design-Uber-Lyft-ride-sharing-services-image1-9355e87ffbed4103ab85a99e6d8a31ec.jpg"},464058:(e,n,s)=>{s.d(n,{Z:()=>i});const i=s.p+"assets/images/System-Design-Uber-Lyft-ride-sharing-services-image2-10fcf99ea9546136d0290ba94d002a0b.jpg"},511151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>a});var i=s(667294);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);