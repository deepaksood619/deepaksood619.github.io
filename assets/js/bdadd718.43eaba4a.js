"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[77150],{575284:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"cloud/aws/others/amazon-cloudwatch","title":"Amazon CloudWatch","description":"Monitor Resources and Applications","source":"@site/docs/cloud/aws/others/amazon-cloudwatch.md","sourceDirName":"cloud/aws/others","slug":"/cloud/aws/others/amazon-cloudwatch","permalink":"/cloud/aws/others/amazon-cloudwatch","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/cloud/aws/others/amazon-cloudwatch.md","tags":[],"version":"current","lastUpdatedBy":"Deeapak Sood","lastUpdatedAt":1764576719000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Others","permalink":"/cloud/aws/others/"},"next":{"title":"Amazon Pinpoint","permalink":"/cloud/aws/others/amazon-pinpoint"}}');var i=s(474848),t=s(28453);const l={},o="Amazon CloudWatch",r={},c=[{value:"Queries",id:"queries",level:2},{value:"Cloudwatch search queries",id:"cloudwatch-search-queries",level:3},{value:"Logs Insight",id:"logs-insight",level:3},{value:"3 categories of logs",id:"3-categories-of-logs",level:2},{value:"Amazon CloudWatch Application Insights",id:"amazon-cloudwatch-application-insights",level:2},{value:"Cost Optimizing",id:"cost-optimizing",level:2},{value:"Cloudwatch Alarm Actions",id:"cloudwatch-alarm-actions",level:2},{value:"Composite Alarms",id:"composite-alarms",level:2},{value:"Features Comparison: IA vs Standard Log Class",id:"features-comparison-ia-vs-standard-log-class",level:2},{value:"Releases",id:"releases",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"amazon-cloudwatch",children:"Amazon CloudWatch"})}),"\n",(0,i.jsx)(n.p,{children:"Monitor Resources and Applications"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.a,{href:"https://github.com/monitoringartist/grafana-aws-cloudwatch-dashboards",children:["GitHub - monitoringartist/grafana-aws-cloudwatch-dashboards: ","\u2601\ufe0f"," 40+ Grafana dashboards for AWS CloudWatch metrics: EC2, Lambda, S3, ELB, EMR, EBS, SNS, SES, SQS, RDS, EFS, ElastiCache, Billing, API Gateway, VPN, Step Functions, Route 53, CodeBuild, ..."]})}),"\n",(0,i.jsx)(n.h2,{id:"queries",children:"Queries"}),"\n",(0,i.jsx)(n.h3,{id:"cloudwatch-search-queries",children:"Cloudwatch search queries"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-Select -query\n\n-QUERY -READ -WRITE\n\n-server -lms_p2021030122 -sttashrdsmain -vishal_goyal -rdsadmin -deepak_sood -api-v2_p2021030121 -loan-tape-etl_c2021030122\n"})}),"\n",(0,i.jsx)(n.h3,{id:"logs-insight",children:"Logs Insight"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"fields *@timestamp*, *@message*\n| sort *@timestamp* desc\n| limit 20\n\nfields *@timestamp*, *@message* | filter *@message* like /(?i)(connect)/ # | filter @timestamp > 1668527666 | fields tomillis(*@timestamp*) as millis # | filter @millis < 1668566034 | parse *@message* ',*,*,' as @instance,@user | parse *@message* /(?<@ip>d{1,3}.d{1,3}.d{1,3}.d{1,3})/ | stats count() AS counter by @user | sort by @counter desc | limit 100\n"})}),"\n",(0,i.jsx)(n.h2,{id:"3-categories-of-logs",children:"3 categories of logs"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Vended logs - natively published by AWS services on behalf of the customer"}),"\n",(0,i.jsx)(n.li,{children:"Logs published by AWS services"}),"\n",(0,i.jsx)(n.li,{children:"Custom logs"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_billing.html",children:"CloudWatch billing and cost - Amazon CloudWatch"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/publishingMetrics.html",children:"Publish custom metrics - Amazon CloudWatch"})}),"\n",(0,i.jsx)(n.h2,{id:"amazon-cloudwatch-application-insights",children:"Amazon CloudWatch Application Insights"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch-application-insights.html",children:"Amazon CloudWatch Application Insights - Amazon CloudWatch"})}),"\n",(0,i.jsx)(n.h2,{id:"cost-optimizing",children:"Cost Optimizing"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.a,{href:"https://repost.aws/knowledge-center/cloudwatch-logs-bill-increase",children:["Determine which log group is causing a bill increase | AWS re",":Post"]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=FuHJu58n0Zk&ab_channel=AWSDevelopers",children:"Optimizing Amazon CloudWatch Costs in Under 5 Minutes (Step-by-Step Guide) - YouTube"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.a,{href:"https://repost.aws/knowledge-center/cloudwatch-understand-and-reduce-charges?sc_channel=sm",children:["Reduce and prevent charges in Amazon CloudWatch | AWS re",":Post"]})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cloudwatch-alarm-actions",children:"Cloudwatch Alarm Actions"}),"\n",(0,i.jsx)(n.p,{children:"Using Amazon CloudWatch alarm actions, you can create alarms that automatically stop, terminate, reboot, or recover your EC2 instances. You can use the stop or terminate actions to help you save money when you no longer need an instance to be running. You can use the reboot and recover actions to automatically reboot those instances or recover them onto new hardware if a system impairment occurs."}),"\n",(0,i.jsx)(n.p,{children:"There are a number of scenarios in which you might want to automatically stop or terminate your instance. For example, you might have instances dedicated to batch payroll processing jobs or scientific computing tasks that run for a period of time and then complete their work. Rather than letting those instances sit idle (and accrue charges), you can stop or terminate them, which helps you to save money. The main difference between using the stop and the terminate alarm actions is that you can easily restart a stopped instance if you need to run it again later. You can also keep the same instance ID and root volume. However, you cannot restart a terminated instance. Instead, you must launch a new instance."}),"\n",(0,i.jsxs)(n.p,{children:['You can add the stop, terminate, or reboot, actions to any alarm that is set on an Amazon EC2 per-instance metric, including basic and detailed monitoring metrics provided by Amazon CloudWatch (in the AWS/EC2 namespace), in addition to any custom metrics that include the "InstanceId=" dimension, as long as the InstanceId value refers to a valid running Amazon EC2 instance. You can also add the recover action to alarms that is set on any Amazon EC2 per-instance metric except for\xa0',(0,i.jsx)(n.code,{children:"StatusCheckFailed_Instance"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html",children:"Create alarms to stop, terminate, reboot, or recover an EC2 instance - Amazon CloudWatch"})}),"\n",(0,i.jsx)(n.h2,{id:"composite-alarms",children:"Composite Alarms"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Create_Composite_Alarm.html",children:"Combining alarms - Amazon CloudWatch"})}),"\n",(0,i.jsx)(n.p,{children:"CW composite alert to create complex alert. We can use operators like OR, AND and NOT. For example, if we want to trigger an alert when both CPU and DiskReadOnly breach their thresholds, we would need to create a composite alert. This involves using two metrics with an AND operator to ensure that both conditions are met before triggering the alert."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ALARM("django-slave-2-alarm-CPU-80%") OR\nALARM("learn-dbread-alarm-CPU-80%") OR\nALARM("django-prod-slave1-alarm-CPU-80%") OR\nALARM("prod-django-master-alarm-CPU-80%")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"features-comparison-ia-vs-standard-log-class",children:"Features Comparison: IA vs Standard Log Class"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"IA vs Standard Log Class",src:s(183058).A+"",width:"1055",height:"496"})}),"\n",(0,i.jsx)(n.h2,{id:"releases",children:"Releases"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.a,{href:"https://www.youtube.com/watch?v=WrNBOx0yduE",children:["AWS re",":Invent"," 2024 - [NEW LAUNCH] What\u2019s new with Amazon CloudWatch (COP381-NEW) - YouTube"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["CloudWatch Database Insights","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Unified view in CloudWatch"}),"\n",(0,i.jsx)(n.li,{children:"Configurable fleet-wide views"}),"\n",(0,i.jsx)(n.li,{children:"Detailed SQL query metrics"}),"\n",(0,i.jsx)(n.li,{children:"Application context with dependency mapping"}),"\n",(0,i.jsx)(n.li,{children:"Easy getting-started experience with pre-built health dashboards"}),"\n",(0,i.jsx)(n.li,{children:"Fully managed no agent experience"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["CloudWatch unified navigation","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Navigation across related telemetry and resources"}),"\n",(0,i.jsx)(n.li,{children:"Automatically reveals contextual relationships"}),"\n",(0,i.jsx)(n.li,{children:"Single-click visualizations of key telemetry"}),"\n",(0,i.jsx)(n.li,{children:"Expertly navigate systems"}),"\n",(0,i.jsx)(n.li,{children:"On by default!"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["OpenSearch on CloudWatch","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enhanced query capabilities (PPL/SQL)"}),"\n",(0,i.jsx)(n.li,{children:"Analyze logs in OpenSearch without data duplication"}),"\n",(0,i.jsx)(n.li,{children:"Eliminates the need for complex ETL pipelines"}),"\n",(0,i.jsx)(n.li,{children:"Leverage best of CloudWatch and OpenSearch features"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Distributed systems visibility","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ability to see which piece of a request pathway has the issue"}),"\n",(0,i.jsx)(n.li,{children:"Compare and contrast against similar spans"}),"\n",(0,i.jsx)(n.li,{children:"It's an analytics problem: Finding specific span types, aggregating spans by properties, slicing/dicing"}),"\n",(0,i.jsx)(n.li,{children:"Answer the question: Which component, and what's unique about this component?"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["CloudWatch span analytics","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Complete visibility into application transactions at any scale"}),"\n",(0,i.jsx)(n.li,{children:"Ingest spans as structured logs: no more sampling"}),"\n",(0,i.jsx)(n.li,{children:"Interactive visual editor to slice and dice spans"}),"\n",(0,i.jsx)(n.li,{children:"Leverage all CloudWatch Logs features"}),"\n",(0,i.jsx)(n.li,{children:"One-click enablement for AWS X-Ray customers"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Amazon Q Developer Ops Assistant","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Investigate and remediate operational issues"}),"\n",(0,i.jsx)(n.li,{children:"Guided root-cause analysis"}),"\n",(0,i.jsx)(n.li,{children:"Automatically initiate investigations from alarms"}),"\n",(0,i.jsx)(n.li,{children:"Collaborative space to share information"}),"\n",(0,i.jsx)(n.li,{children:"End-to-end integrations with curated runbooks, chat, and ticketing systems"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.a,{href:"https://www.youtube.com/watch?v=aB5mGbiV_Kk&t=260s",children:["AWS re",":Invent"," 2023 - Get actionable insights from Amazon CloudWatch Logs (COP326) - YouTube"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Challenges with logs management","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Volume of logs continues of grow"}),"\n",(0,i.jsx)(n.li,{children:"One size fits all"}),"\n",(0,i.jsx)(n.li,{children:"Managing multiple solutions"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Amazon CloudWatch Logs Infrequent Access","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fully managed ingestion, storage and encryption"}),"\n",(0,i.jsx)(n.li,{children:"Investigate logs using purpose build Log Insights query engine"}),"\n",(0,i.jsx)(n.li,{children:"50% lower costs than standard class"}),"\n",(0,i.jsx)(n.li,{children:"Consolidate all your logs in CloudWatch"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Pattern Analysis in Logs Insights"}),"\n",(0,i.jsx)(n.li,{children:"AI-powered natural language query generation"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["2022","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cross account log analytics"}),"\n",(0,i.jsx)(n.li,{children:"Sensitive data protection"}),"\n",(0,i.jsx)(n.li,{children:"Increased query concurrency for logs insights"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["2023","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Live tail"}),"\n",(0,i.jsx)(n.li,{children:"EMP enhancements (Hi-res metrics, Error visibility, Header removal)"}),"\n",(0,i.jsx)(n.li,{children:"3 New log insights commands (dedup, pattern and multi-stats)"}),"\n",(0,i.jsx)(n.li,{children:"Logs insights enhancements (concurrency, timeout, log group selection)"}),"\n",(0,i.jsx)(n.li,{children:"Account-level sensitive data protection"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},183058:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/Pasted image 20251126175715-0382060d4166f5defc7aaa77cf893e48.png"},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var a=s(296540);const i={},t=a.createContext(i);function l(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);