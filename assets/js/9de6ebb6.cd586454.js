"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[47448],{300303:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"data-warehouses/concepts/change-data-capture-cdc","title":"Change Data Capture (CDC)","description":"In databases, change data capture(CDC) is a set of software design patterns) used to determine (and track) the data that has changed so that action can be taken using the changed data. CDC is also an approach to data integration that is based on the identification, capture and delivery of the changes made to enterprise data sources.","source":"@site/docs/data-warehouses/concepts/change-data-capture-cdc.md","sourceDirName":"data-warehouses/concepts","slug":"/data-warehouses/concepts/change-data-capture-cdc","permalink":"/data-warehouses/concepts/change-data-capture-cdc","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/data-warehouses/concepts/change-data-capture-cdc.md","tags":[],"version":"current","lastUpdatedBy":"Deepak Sood","lastUpdatedAt":1771485259000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Lambda Architecture","permalink":"/data-warehouses/concepts/10-lambda-architecture"},"next":{"title":"Data Engineering Challenges","permalink":"/data-warehouses/concepts/data-engineering-challenges"}}');var i=t(474848),s=t(28453);const r={},d="Change Data Capture (CDC)",o={},l=[{value:"Change Data Capture benefits",id:"change-data-capture-benefits",level:2},{value:"Change Data Capture methods",id:"change-data-capture-methods",level:2},{value:"Table metadata",id:"table-metadata",level:3},{value:"Table differences",id:"table-differences",level:3},{value:"Database triggers (Trigger-based CDC)",id:"database-triggers-trigger-based-cdc",level:3},{value:"Database transaction log (Log-based CDC)",id:"database-transaction-log-log-based-cdc",level:3},{value:"Tools",id:"tools",level:2},{value:"Debezium",id:"debezium",level:3},{value:"AWS DMS (Data Migration Service)",id:"aws-dms-data-migration-service",level:3},{value:"Maxwell",id:"maxwell",level:3},{value:"What&#39;s it for?",id:"whats-it-for",level:4},{value:"Others",id:"others",level:3},{value:"Links",id:"links",level:2}];function c(e){const a={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"change-data-capture-cdc",children:"Change Data Capture (CDC)"})}),"\n",(0,i.jsxs)(a.p,{children:["In ",(0,i.jsx)(a.a,{href:"https://en.wikipedia.org/wiki/Database",children:"databases"}),", change data capture(CDC) is a set of software ",(0,i.jsx)(a.a,{href:"https://en.wikipedia.org/wiki/Design_pattern_(computer_science)",children:"design patterns"})," used to determine (and track) the data that has changed so that action can be taken using the changed data. CDC is also an approach to data integration that is based on the identification, capture and delivery of the changes made to enterprise data sources."]}),"\n",(0,i.jsxs)(a.p,{children:["CDC solutions occur most often in ",(0,i.jsx)(a.a,{href:"https://en.wikipedia.org/wiki/Data_warehouse",children:"data-warehouse"})," environments since capturing and preserving the state of data across time is one of the core functions of a data warehouse, but CDC can be utilized in any database or data repository system."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://www.youtube.com/watch?v=hNJCxF3IWC4",children:"What Is Change Data Capture - Understanding Data Engineering 101 - YouTube"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://www.youtube.com/watch?v=M6Z-RpEdaN4&ab_channel=InfoQ",children:"Change Data Capture for Microservices - YouTube"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://airbyte.com/blog/change-data-capture-definition-methods-and-benefits",children:"Understanding Change Data Capture (CDC): Definition, Methods, Benefits | Airbyte"})}),"\n",(0,i.jsx)(a.h2,{id:"change-data-capture-benefits",children:"Change Data Capture benefits"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"CDC is efficient"}),"\n",(0,i.jsx)(a.li,{children:"CDC enables near real-time processing"}),"\n",(0,i.jsx)(a.li,{children:"CDC tracks delete operations in the source database"}),"\n",(0,i.jsx)(a.li,{children:"CDC reduces the impact on the source database"}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"change-data-capture-methods",children:"Change Data Capture methods"}),"\n",(0,i.jsx)(a.h3,{id:"table-metadata",children:"Table metadata"}),"\n",(0,i.jsxs)(a.p,{children:["This method keeps track of metadata across every row in a table, including when the row was created and updated. Using this method requires additional columns in the original table (such as ",(0,i.jsx)(a.em,{children:"created_at"})," and ",(0,i.jsx)(a.em,{children:"updated_at"}),") or a separate table to track these different metadata elements."]}),"\n",(0,i.jsx)(a.p,{children:"Tracking metadata is commonly used in incremental batch processing to identify new and updated rows."}),"\n",(0,i.jsxs)(a.p,{children:["There are many ways to identify new and updated rows in the source table. The most common way is to look at the ",(0,i.jsx)(a.em,{children:"updated_at"})," column in the destination table before replication to know the latest update and then identify the rows with a later ",(0,i.jsx)(a.em,{children:"updated_at"})," in the source table. The result is the new and updated rows that should be merged at the destination."]}),"\n",(0,i.jsxs)(a.p,{children:["A detailed implementation in Python for PostgreSQL CDC can be found ",(0,i.jsx)(a.a,{href:"https://blog.devgenius.io/python-etl-pipeline-incremental-data-load-source-change-detection-28a7ceaa9840",children:"here"}),"."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"CDC table metadata technique",src:t(735457).A+"",width:"999",height:"562"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Key challenges:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"If there are hard deletes in the source database, it\u2019s impossible to track them using this method."}),"\n",(0,i.jsx)(a.li,{children:"Regularly querying the source database to identify new and updated rows can overload it."}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"table-differences",children:"Table differences"}),"\n",(0,i.jsxs)(a.p,{children:["This method identifies the difference between the source and the destination tables to detect new, updated, and even deleted rows. The difference can be calculated using a SQL query or specific utilities provided by the database (for example, SQL Server provides a ",(0,i.jsx)(a.a,{href:"https://docs.microsoft.com/en-us/sql/tools/tablediff-utility?view=sql-server-ver15",children:"tablediff utility"}),")."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"CDC table differences technique",src:t(750849).A+"",width:"999",height:"562"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Key challenges:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Comparing tables row-by-row to identify differences requires extensive computational resources, and it\u2019s not scalable.",(0,i.jsx)(a.strong,{children:"\u200d"}),"\u200d"]}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"database-triggers-trigger-based-cdc",children:"Database triggers (Trigger-based CDC)"}),"\n",(0,i.jsxs)(a.p,{children:["This method requires the creation of database triggers with logic to manage the metadata within the same table or in a separate book-keeping table, often called a ",(0,i.jsx)(a.em,{children:"shadow table"}),"."]}),"\n",(0,i.jsxs)(a.p,{children:["Most databases allow the creation of triggers; you can see how to ",(0,i.jsx)(a.a,{href:"https://www.postgresql.org/docs/current/sql-createtrigger.html",children:"create a trigger for PostgreSQL"}),"."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"Trigger-based CDC technique",src:t(179501).A+"",width:"999",height:"562"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Key challenges:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"If a transaction fails, roll-back logic may need to be implemented to remove the operation from the shadow table."}),"\n",(0,i.jsx)(a.li,{children:"The trigger needs to be modified in case of table schema changes."}),"\n",(0,i.jsx)(a.li,{children:"Triggers cannot be reused for other databases, given the differences in SQL language."}),"\n",(0,i.jsx)(a.li,{children:"The use of triggers can slow down the transactional workload."}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"database-transaction-log-log-based-cdc",children:"Database transaction log (Log-based CDC)"}),"\n",(0,i.jsx)(a.p,{children:"Log-based CDC uses the transaction logs that some databases - such as Postgres, MySQL, SQL Server,  and Oracle - implement natively as part of their core functionality."}),"\n",(0,i.jsx)(a.p,{children:"Log-based and trigger-based CDC are very similar - both keep a log of changes every time a database operation happens - so the shadow table and the transaction log contain the same information. The difference between log-based and trigger-based CDC is that the first one uses a core functionality of the database (transaction log); meanwhile, the triggers are created and defined by the user."}),"\n",(0,i.jsx)(a.p,{children:"Since database logs are updated in every transaction, the experience is transparent, which means log-based CDC does not require any logical changes in database objects or the application running on top of the database. A system reads data directly from the database Change Data Capture logs to identify changes in a database, minimizing the impact of the capture process."}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"Log-based CDC technique",src:t(578090).A+"",width:"999",height:"562"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Key challenges:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Some database operations are not captured in the CDC logs, such as ALTER or TRUNCATE. In that case, additional logic needs to be configured to force the logging of those operations."}),"\n",(0,i.jsx)(a.li,{children:"If the destination datastore is down, transaction logs must be kept intact until the subsequent replication happens."}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"tools",children:"Tools"}),"\n",(0,i.jsx)(a.h3,{id:"debezium",children:(0,i.jsx)(a.a,{href:"/data-warehouses/concepts/debezium",children:"Debezium"})}),"\n",(0,i.jsx)(a.h3,{id:"aws-dms-data-migration-service",children:"AWS DMS (Data Migration Service)"}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"/cloud/aws/compute/aws-database-migration-service-dms",children:"aws-database-migration-service-dms"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://en.wikipedia.org/wiki/Change_data_capture",children:"https://en.wikipedia.org/wiki/Change_data_capture"})}),"\n",(0,i.jsx)(a.h3,{id:"maxwell",children:"Maxwell"}),"\n",(0,i.jsxs)(a.p,{children:["This is ",(0,i.jsx)(a.strong,{children:"Maxwell's daemon"}),", a ",(0,i.jsx)(a.a,{href:"https://www.confluent.io/blog/how-change-data-capture-works-patterns-solutions-implementation/",children:"change data capture"})," application that reads MySQL binlogs and writes data changes as JSON to Kafka, Kinesis, and other streaming platforms."]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.a,{href:"https://maxwells-daemon.io/",children:"Maxwell"})," is a CDC (Changelog Data Capture) tool that can stream changes in real-time from MySQL into Kafka, Kinesis and other streaming connectors. Maxwell provides a unified format schema for changelog and supports to serialize messages using JSON."]}),"\n",(0,i.jsx)(a.h4,{id:"whats-it-for",children:"What's it for?"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"ETL of all sorts"}),"\n",(0,i.jsx)(a.li,{children:"maintaining an audit log of all changes to your database"}),"\n",(0,i.jsx)(a.li,{children:"cache building/expiring"}),"\n",(0,i.jsx)(a.li,{children:"search indexing"}),"\n",(0,i.jsx)(a.li,{children:"inter-service communication"}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://github.com/zendesk/maxwell",children:"GitHub - zendesk/maxwell: Maxwell's daemon, a mysql-to-json kafka producer"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://maxwells-daemon.io/",children:"Maxwell's Daemon"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/table/formats/maxwell/",children:"Maxwell | Apache Flink"})}),"\n",(0,i.jsx)(a.h3,{id:"others",children:"Others"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"airbyte"}),"\n",(0,i.jsx)(a.li,{children:"debezium"}),"\n",(0,i.jsxs)(a.li,{children:["attunity (now Qlik replicate)","\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.qlik.com/us/products/qlik-data-streaming-cdc",children:"CDC Streaming: Modern Analytics & Data Replication | Qlik"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.fivetran.com/",children:"Fivetran | Automated data movement platform"})}),"\n",(0,i.jsx)(a.li,{children:"Talend"}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.a,{href:"https://www.matillion.com/",children:"Matillion | Cloud-Native Data Integration With AI Built In"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.matillion.com/matillion-etl",children:"Matillion ETL Tool: Cloud-Based ETL Software for Data Integration"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.li,{children:"Integrate.io"}),"\n",(0,i.jsx)(a.li,{children:"Panoply"}),"\n",(0,i.jsx)(a.li,{children:"Informatica"}),"\n",(0,i.jsx)(a.li,{children:"Singer.io"}),"\n",(0,i.jsx)(a.li,{children:"Hadoop"}),"\n",(0,i.jsx)(a.li,{children:"Dataddo"}),"\n",(0,i.jsx)(a.li,{children:"AWS Glue"}),"\n",(0,i.jsx)(a.li,{children:"Stitch"}),"\n",(0,i.jsxs)(a.li,{children:["Hevo Data","\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.youtube.com/watch?v=p0XGLDgvCo8&ab_channel=HevoData",children:"Getting Started with Hevo - An Overview - YouTube"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.li,{children:"upsolver"}),"\n",(0,i.jsx)(a.li,{children:"archion"}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsxs)(a.a,{href:"https://www.cloudquery.io/",children:[(0,i.jsx)(a.strong,{children:"CloudQuery"})," | Data Fabric for Cloud and Security Teams"]})}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.a,{href:"https://www.supermetal.io/",children:"Supermetal - High Performance Data Replication Platform Built in Rust"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://docs.supermetal.io/docs/main/concepts/architecture/",children:"Architecture | Supermetal Documentation"})}),"\n",(0,i.jsx)(a.li,{children:"Supermetal's architecture centers around three core principles: preserving data accuracy through Apache Arrow's type system, maintaining transactional consistency across the entire pipeline, and processing everything within a single process to massively reduce serialization overhead."}),"\n",(0,i.jsx)(a.li,{children:"Supermetal operates as a single, self-contained process that manages the entire data pipeline from source to target."}),"\n",(0,i.jsx)(a.li,{children:"Supermetal is built on two primary technologies: Rust and Apache Arrow"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"links",children:"Links"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.fivetran.com/learn/data-migration-tools",children:"12 best data migration tools of 2023"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://hevodata.com/learn/data-migration-tools/",children:"11 Best Data Migration Tools for 2023"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.upsolver.com/blog/cdc-tools-comparison-guide",children:"6 Popular CDC Tools, Compared (July 2023 Edition)"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.arcion.io/blog/the-missing-piece-for-modern-data-stack-going-real-time",children:"The Missing Piece for Modern Data Stack Going Real-time"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://dlthub.com/",children:"dltHub: ELT as Python Code"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://www.streamingdata.tech/p/benchmarking-cdc-tools",children:"Benchmarking CDC Tools: Supermetal vs Debezium vs Flink CDC"})}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},578090:(e,a,t)=>{t.d(a,{A:()=>n});const n=t.p+"assets/images/Pasted image 20240123235410-121eb9ee49b6ee6fd7ef2387dcb2b39c.jpg"},179501:(e,a,t)=>{t.d(a,{A:()=>n});const n=t.p+"assets/images/Pasted image 20240123235440-3e8b790a354d8a59c33e3fd042447571.jpg"},750849:(e,a,t)=>{t.d(a,{A:()=>n});const n=t.p+"assets/images/Pasted image 20240123235453-5b8e4ae2cfa6cda6cf653254aa85ed4a.jpg"},735457:(e,a,t)=>{t.d(a,{A:()=>n});const n=t.p+"assets/images/Pasted image 20240123235509-e5bf32de56dd01f9eb59b56e2b0fe4dd.jpg"},28453:(e,a,t)=>{t.d(a,{R:()=>r,x:()=>d});var n=t(296540);const i={},s=n.createContext(i);function r(e){const a=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:a},e.children)}}}]);