"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[14338],{152948:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>a,default:()=>l,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"devops/servers/nginx/configs","title":"Configs","description":"","source":"@site/docs/devops/servers/nginx/configs.md","sourceDirName":"devops/servers/nginx","slug":"/devops/servers/nginx/configs","permalink":"/devops/servers/nginx/configs","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/devops/servers/nginx/configs.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1704952979000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"NGINX","permalink":"/devops/servers/nginx/"},"next":{"title":"Terminal Bash","permalink":"/devops/terminal-bash/"}}');var r=t(474848),s=t(28453);const i={},a="Configs",p={},c=[];function d(n){const e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"configs",children:"Configs"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: nginx-configmap\n  namespace: example\ndata:\n  nginx.conf: |\n    user root;\n    worker_processes auto;\n    pid /var/run/nginx.pid;\n    error_log /var/log/nginx/error.log warn;\n    events {\n            worker_connections 2048;\n            # multi_accept on;\n    }\n\n    http {\n            ##\n            # Basic Settings\n            ##\n\n            sendfile on;\n            tcp_nopush on;\n            tcp_nodelay on;\n            keepalive_timeout 65;\n            types_hash_max_size 2048;\n            # server_tokens off;\n\n            # server_names_hash_bucket_size 64;\n            # server_name_in_redirect off;\n\n            include /etc/nginx/mime.types;\n            default_type application/octet-stream;\n\n            ##\n            # Logging Settings\n            ##\n            log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                          \'$status $body_bytes_sent "$http_referer" \'\n                          \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n            access_log /var/log/nginx/access.log main;\n            error_log /var/log/nginx/error.log;\n\n            ##\n            # Gzip Settings\n            ##\n\n            gzip on;\n            gzip_disable "msie6";\n\n            gzip_vary on;\n            gzip_proxied any;\n            gzip_comp_level 6;\n            # gzip_buffers 16 8k;\n            # gzip_http_version 1.1;\n            gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n            ##\n            # Virtual Host Configs\n            ##\n\n            server {\n                    proxy_connect_timeout       600;\n                    proxy_send_timeout          600;\n                    proxy_read_timeout          3600;\n                    send_timeout                600;\n                    client_max_body_size 25M;\n                    server_name corporate.app.com;\n                    listen 80;\n\n                    location /static/ {\n                            autoindex on;\n                            expires 7d;\n                            alias /root/example/static/;\n                    }\n\n                    location / {\n                            proxy_pass  http://example.example:9104/;\n                            proxy_redirect     off;\n                            proxy_set_header   Host $http_host;\n                            proxy_set_header   X-Real-IP $remote_addr;\n                            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n                            proxy_set_header   X-Forwarded-Host $server_name;\n                            proxy_buffering off;\n                    }\n            }\n    }\n\n# production.conf\nupstream api {\nserver api:6379;\n}\nserver {\nlisten 80;\nlocation /api {\nrewrite /api/(.*) /$1 break;\nproxy_pass http://api;\n}\n}\n\n# development.conf\nupstream api {\nserver api:6379;\n}\nserver {\nlisten 80;\nlocation /api {\nrewrite /api/(.*) /$1 break;\nproxy_pass http://api;\n}\n}\n\n# test.con\n# Start writing your nginx.conf here\nevents { }\nhttp {\n    server {\n        server_name corporate.app.com;\n        listen 80;\n\n        location / {\n            proxy_pass  http://frontend/;\n        }\n\n        location /api/ {\n            proxy_pass http://rest_api/;\n        }\n\n        location /notification/ {\n            proxy_pass http://notification:8080/;\n        }\n    }\n}\n\n# Dockerfile\nFROM nginx\nCOPY ./production.conf /etc/nginx/conf.d/default.conf\n'})})]})}function l(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>a});var o=t(296540);const r={},s=o.createContext(r);function i(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);