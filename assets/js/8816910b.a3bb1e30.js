"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[5742],{194639:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>o,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"databases/nosql-databases/redis/scaling","title":"Scaling","description":"Replication/Clustering","source":"@site/docs/databases/nosql-databases/redis/scaling.md","sourceDirName":"databases/nosql-databases/redis","slug":"/databases/nosql-databases/redis/scaling","permalink":"/databases/nosql-databases/redis/scaling","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases/nosql-databases/redis/scaling.md","tags":[],"version":"current","lastUpdatedBy":"Deepak","lastUpdatedAt":1743701654000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Redis Streams / PUBSUB","permalink":"/databases/nosql-databases/redis/redis-streams-pubsub"},"next":{"title":"tidb","permalink":"/databases/nosql-databases/tidb"}}');var r=t(474848),n=t(28453);const a={},d="Scaling",l={},c=[{value:"Replication/Clustering",id:"replicationclustering",level:2},{value:"Default: Master-Slave",id:"default-master-slave",level:3},{value:"Master-Slave with Sentinel",id:"master-slave-with-sentinel",level:3},{value:"Redis Cluster",id:"redis-cluster",level:3},{value:"twenproxy (by twitter)",id:"twenproxy-by-twitter",level:2},{value:"codis",id:"codis",level:2},{value:"Redis vs Memcached",id:"redis-vs-memcached",level:2},{value:"DragonFly",id:"dragonfly",level:2},{value:"Other in-memory database",id:"other-in-memory-database",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"scaling",children:"Scaling"})}),"\n",(0,r.jsx)(s.h2,{id:"replicationclustering",children:"Replication/Clustering"}),"\n",(0,r.jsx)(s.h3,{id:"default-master-slave",children:"Default: Master-Slave"}),"\n",(0,r.jsx)(s.p,{children:"When installing the chart withcluster.enabled=true, it will deploy a Redis master StatefulSet (only one master node allowed) and a Redis slave StatefulSet. The slaves will be read-replicas of the master. Two services will be exposed:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Redis Master service: Points to the master, where read-write operations can be performed"}),"\n",(0,r.jsx)(s.li,{children:"Redis Slave service: Points to the slaves, where only read operations are allowed."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"In case the master crashes, the slaves will wait until the master node is respawned again by the Kubernetes Controller Manager."}),"\n",(0,r.jsx)(s.h3,{id:"master-slave-with-sentinel",children:"Master-Slave with Sentinel"}),"\n",(0,r.jsxs)(s.p,{children:["When installing the chart with ",(0,r.jsx)(s.code,{children:"cluster.enabled=true"})," and ",(0,r.jsx)(s.code,{children:"sentinel.enabled=true"}),", it will deploy a Redis master StatefulSet (only one master allowed) and a Redis slave StatefulSet. In this case, the pods will contain en extra container with Redis Sentinel. This container will form a cluster of Redis Sentinel nodes, which will promote a new master in case the actual one fails. In addition to this, only one service is exposed:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Redis service: Exposes port 6379 for Redis read-only operations and port 26379 for accesing Redis Sentinel."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"For read-only operations, access the service using port 6379. For write operations, it's necessary to access the Redis Sentinel cluster and query the current master using the command below (using redis-cli or similar:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.code,{children:"SENTINEL get-master-addr-by-name mymaster"})}),"\n",(0,r.jsx)(s.p,{children:"This command will return the address of the current master, which can be accessed from inside the cluster."}),"\n",(0,r.jsx)(s.p,{children:"In case the current master crashes, the Sentinel containers will elect a new master node."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://redis.io/topics/sentinel",children:"https://redis.io/topics/sentinel"})}),"\n",(0,r.jsx)(s.h3,{id:"redis-cluster",children:"Redis Cluster"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://redis.io/topics/cluster-tutorial",children:"https://redis.io/topics/cluster-tutorial"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://redis.io/topics/cluster-spec",children:"https://redis.io/topics/cluster-spec"})}),"\n",(0,r.jsx)(s.p,{children:"Replication - One leader many followers model"}),"\n",(0,r.jsx)(s.p,{children:"Clustering - Shard data across multiple nodes"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://redis.io/topics/cluster-tutorial",children:"https://redis.io/topics/cluster-tutorial"})}),"\n",(0,r.jsx)(s.p,{children:"Hybrid - Replication + Clustering"}),"\n",(0,r.jsxs)(s.p,{children:["Sentinel - ",(0,r.jsx)(s.a,{href:"https://redis.io/topics/sentinel",children:"https://redis.io/topics/sentinel"})]}),"\n",(0,r.jsx)(s.p,{children:"keydb - Multithreaded fork of redis"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://docs.keydb.dev/blog/2019/10/07/blog-post",children:"https://docs.keydb.dev/blog/2019/10/07/blog-post"})}),"\n",(0,r.jsx)(s.h2,{id:"twenproxy-by-twitter",children:"twenproxy (by twitter)"}),"\n",(0,r.jsxs)(s.p,{children:['twemproxy (pronounced "two-em-proxy"), aka nutcracker is a fast and lightweight proxy for ',(0,r.jsx)(s.a,{href:"http://www.memcached.org/",children:"memcached"})," and ",(0,r.jsx)(s.a,{href:"http://redis.io/",children:"redis"})," protocol. It was built primarily to reduce the number of connections to the caching servers on the backend. This, together with protocol pipelining and sharding enables you to horizontally scale your distributed caching architecture."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://github.com/twitter/twemproxy",children:"https://github.com/twitter/twemproxy"})}),"\n",(0,r.jsx)(s.h2,{id:"codis",children:"codis"}),"\n",(0,r.jsx)(s.p,{children:"Proxy based Redis cluster solution supporting pipeline and scaling dynamically"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image",src:t(960549).A+"",width:"1000",height:"498"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://github.com/CodisLabs/codis",children:"https://github.com/CodisLabs/codis"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Codis"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Twemproxy"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Redis Cluster"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"resharding without restarting cluster"}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"pipeline"}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"No"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"hash tags for multi-key operations"}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"multi-key operations while resharding"}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsxs)(s.td,{children:["No(",(0,r.jsx)(s.a,{href:"http://redis.io/topics/cluster-spec#multiple-keys-operations",children:"details"}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Redis clients supporting"}),(0,r.jsx)(s.td,{children:"Any clients"}),(0,r.jsx)(s.td,{children:"Any clients"}),(0,r.jsx)(s.td,{children:"Clients have to support cluster protocol"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"redis-vs-memcached",children:"Redis vs Memcached"}),"\n",(0,r.jsx)(s.p,{children:"Both Redis and MemCached are in-memory, open-source data stores. Memcached, a high-performance distributed memory cache service, is designed for simplicity while Redis offers a rich set of features that make it effective for a wide range of use cases."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Memcached"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Redis"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Sub-millisecond_latency",children:"Sub-millisecond latency"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Developer_ease_of_use",children:"Developer ease of use"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Data_partitioning",children:"Data partitioning"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Support_for_a_broad_set_of_programming_languages",children:"Support for a broad set of programming languages"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Advanced_data_structures",children:"Advanced data structures"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Multithreaded_architecture",children:(0,r.jsx)(s.strong,{children:"Multithreaded architecture"})})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Yes"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"-"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Snapshots",children:"Snapshots"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Replication",children:"Replication"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Transactions",children:"Transactions"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Pub.2FSub",children:"Pub/Sub"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Lua_scripting",children:"Lua scripting"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"Yes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached/#Geospatial_support",children:"Geospatial support"})}),(0,r.jsx)(s.td,{children:"-"}),(0,r.jsx)(s.td,{children:"Yes"})]})]})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://aws.amazon.com/elasticache/redis-vs-memcached",children:"https://aws.amazon.com/elasticache/redis-vs-memcached"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.youtube.com/watch?v=VhM2ByShhzE&ab_channel=freeCodeCamp.org",children:"Memcached Tutorial for Beginners - YouTube"})}),"\n",(0,r.jsx)(s.h2,{id:"dragonfly",children:"DragonFly"}),"\n",(0,r.jsx)(s.p,{children:"Dragonfly is a drop-in Redis replacement, designed to meet the performance and efficiency requirements of modern cloud-based applications. Organizations that switch to Dragonfly require less hardware and achieve dramatically improved data performance."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://www.dragonflydb.io/",children:"Dragonfly - The Fastest In-Memory Data Store"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://www.dragonflydb.io/blog/scaling-performance-redis-vs-dragonfly",children:"Redis vs. Dragonfly Scalability and Performance"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/dragonflydb/dragonfly",children:"GitHub - dragonflydb/dragonfly: A modern replacement for Redis and Memcached"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://www.youtube.com/watch?v=XbV1LoVsbME&ab_channel=ArpitBhayani",children:"DragonflyDB Architecture Overview, Internals, and Trade-offs - hitting 6.43 million ops/sec - YouTube"})}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"other-in-memory-database",children:"Other in-memory database"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"facebook rocksdb"}),"\n",(0,r.jsxs)(s.li,{children:["memcached - ",(0,r.jsx)(s.a,{href:"https://www.youtube.com/watch?v=NCePGsRZFus",children:"Memcached Architecture - Crash Course with Docker, Telnet, NodeJS - YouTube"})]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/paypal/junodb",children:"GitHub - paypal/junodb: JunoDB is PayPal's home-grown secure, consistent and highly available key-value store providing low, single digit millisecond, latency at any scale."})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://www.youtube.com/playlist?list=PLsdq-3Z1EPT3s3nghXpr0NDpgN3ZIoK4O",children:"Dissecting Juno DB - YouTube"})}),"\n",(0,r.jsx)(s.li,{children:"Aerospike"}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/dicedb/dice",children:"GitHub - DiceDB/dice: A drop-in replacement of Redis with SQL-based realtime reactivity."})}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"Cheatsheet on comparigin key-value stores",src:t(383349).A+"",width:"550",height:"658"})})]})}function o(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},383349:(e,s,t)=>{t.d(s,{A:()=>i});const i=t.p+"assets/images/Pasted image 20250327225921-a9bb98fb7bf38ea2fb70c6e6307c245b.png"},960549:(e,s,t)=>{t.d(s,{A:()=>i});const i=t.p+"assets/images/Redis-image1-47616a55d01abf3a22579a6b90fa9917.jpg"},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>d});var i=t(296540);const r={},n=i.createContext(r);function a(e){const s=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);