"use strict";(self.webpackChunkdeep_notes=self.webpackChunkdeep_notes||[]).push([[79569],{670006:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"technologies/kafka/kafka-configurations","title":"Kafka Configurations","description":"Broker Configurations","source":"@site/docs/technologies/kafka/kafka-configurations.md","sourceDirName":"technologies/kafka","slug":"/technologies/kafka/kafka-configurations","permalink":"/technologies/kafka/kafka-configurations","draft":false,"unlisted":false,"editUrl":"https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/technologies/kafka/kafka-configurations.md","tags":[],"version":"current","lastUpdatedBy":"Deepak Sood","lastUpdatedAt":1769598990000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Kafka Commands","permalink":"/technologies/kafka/kafka-commands"},"next":{"title":"Kafka Connect","permalink":"/technologies/kafka/kafka-connect"}}');var t=r(474848),i=r(28453);const d={},c="Kafka Configurations",o={},l=[{value:"Broker Configurations",id:"broker-configurations",level:2},{value:"Producer Configurations",id:"producer-configurations",level:2},{value:"Consumer Configurations",id:"consumer-configurations",level:2},{value:"Common / Client Configurations",id:"common--client-configurations",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Links",id:"links",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"kafka-configurations",children:"Kafka Configurations"})}),"\n",(0,t.jsx)(s.h2,{id:"broker-configurations",children:"Broker Configurations"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Configuration"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Description"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"log.retention.hours"})})}),(0,t.jsx)(s.td,{children:"The number of hours to keep a log file before deleting it (default is 168 hours / 7 days)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"log.retention.bytes"})})}),(0,t.jsx)(s.td,{children:"The maximum size of the log before messages are deleted (applied per partition)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"default.replication.factor"})})}),(0,t.jsx)(s.td,{children:"The default number of replicas created for automatically created topics."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"num.partitions"})})}),(0,t.jsx)(s.td,{children:"The default number of log partitions per topic if not specified at creation."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"min.insync.replicas"})})}),(0,t.jsx)(s.td,{children:"The minimum number of replicas that must acknowledge a write for it to be considered successful (critical for durability)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"auto.create.topics.enable"})})}),(0,t.jsx)(s.td,{children:"If true, enables automatic creation of topics when producers write to them (often set to false in production)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"advertised.listeners"})})}),(0,t.jsx)(s.td,{children:"The hostname and port the broker advertises to clients (producers/consumers) to connect to."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"log.segment.bytes"})})}),(0,t.jsx)(s.td,{children:"The maximum size of a single log file segment; once reached, a new segment is created."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"unclean.leader.election.enable"})})}),(0,t.jsx)(s.td,{children:"Indicates whether out-of-sync replicas can become leaders, trading data consistency for availability (default is false)."})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"producer-configurations",children:"Producer Configurations"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Configuration"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Description"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"bootstrap.servers"})})}),(0,t.jsx)(s.td,{children:"A list of host/port pairs to use for establishing the initial connection to the Kafka cluster."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"acks"})})}),(0,t.jsxs)(s.td,{children:["Determines how many partition replicas must acknowledge a record before the producer considers the write successful (",(0,t.jsx)(s.code,{children:"0"}),", ",(0,t.jsx)(s.code,{children:"1"}),", or ",(0,t.jsx)(s.code,{children:"all"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"linger.ms"})})}),(0,t.jsx)(s.td,{children:"The time (in milliseconds) the producer waits for more records to arrive to batch them together before sending."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"batch.size"})})}),(0,t.jsx)(s.td,{children:"The maximum size (in bytes) of a batch of records sent to a partition."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"compression.type"})})}),(0,t.jsxs)(s.td,{children:["The compression algorithm used for batches of data (e.g., ",(0,t.jsx)(s.code,{children:"gzip"}),", ",(0,t.jsx)(s.code,{children:"snappy"}),", ",(0,t.jsx)(s.code,{children:"lz4"}),", ",(0,t.jsx)(s.code,{children:"zstd"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"retries"})})}),(0,t.jsx)(s.td,{children:"The number of times the producer will attempt to resend a message if the send fails transiently."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"enable.idempotence"})})}),(0,t.jsx)(s.td,{children:"Ensures that messages are delivered exactly once to a partition in order, preventing duplicates."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"buffer.memory"})})}),(0,t.jsx)(s.td,{children:"The total bytes of memory the producer can use to buffer records waiting to be sent to the server."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"max.request.size"})})}),(0,t.jsx)(s.td,{children:"The maximum size of a request in bytes; limits the size of the largest message or batch sent."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"key.serializer"})})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"(Required)"})," The class used to convert the key object into bytes (e.g., ",(0,t.jsx)(s.code,{children:"StringSerializer"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"value.serializer"})})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"(Required)"})," The class used to convert the value object into bytes."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"max.in.flight.requests.per.connection"})})}),(0,t.jsxs)(s.td,{children:["Max unacknowledged requests sent to a single broker; set to ",(0,t.jsx)(s.code,{children:"1"})," for strict ordering (if ",(0,t.jsx)(s.code,{children:"enable.idempotence=false"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"max.block.ms"})})}),(0,t.jsxs)(s.td,{children:["How long ",(0,t.jsx)(s.code,{children:"producer.send()"})," blocks when the buffer is full or metadata is unavailable before throwing an exception."]})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"consumer-configurations",children:"Consumer Configurations"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Configuration"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Description"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"group.id"})})}),(0,t.jsx)(s.td,{children:"A unique string that identifies the consumer group this consumer belongs to."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"auto.offset.reset"})})}),(0,t.jsxs)(s.td,{children:["What to do when there is no initial offset in Kafka or if the current offset does not exist (",(0,t.jsx)(s.code,{children:"earliest"})," or ",(0,t.jsx)(s.code,{children:"latest"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"enable.auto.commit"})})}),(0,t.jsx)(s.td,{children:"If true, the consumer's offset will be periodically committed in the background."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"max.poll.records"})})}),(0,t.jsxs)(s.td,{children:["The maximum number of records returned in a single call to ",(0,t.jsx)(s.code,{children:"poll()"}),"."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"session.timeout.ms"})})}),(0,t.jsx)(s.td,{children:"The maximum time the broker waits for a heartbeat before considering the consumer dead and rebalancing the group."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"heartbeat.interval.ms"})})}),(0,t.jsxs)(s.td,{children:["The expected time between heartbeats to the consumer coordinator (must be lower than ",(0,t.jsx)(s.code,{children:"session.timeout.ms"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"fetch.min.bytes"})})}),(0,t.jsx)(s.td,{children:"The minimum amount of data the server should return for a fetch request (helps reduce request overhead)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"isolation.level"})})}),(0,t.jsxs)(s.td,{children:["Controls how transactional messages are read (",(0,t.jsx)(s.code,{children:"read_committed"})," skips aborted transactions, ",(0,t.jsx)(s.code,{children:"read_uncommitted"})," sees everything)."]})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"common--client-configurations",children:"Common / Client Configurations"}),"\n",(0,t.jsxs)(s.p,{children:["These settings apply to ",(0,t.jsx)(s.strong,{children:"both Producers and Consumers"})," (and Admin clients) to manage network connections and timeouts."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Configuration"})}),(0,t.jsx)(s.th,{children:(0,t.jsx)(s.strong,{children:"Description"})})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"client.id"})})}),(0,t.jsx)(s.td,{children:"A logical identifier string passed to the server to track the source of requests in logs and metrics."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"request.timeout.ms"})})}),(0,t.jsx)(s.td,{children:"The maximum time the client waits for a response from the broker before giving up and retrying (or failing)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"receive.buffer.bytes"})})}),(0,t.jsx)(s.td,{children:"The size of the TCP receive buffer (SO_RCVBUF) to use when reading data."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"send.buffer.bytes"})})}),(0,t.jsx)(s.td,{children:"The size of the TCP send buffer (SO_SNDBUF) to use when sending data."})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://www.youtube.com/watch?v=HkUfzavcLj0",children:"Common Apache Kafka Mistakes to Avoid - YouTube"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"It's a problem to use multiple producers in a single service"}),"\n",(0,t.jsx)(s.li,{children:"The trade off between throughput and latency with batching"}),"\n",(0,t.jsx)(s.li,{children:"What is linger.ms"}),"\n",(0,t.jsx)(s.li,{children:"Enable compression"}),"\n",(0,t.jsx)(s.li,{children:"Define Producer Callbacks"}),"\n",(0,t.jsx)(s.li,{children:"One consumer per thread in a single service instance"}),"\n",(0,t.jsx)(s.li,{children:"Trogdor"}),"\n",(0,t.jsx)(s.li,{children:"Over Committing"}),"\n",(0,t.jsxs)(s.li,{children:["Provide a ",(0,t.jsx)(s.code,{children:"ConsumerRebalanceListener"})]}),"\n",(0,t.jsx)(s.li,{children:"Undersized per Kafka Consumer instances"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"links",children:"Links"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/confluentinc/librdkafka/blob/master/CONFIGURATION.md",children:"librdkafka/CONFIGURATION.md at master \xb7 confluentinc/librdkafka \xb7 GitHub"})}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>d,x:()=>c});var n=r(296540);const t={},i=n.createContext(t);function d(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);