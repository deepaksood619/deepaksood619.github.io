<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-technologies/kafka/kafka-consumers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Kafka Consumers | Deep Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" name="twitter:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" property="og:url" content="https://deepaksood619.github.io/technologies/kafka/kafka-consumers"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Kafka Consumers | Deep Notes"><meta data-rh="true" name="description" content="The consumer is the receiver of the message in Kafka"><meta data-rh="true" property="og:description" content="The consumer is the receiver of the message in Kafka"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://deepaksood619.github.io/technologies/kafka/kafka-consumers"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/technologies/kafka/kafka-consumers" hreflang="en"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/technologies/kafka/kafka-consumers" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X3OY8NGHVH-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Technologies","item":"https://deepaksood619.github.io/technologies/"},{"@type":"ListItem","position":2,"name":"Kafka","item":"https://deepaksood619.github.io/technologies/kafka/"},{"@type":"ListItem","position":3,"name":"Kafka Consumers","item":"https://deepaksood619.github.io/technologies/kafka/kafka-consumers"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSZMJXWSH3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSZMJXWSH3",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TN3KBF4",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Deep Notes" href="/opensearch.xml">
<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(53, 120, 229)">


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5616865131274062" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.9f55d0bd.css">
<script src="/assets/js/runtime~main.7b3a7cc3.js" defer="defer"></script>
<script src="/assets/js/main.c96be3a1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN3KBF4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deep Notes</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/deepaksood619" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.linkedin.com/in/deepaksood619/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/about-deepak-sood/">About Deepak Sood</a><button aria-label="Expand sidebar category &#x27;About Deepak Sood&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ai/">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/algorithms/">Algorithms</a><button aria-label="Expand sidebar category &#x27;Algorithms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/book-summaries/">Book Summaries</a><button aria-label="Expand sidebar category &#x27;Book Summaries&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/">Cloud</a><button aria-label="Expand sidebar category &#x27;Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/computer-science/">Computer Science</a><button aria-label="Expand sidebar category &#x27;Computer Science&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/courses/">Courses / Certifications</a><button aria-label="Expand sidebar category &#x27;Courses / Certifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-structures/">Data Structures</a><button aria-label="Expand sidebar category &#x27;Data Structures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-warehouses/">Data Warehouses</a><button aria-label="Expand sidebar category &#x27;Data Warehouses&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases/">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases-nosql/">NoSQL Databases</a><button aria-label="Expand sidebar category &#x27;NoSQL Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases-sql/">SQL Databases</a><button aria-label="Expand sidebar category &#x27;SQL Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/decentralized-applications/">Decentralized Applications</a><button aria-label="Expand sidebar category &#x27;Decentralized Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/economics/">Economics</a><button aria-label="Expand sidebar category &#x27;Economics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/education/">Education</a><button aria-label="Expand sidebar category &#x27;Education&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/knowledge/">Knowledge</a><button aria-label="Expand sidebar category &#x27;Knowledge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/languages/">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/management/">Management</a><button aria-label="Expand sidebar category &#x27;Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/mathematics/">Mathematics</a><button aria-label="Expand sidebar category &#x27;Mathematics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/psychology/">Psychology</a><button aria-label="Expand sidebar category &#x27;Psychology&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Deepak&#x27;s Wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/technologies/">Technologies</a><button aria-label="Collapse sidebar category &#x27;Technologies&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/apache/">Apache</a><button aria-label="Expand sidebar category &#x27;Apache&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/apache-airflow/">Airflow</a><button aria-label="Expand sidebar category &#x27;Airflow&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/apache-hadoop/">Apache Hadoop</a><button aria-label="Expand sidebar category &#x27;Apache Hadoop&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/apache-spark/">Apache Spark</a><button aria-label="Expand sidebar category &#x27;Apache Spark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/brokers/">Brokers</a><button aria-label="Expand sidebar category &#x27;Brokers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/celery/">Celery</a><button aria-label="Expand sidebar category &#x27;Celery&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/confluent/">Confluent</a><button aria-label="Expand sidebar category &#x27;Confluent&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/elasticsearch/">Elasticsearch</a><button aria-label="Expand sidebar category &#x27;Elasticsearch&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/flink/">Apache Flink</a><button aria-label="Expand sidebar category &#x27;Apache Flink&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/git/">Git</a><button aria-label="Expand sidebar category &#x27;Git&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/technologies/kafka/">Kafka</a><button aria-label="Collapse sidebar category &#x27;Kafka&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/comparison">Comparison</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/installing-kafka">Installing Kafka</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/intro-to-kafka">Intro to Kafka</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-architecture">Kafka Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-brokers">Kafka Brokers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-commands">Kafka Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-configurations">Kafka Configurations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-connect">Kafka Connect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/technologies/kafka/kafka-consumers">Kafka Consumers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-guarantees">Kafka Guarantees</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-listeners">Kafka Listeners</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-message-key">Kafka Message Key</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-partitions">Partitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-producers">Kafka Producers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-python">kafka-python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-rest-proxy">kafka-rest proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-schema-registry-compatibility-rules">Kafka Schema Registry Compatibility Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-schema-registry">Kafka Schema Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-streams">Kafka Streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-topic-replication">Kafka Topic/Replication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafka-topics">Kafka Topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kafkacat-kcat">kafkacat / kcat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/kraft">Kafka without Zookeeper (Kafka with KRaft Mode)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/log-compaction">Log Compaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/migration-mirroring-replication">Migration / Mirroring / Replication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/others">Others</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/releases-upgrades-changelogs">Releases / Upgrades / Change logs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/kafka/security/">Security</a><button aria-label="Expand sidebar category &#x27;Security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/strimzi">Strimzi</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technologies/kafka/use-cases">Use Cases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/technologies/others/">Others</a><button aria-label="Expand sidebar category &#x27;Others&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/technologies/"><span>Technologies</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/technologies/kafka/"><span>Kafka</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Kafka Consumers</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kafka Consumers</h1></header>
<p>The consumer is the receiver of the message in Kafka</p>
<ul>
<li>Each consumer belongs to a consumer group</li>
<li>A consumer group may have one or more consumers</li>
<li>The consumers specify what topics they want to listen to</li>
<li>A message is sent to all the consumers in a consumer group</li>
<li>The consumer groups are used to control the messaging system</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inner-working">Inner Working<a href="#inner-working" class="hash-link" aria-label="Direct link to Inner Working" title="Direct link to Inner Working">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="heartbeats">Heartbeats<a href="#heartbeats" class="hash-link" aria-label="Direct link to Heartbeats" title="Direct link to Heartbeats">​</a></h3>
<ul>
<li>The way consumers maintain membership in a consumer group and ownership of the partitions assigned to them is by sending <em>heartbeats</em> to a Kafka broker designated as the <em>group coordinator</em> (this broker can be different for different consumer groups).</li>
<li>As long as the consumer is sending heartbeats at regular intervals, it is assumed to be alive, well, and processing messages from its partitions.</li>
<li>Heartbeats are sent when the consumer polls (i.e., retrieves records) and when it commits records it has consumed.</li>
<li>If the consumer stops sending heartbeats for long enough, its session will time out and the group coordinator will consider it dead and trigger a rebalance. If a consumer crashed and stopped processing messages, it will take the group coordinator a few seconds without heartbeats to decide it is dead and trigger the rebalance. During those seconds, no messages will be processed from the partitions owned by the dead consumer. When closing a consumer cleanly, the consumer will notify the group coordinator that it is leaving, and the group coordinator will trigger a rebalance immediately, reducing the gap in processing.</li>
<li>Please ensure that your Kafka consumer configuration has adequate session timeout and heartbeat interval settings. The session timeout should be long enough to accommodate the longest time it might take to process a message, and the heartbeat interval should be frequent enough to let the coordinator know the consumer is still alive.</li>
</ul>
<p><a href="https://medium.com/mercafacil/resolving-the-the-coordinator-is-not-aware-of-this-member-error-in-kafka-consumers-c1694d46b7a5" target="_blank" rel="noopener noreferrer">Resolving the &quot;The coordinator is not aware of this member&quot; Error in Kafka Consumers | by Joao Furtado | Mercafacil | Medium</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rebalance">Rebalance<a href="#rebalance" class="hash-link" aria-label="Direct link to Rebalance" title="Direct link to Rebalance">​</a></h3>
<ul>
<li>Moving partition ownership from one consumer to another</li>
<li>During a rebalance, consumers can&#x27;t consume messages, so a rebalance is basically a short window of unavailability of the entire consumer group</li>
<li>when partitions are moved from one consumer to another, the consumer loses its current state; if it was caching any data, it will need to refresh its caches - slowing down the application until the con‐ sumer sets up its state again.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-assignment-workflow-the-rebalance-protocol">The Assignment Workflow (The Rebalance Protocol)<a href="#the-assignment-workflow-the-rebalance-protocol" class="hash-link" aria-label="Direct link to The Assignment Workflow (The Rebalance Protocol)" title="Direct link to The Assignment Workflow (The Rebalance Protocol)">​</a></h3>
<ol>
<li><strong>Find Coordinator:</strong> Consumers send a request to any broker to find out which broker is their Group Coordinator.</li>
<li><strong>JoinGroup Phase:</strong> All consumers send a <code>JoinGroup</code> request to the Coordinator. They include metadata, such as which topics they subscribe to.</li>
<li><strong>Leader Election:</strong> The Coordinator selects the first consumer to join as the <strong>Group Leader</strong>.</li>
<li><strong>Distributing Info:</strong> The Coordinator sends the list of all active members to the Group Leader. (Other members just get a &quot;wait&quot; response).</li>
<li><strong>Assignment (The Decision):</strong> The <strong>Group Leader</strong> runs a partition assignment algorithm (see section 3 below) to map partitions to members.</li>
<li><strong>SyncGroup Phase:</strong>
<ul>
<li>The Leader sends the final assignments for <em>everyone</em> back to the Coordinator via a <code>SyncGroup</code> request.</li>
<li>Other members also send a <code>SyncGroup</code> request to the Coordinator (essentially asking, &quot;What is my assignment?&quot;).</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-the-process-of-assigning-partitions-to-brokers-work">How Does the Process of Assigning Partitions to Brokers Work?<a href="#how-does-the-process-of-assigning-partitions-to-brokers-work" class="hash-link" aria-label="Direct link to How Does the Process of Assigning Partitions to Brokers Work?" title="Direct link to How Does the Process of Assigning Partitions to Brokers Work?">​</a></h3>
<ul>
<li>When a consumer wants to join a group, it sends a <code>JoinGroup</code> request to the group coordinator. The first consumer to join the group becomes the <strong>group leader</strong>. The leader receives a list of all consumers in the group from the group coordinator (this will include all consumers that sent a heartbeat recently and which are therefore considered alive) and is responsible for assigning a subset of partitions to each consumer. It uses an implementation of PartitionAssignor to decide which partitions should be handled by which consumer.</li>
<li>Kafka has two built-in partition assignment policies. After deciding on the partition assignment, the consumer leader sends the list of assignments to the GroupCoordinator, which sends this information to all the consumers. Each consumer only sees his own assignment - the leader is the only client process that has the full list of consumers in the group and their assignments. This process repeats every time a rebalance happens.<!-- -->
<ul>
<li>partition.assignment.strategy <code>[ Range, RoundRobin, StickyAssignor ]</code></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-poll-loop">The poll loop<a href="#the-poll-loop" class="hash-link" aria-label="Direct link to The poll loop" title="Direct link to The poll loop">​</a></h3>
<p>At the heart of the consumer API is a simple loop for polling the server for more data. Once the consumer subscribes to topics, the poll loop handles all details of coordination, partition rebalances, heartbeats, and data fetching, leaving the developer with a clean API that simply returns available data from the assigned partitions.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="difference-between-poll-loop-and-fetch">Difference between Poll Loop and Fetch<a href="#difference-between-poll-loop-and-fetch" class="hash-link" aria-label="Direct link to Difference between Poll Loop and Fetch" title="Direct link to Difference between Poll Loop and Fetch">​</a></h4>
<ul>
<li><strong>Poll Loop (<code>consumer.poll()</code>):</strong> This is the high-level API method the application calls. It is the &quot;heartbeat&quot; of the consumer. It handles:<!-- -->
<ul>
<li><strong>Coordination:</strong> Sending heartbeats to the Consumer Group Coordinator to say &quot;I am alive.&quot;</li>
<li><strong>Rebalancing:</strong> Handling partition assignments if other consumers join/leave.</li>
<li><strong>Retrieving Records:</strong> It returns the records to your code.</li>
</ul>
</li>
<li><strong>Fetch:</strong> This is the internal network request mechanism. While <code>poll()</code> is running, the consumer client creates &quot;Fetch Requests&quot; to send to the brokers to pull raw bytes. The <code>poll()</code> loop wraps these fetch requests and manages the complexity of parsing the batches into individual records.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-of-consumers">Configuration of Consumers<a href="#configuration-of-consumers" class="hash-link" aria-label="Direct link to Configuration of Consumers" title="Direct link to Configuration of Consumers">​</a></h2>
<ul>
<li>fetch.min.bytes</li>
<li>fetch.max.wait.ms</li>
<li>max.partition.fetch.bytes</li>
<li>session.timeout.ms</li>
<li>auto.offset.reset</li>
<li>enable.auto.commit</li>
<li>partition.assignment.strategy <code>[ Range, RoundRobin ]</code></li>
<li>client.id</li>
<li>max.poll.records</li>
<li>receive.buffer.bytes and send.buffer.bytes</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="commits-and-offsets">Commits and Offsets<a href="#commits-and-offsets" class="hash-link" aria-label="Direct link to Commits and Offsets" title="Direct link to Commits and Offsets">​</a></h3>
<ul>
<li><code>_consumer_offsets</code> topic</li>
<li>Automatic Commit</li>
<li>Commit Current Offset<!-- -->
<ul>
<li><code>auto.commit.offset = [true, false]</code></li>
</ul>
</li>
<li>Asynchronous Commit</li>
<li>Commit Specified Offset<!-- -->
<ul>
<li><code>commitSync()</code> or <code>CommitAsync()</code></li>
</ul>
</li>
<li>Rebalance Listeners</li>
<li>Consuming Records with Specific Offsets</li>
<li>Exiting the consumer<!-- -->
<ul>
<li>consumer.wakeup()</li>
<li>consumer.close()</li>
</ul>
</li>
<li>Standalone Consumer, Consumer without a group</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-consumer-groups">Kafka Consumer Groups<a href="#kafka-consumer-groups" class="hash-link" aria-label="Direct link to Kafka Consumer Groups" title="Direct link to Kafka Consumer Groups">​</a></h2>
<p>A consumer group is a group of related consumers that perform a task, like putting data into Hadoop or sending messages to a service. Consumer groups each have unique offsets per partition. Different consumer groups can read from different locations in a partition.</p>
<p>The consumer groups have their own offset for every partition in the topic which is unique to what other consumer groups have.</p>
<p>A consumer group has a unique id. Each consumer group is a subscriber to one or more Kafka topics. Each consumer group maintains its offset per topic partition. If you need multiple subscribers, then you have multiple consumer groups. A record gets delivered to only one consumer in a consumer group.</p>
<p>Each consumer in a consumer group processes records and only one consumer in that group will get the same record. Consumers in a consumer group load balance record processing.</p>
<p>The partitions of any topics subscribed to by consumers in a consumer group are guaranteed to be assigned to at most one individual consumer in that group at any time. The messages from each topic partition are delivered to the assigned consumer strictly in the order they are stored in the log.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Technologies-Kafka-Kafka-Consumers-image1-7a77df28a44fe9d5b5b99b4a6da4ebf6.jpg" width="801" height="504" class="img_ev3q"></p>
<p>Consumers remember offset where they left off reading. Consumers groups each have their own offset per partition.</p>
<p>Suppose you have an application that needs to read messages from a Kafka topic, run some validations against them, and write the results to another data store. In this case your application will create a consumer object, subscribe to the appropriate topic, and start receiving messages, validating them and writing the results. This may work well for a while, but what if the rate at which producers write messages to the topic exceeds the rate at which your application can validate them? If you are limited to a single consumer reading and processing the data, your application may fall farther and farther behind, unable to keep up with the rate of incoming messages. Obviously there is a need to scale consumption from topics. Just like multiple producers can write to the same topic, we need to allow multiple consumers to read from the same topic, splitting the data between them.</p>
<p>Kafka consumers are typically part of aconsumer group. When multiple consumers are subscribed to a topic and belong to the same consumer group, each consumer in the group will receive messages from a different subset of the partitions in the topic.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Technologies-Kafka-Kafka-Consumers-image2-f874730cdefdc2e9fce0f522cf3e9359.jpg" width="710" height="501" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-consumer-load-share">Kafka Consumer Load Share<a href="#kafka-consumer-load-share" class="hash-link" aria-label="Direct link to Kafka Consumer Load Share" title="Direct link to Kafka Consumer Load Share">​</a></h2>
<p>Kafka consumer consumption divides partitions over consumer instances within a consumer group. Each consumer in the consumer group is an exclusive consumer of a &quot;fair share&quot; of partitions. This is how Kafka does load balancing of consumers in a consumer group. Consumer membership within a consumer group is handled by the Kafka protocol dynamically. If new consumers join a consumer group, it gets a share of partitions. If a consumer dies, its partitions are split among the remaining live consumers in the consumer group. This is how Kafka does fail over of consumers in a consumer group.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-consumer-failover">Kafka Consumer Failover<a href="#kafka-consumer-failover" class="hash-link" aria-label="Direct link to Kafka Consumer Failover" title="Direct link to Kafka Consumer Failover">​</a></h2>
<p>Consumers notify the Kafka broker when they have successfully processed a record, which advances the offset.</p>
<p>If a consumer fails before sending commit offset to Kafka broker, then a different consumer can continue from the last committed offset.</p>
<p>If a consumer fails after processing the record but before sending the commit to the broker, then some Kafka records could be reprocessed. In this scenario, Kafka implements the at least once behavior, and you should make sure the messages (record deliveries ) are idempotent.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="offset-management">Offset Management<a href="#offset-management" class="hash-link" aria-label="Direct link to Offset Management" title="Direct link to Offset Management">​</a></h2>
<p>Kafka stores offset data in a topic called <code>__consumer_offset</code>. These topics use log compaction, which means they only save the most recent value per key.</p>
<p>When a consumer has processed data, it should commit offsets. If consumer process dies, it will be able to start up and start reading where it left off based on offset stored in <code>__consumer_offset</code> or as discussed another consumer in the consumer group can take over.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-can-kafka-consumers-see">What Can Kafka Consumers See?<a href="#what-can-kafka-consumers-see" class="hash-link" aria-label="Direct link to What Can Kafka Consumers See?" title="Direct link to What Can Kafka Consumers See?">​</a></h2>
<p>What records can be consumed by a Kafka consumer? Consumers can&#x27;t read un-replicated data. Kafka consumers can only consume messages beyond the &quot;High Watermark&quot; offset of the partition. &quot;Log end offset&quot; is offset of the last record written to log partition and where producers writes to next.</p>
<p>&quot;High Watermark&quot; is the offset of the last record that was successfully replicated to all partition&#x27;s followers. Consumer only reads up to the &quot;High Watermark&quot;.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="when-can-a-consumer-see-a-record">When can a consumer see a record?<a href="#when-can-a-consumer-see-a-record" class="hash-link" aria-label="Direct link to When can a consumer see a record?" title="Direct link to When can a consumer see a record?">​</a></h2>
<p>A consumer can see a record after the record gets fully replicated to all followers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-to-partition-cardinality---load-sharing-redux">Consumer to Partition Cardinality - Load Sharing Redux<a href="#consumer-to-partition-cardinality---load-sharing-redux" class="hash-link" aria-label="Direct link to Consumer to Partition Cardinality - Load Sharing Redux" title="Direct link to Consumer to Partition Cardinality - Load Sharing Redux">​</a></h2>
<p>Only a single consumer from the same consumer group can access a single partition. If consumer group count exceeds the partition count, then the extra consumers remain idle. Kafka can use the idle consumers for failover. If there are more partitions than consumer group, then some consumers will read from more than one partition.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Technologies-Kafka-Kafka-Consumers-image3-42dbc856b2b4f8d9f8e99776a32813c0.jpg" width="804" height="548" class="img_ev3q"></p>
<p>Notice that server 1 has topic partition P2, P3, and P4, while server 2 has partition P0, P1, and P5. Notice that Consumer C0 from Consumer Group A is processing records from P0 and P2. Notice that no single partition is shared by any consumer from any consumer group. Notice that each partition gets its fair share of partitions for the topics.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="multi-threaded-kafka-consumers">Multi-Threaded Kafka Consumers<a href="#multi-threaded-kafka-consumers" class="hash-link" aria-label="Direct link to Multi-Threaded Kafka Consumers" title="Direct link to Multi-Threaded Kafka Consumers">​</a></h2>
<p>You can run more than one Consumer in a JVM process by using threads.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-with-many-threads">Consumer With Many Threads<a href="#consumer-with-many-threads" class="hash-link" aria-label="Direct link to Consumer With Many Threads" title="Direct link to Consumer With Many Threads">​</a></h2>
<p>If processing a record takes a while, a single Consumer can run multiple threads to process records, but it is harder to manage offset for each Thread/Task. If one consumer runs multiple threads, then two messages on the same partitions could be processed by two different threads which make it hard to guarantee record delivery order without complex thread coordination. This setup might be appropriate if processing a single task takes a long time, but try to avoid it.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="thread-per-consumer">Thread per Consumer<a href="#thread-per-consumer" class="hash-link" aria-label="Direct link to Thread per Consumer" title="Direct link to Thread per Consumer">​</a></h2>
<p>If you need to run multiple consumers, then run each consumer in their own thread. This way Kafka can deliver record batches to the consumer and the consumer does not have to worry about the offset ordering. A thread per consumer makes it easier to manage offsets. It is also simpler to manage failover (each process runs X num of consumer threads) as you can allow Kafka to do the brunt of the work.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-happens-if-you-run-multiple-consumers-in-many-threads-in-the-same-jvm">What happens if you run multiple consumers in many threads in the same JVM?<a href="#what-happens-if-you-run-multiple-consumers-in-many-threads-in-the-same-jvm" class="hash-link" aria-label="Direct link to What happens if you run multiple consumers in many threads in the same JVM?" title="Direct link to What happens if you run multiple consumers in many threads in the same JVM?">​</a></h2>
<p>Each thread manages a share of partitions for that consumer group.</p>
<p><img decoding="async" loading="lazy" alt="image" src="data:image/jpeg;base64,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" width="644" height="203" class="img_ev3q"></p>
<p>When a partition gets reassigned to another consumer in the group, the initial position is set to the last committed offset. If the consumer in the example above suddenly crashed, then the group member taking over the partition would begin consumption from offset 1. In that case, it would have to reprocess the messages up to the crashed consumer&#x27;s position of 6.</p>
<p>The diagram also shows two other significant positions in the log. The log end offset is the offset of the last message written to the log. The high watermark is the offset of the last message that was successfully copied to all of the log&#x27;s replicas. From the perspective of the consumer, the main thing to know is that you can only read up to the high watermark. This prevents the consumer from reading unreplicated data which could later be lost.</p>
<p><a href="https://www.confluent.io/blog/tutorial-getting-started-with-the-new-apache-kafka-0-9-consumer-client" target="_blank" rel="noopener noreferrer">https://www.confluent.io/blog/tutorial-getting-started-with-the-new-apache-kafka-0-9-consumer-client</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-partition-assignment-strategies">Kafka Partition Assignment Strategies<a href="#kafka-partition-assignment-strategies" class="hash-link" aria-label="Direct link to Kafka Partition Assignment Strategies" title="Direct link to Kafka Partition Assignment Strategies">​</a></h2>
<p>When creating a new Kafka consumer, we can configure the strategy that will be used to assign the partitions amongst the consumer instances.</p>
<p>The assignment strategy is configurable through the property <code>partition.assignment.strategy</code></p>
<p>Kafka Clients provides three built-in strategies</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-range-default">1. Range (default)<a href="#1-range-default" class="hash-link" aria-label="Direct link to 1. Range (default)" title="Direct link to 1. Range (default)">​</a></h3>
<p>Assigns to each consumer a consecutive subset of partitions from each topic it subscribes to. So if consumers C1 and C2 are subscribed to two topics, T1 and T2, and each of the topics has three partitions, then C1 will be assigned partitions 0 and 1 from topics T1 and T2, while C2 will be assigned partition 2 from those topics. Because each topic has an uneven number of partitions and the assignment is done for each topic independently, the first consumer ends up with more partitions than the second. This happens whenever Range assignment is used and the number of consumers does not divide the number of partitions in each topic neatly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-roundrobin">2. RoundRobin<a href="#2-roundrobin" class="hash-link" aria-label="Direct link to 2. RoundRobin" title="Direct link to 2. RoundRobin">​</a></h3>
<p>Takes all the partitions from all subscribed topics and assigns them to consumers sequentially, one by one. If C1 and C2 described previously used RoundRobin assignment, C1 would have partitions 0 and 2 from topic T1 and partition 1 from topic T2. C2 would have partition 1 from topic T1 and partitions 0 and 2 from topic T2. In general, if all consumers are subscribed to the same topics (a very common scenario), RoundRobin assignment will end up with all consumers having the same number of partitions (or at most 1 partition difference).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-stickyassignor">3. StickyAssignor<a href="#3-stickyassignor" class="hash-link" aria-label="Direct link to 3. StickyAssignor" title="Direct link to 3. StickyAssignor">​</a></h3>
<p>The goal here is two-fold: create a balanced assignment, but also minimize the number of partitions that move from one consumer to another during a rebalance.</p>
<ul>
<li><strong>Why use it:</strong> Moving a partition is expensive (the consumer has to drop local cache/state and the new owner has to rebuild it). Sticky assignment tries to keep partitions with their previous owners as much as possible.</li>
</ul>
<p><a href="https://medium.com/streamthoughts/understanding-kafka-partition-assignment-strategies-and-how-to-write-your-own-custom-assignor-ebeda1fc06f3" target="_blank" rel="noopener noreferrer">https://medium.com/streamthoughts/understanding-kafka-partition-assignment-strategies-and-how-to-write-your-own-custom-assignor-ebeda1fc06f3</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4--cooperative-sticky-assignor-incremental">4.  Cooperative Sticky Assignor (Incremental)<a href="#4--cooperative-sticky-assignor-incremental" class="hash-link" aria-label="Direct link to 4.  Cooperative Sticky Assignor (Incremental)" title="Direct link to 4.  Cooperative Sticky Assignor (Incremental)">​</a></h3>
<p>This is the modern standard (available since Kafka 2.4).</p>
<ul>
<li><strong>The Old Way (Eager Rebalance):</strong> Historically, when a rebalance started, everyone had to stop processing, give up <em>all</em> partitions, and wait for new assignments. This is a &quot;stop-the-world&quot; event.</li>
<li><strong>The New Way (Cooperative):</strong> Consumers only give up partitions that <em>need</em> to be moved to a different consumer. They keep processing their current partitions while the rebalance happens in the background.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="links">Links<a href="#links" class="hash-link" aria-label="Direct link to Links" title="Direct link to Links">​</a></h2>
<ul>
<li><a href="https://www.confluent.io/blog/kafka-python-asyncio-integration" target="_blank" rel="noopener noreferrer">Integrating Apache Kafka with Python Asyncio Web Applications</a></li>
<li><a href="https://www.oreilly.com/library/view/kafka-the-definitive/9781491936153/ch04.html" target="_blank" rel="noopener noreferrer">https://www.oreilly.com/library/view/kafka-the-definitive/9781491936153/ch04.html</a></li>
<li><a href="https://medium.com/@andy.bryant/processing-guarantees-in-kafka-12dd2e30be0e" target="_blank" rel="noopener noreferrer">https://medium.com/@andy.bryant/processing-guarantees-in-kafka-12dd2e30be0e</a></li>
<li><a href="https://streaml.io/blog/exactly-once" target="_blank" rel="noopener noreferrer">https://streaml.io/blog/exactly-once</a></li>
<li><a href="https://www.uber.com/en-IN/blog/introducing-ufowarder/" target="_blank" rel="noopener noreferrer">Introducing uFowarder: The Consumer Proxy for Kafka Async Queuing | Uber Blog</a>
<ul>
<li><a href="https://github.com/uber/uForwarder" target="_blank" rel="noopener noreferrer">GitHub - uber/uForwarder: Apache Kafka is an open-source distributed event streaming platform used by thousands of companies. uForwarder aims to address several pain points while using Apache Kafka for pub-sub message queueing at scale, including partition scalability and head-of-line blocking.</a></li>
</ul>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/technologies/kafka/kafka-consumers.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-15T18:28:05.000Z" itemprop="dateModified">Feb 15, 2026</time></b> by <b>Deepak Sood</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/technologies/kafka/kafka-connect"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kafka Connect</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/technologies/kafka/kafka-guarantees"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kafka Guarantees</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#inner-working" class="table-of-contents__link toc-highlight">Inner Working</a><ul><li><a href="#heartbeats" class="table-of-contents__link toc-highlight">Heartbeats</a></li><li><a href="#rebalance" class="table-of-contents__link toc-highlight">Rebalance</a></li><li><a href="#the-assignment-workflow-the-rebalance-protocol" class="table-of-contents__link toc-highlight">The Assignment Workflow (The Rebalance Protocol)</a></li><li><a href="#how-does-the-process-of-assigning-partitions-to-brokers-work" class="table-of-contents__link toc-highlight">How Does the Process of Assigning Partitions to Brokers Work?</a></li><li><a href="#the-poll-loop" class="table-of-contents__link toc-highlight">The poll loop</a></li></ul></li><li><a href="#configuration-of-consumers" class="table-of-contents__link toc-highlight">Configuration of Consumers</a><ul><li><a href="#commits-and-offsets" class="table-of-contents__link toc-highlight">Commits and Offsets</a></li></ul></li><li><a href="#kafka-consumer-groups" class="table-of-contents__link toc-highlight">Kafka Consumer Groups</a></li><li><a href="#kafka-consumer-load-share" class="table-of-contents__link toc-highlight">Kafka Consumer Load Share</a></li><li><a href="#kafka-consumer-failover" class="table-of-contents__link toc-highlight">Kafka Consumer Failover</a></li><li><a href="#offset-management" class="table-of-contents__link toc-highlight">Offset Management</a></li><li><a href="#what-can-kafka-consumers-see" class="table-of-contents__link toc-highlight">What Can Kafka Consumers See?</a></li><li><a href="#when-can-a-consumer-see-a-record" class="table-of-contents__link toc-highlight">When can a consumer see a record?</a></li><li><a href="#consumer-to-partition-cardinality---load-sharing-redux" class="table-of-contents__link toc-highlight">Consumer to Partition Cardinality - Load Sharing Redux</a></li><li><a href="#multi-threaded-kafka-consumers" class="table-of-contents__link toc-highlight">Multi-Threaded Kafka Consumers</a></li><li><a href="#consumer-with-many-threads" class="table-of-contents__link toc-highlight">Consumer With Many Threads</a></li><li><a href="#thread-per-consumer" class="table-of-contents__link toc-highlight">Thread per Consumer</a></li><li><a href="#what-happens-if-you-run-multiple-consumers-in-many-threads-in-the-same-jvm" class="table-of-contents__link toc-highlight">What happens if you run multiple consumers in many threads in the same JVM?</a></li><li><a href="#kafka-partition-assignment-strategies" class="table-of-contents__link toc-highlight">Kafka Partition Assignment Strategies</a><ul><li><a href="#1-range-default" class="table-of-contents__link toc-highlight">1. Range (default)</a></li><li><a href="#2-roundrobin" class="table-of-contents__link toc-highlight">2. RoundRobin</a></li><li><a href="#3-stickyassignor" class="table-of-contents__link toc-highlight">3. StickyAssignor</a></li><li><a href="#4--cooperative-sticky-assignor-incremental" class="table-of-contents__link toc-highlight">4.  Cooperative Sticky Assignor (Incremental)</a></li></ul></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Deep Notes, Built with ❤️</div></div></div></footer></div>
</body>
</html>