<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-databases/concepts/concurrency-control" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Concurrency Control | Deep Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" name="twitter:image" content="https://deepaksood619.github.io/img/timeline_blurred.webp"><meta data-rh="true" property="og:url" content="https://deepaksood619.github.io/databases/concepts/concurrency-control"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Concurrency Control | Deep Notes"><meta data-rh="true" name="description" content="The protocol to allow transactions to access a database in a multi-programmed fashion while preserving the illusion that each of them is executing alone on a dedicated system"><meta data-rh="true" property="og:description" content="The protocol to allow transactions to access a database in a multi-programmed fashion while preserving the illusion that each of them is executing alone on a dedicated system"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://deepaksood619.github.io/databases/concepts/concurrency-control"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/databases/concepts/concurrency-control" hreflang="en"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/databases/concepts/concurrency-control" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X3OY8NGHVH-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Databases","item":"https://deepaksood619.github.io/databases/"},{"@type":"ListItem","position":2,"name":"Databases Concepts","item":"https://deepaksood619.github.io/databases/concepts/"},{"@type":"ListItem","position":3,"name":"Concurrency Control","item":"https://deepaksood619.github.io/databases/concepts/concurrency-control"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSZMJXWSH3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSZMJXWSH3",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TN3KBF4",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Deep Notes" href="/opensearch.xml">
<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(53, 120, 229)">


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5616865131274062" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.9f55d0bd.css">
<script src="/assets/js/runtime~main.7b3a7cc3.js" defer="defer"></script>
<script src="/assets/js/main.c96be3a1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN3KBF4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deep Notes</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/deepaksood619" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.linkedin.com/in/deepaksood619/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/about-deepak-sood/">About Deepak Sood</a><button aria-label="Expand sidebar category &#x27;About Deepak Sood&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ai/">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/algorithms/">Algorithms</a><button aria-label="Expand sidebar category &#x27;Algorithms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/book-summaries/">Book Summaries</a><button aria-label="Expand sidebar category &#x27;Book Summaries&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/">Cloud</a><button aria-label="Expand sidebar category &#x27;Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/computer-science/">Computer Science</a><button aria-label="Expand sidebar category &#x27;Computer Science&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/courses/">Courses / Certifications</a><button aria-label="Expand sidebar category &#x27;Courses / Certifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-structures/">Data Structures</a><button aria-label="Expand sidebar category &#x27;Data Structures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-warehouses/">Data Warehouses</a><button aria-label="Expand sidebar category &#x27;Data Warehouses&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/databases/">Databases</a><button aria-label="Collapse sidebar category &#x27;Databases&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/databases/concepts/">Databases Concepts</a><button aria-label="Collapse sidebar category &#x27;Databases Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/acid-and-base">ACID and BASE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/amazon-databases">Amazon Databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/comparisons">Comparisons</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/databases/concepts/concurrency-control">Concurrency Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/core-concepts">Core Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/database-workloads">Database Workloads</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/disk-oriented-vs-in-memory-dbs">Disk oriented vs in-memory DBs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/history">History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/isolation-levels">Isolation Levels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/mvcc-multiversion-concurrency-control">MVCC, MultiVersion Concurrency Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/others">Others</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/rum-conjecture">RUM Conjecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/databases/concepts/types-of-databases">Types of Databases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases/indexing/">Indexing</a><button aria-label="Expand sidebar category &#x27;Indexing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases/modeling/">Modeling</a><button aria-label="Expand sidebar category &#x27;Modeling&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/databases/others/">Others</a><button aria-label="Expand sidebar category &#x27;Others&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases-nosql/">NoSQL Databases</a><button aria-label="Expand sidebar category &#x27;NoSQL Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases-sql/">SQL Databases</a><button aria-label="Expand sidebar category &#x27;SQL Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/decentralized-applications/">Decentralized Applications</a><button aria-label="Expand sidebar category &#x27;Decentralized Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/economics/">Economics</a><button aria-label="Expand sidebar category &#x27;Economics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/education/">Education</a><button aria-label="Expand sidebar category &#x27;Education&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/knowledge/">Knowledge</a><button aria-label="Expand sidebar category &#x27;Knowledge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/languages/">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/management/">Management</a><button aria-label="Expand sidebar category &#x27;Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/mathematics/">Mathematics</a><button aria-label="Expand sidebar category &#x27;Mathematics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/psychology/">Psychology</a><button aria-label="Expand sidebar category &#x27;Psychology&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Deepak&#x27;s Wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/technologies/">Technologies</a><button aria-label="Expand sidebar category &#x27;Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/databases/"><span>Databases</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/databases/concepts/"><span>Databases Concepts</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Concurrency Control</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Concurrency Control</h1></header>
<p>The protocol to allow transactions to access a database in a multi-programmed fashion while preserving the illusion that each of them is executing alone on a dedicated system</p>
<ul>
<li>Provides Atomicity + Isolation in ACID</li>
<li>The goal is to have the effect of a group of transactions on the database&#x27;s state is equivalent to any serial execution of all transactions.</li>
</ul>
<p>Computer systems, both <a href="https://en.wikipedia.org/wiki/Software" target="_blank" rel="noopener noreferrer">software</a> and <a href="https://en.wikipedia.org/wiki/Computer_hardware" target="_blank" rel="noopener noreferrer">hardware</a>, consist of modules, or components. Each component is designed to operate correctly, i.e., to obey or to meet certain consistency rules. When components that operate concurrently interact by messaging or by sharing accessed data (in <a href="https://en.wikipedia.org/wiki/Computer_memory" target="_blank" rel="noopener noreferrer">memory</a> or <a href="https://en.wikipedia.org/wiki/Computer_data_storage" target="_blank" rel="noopener noreferrer">storage</a>), a certain component&#x27;s consistency may be violated by another component. The general area of concurrency control provides rules, methods, design methodologies, and <a href="https://en.wikipedia.org/wiki/Scientific_theory" target="_blank" rel="noopener noreferrer">theories</a> to maintain the consistency of components operating concurrently while interacting, and thus the consistency and correctness of the whole system. Introducing concurrency control into a system means applying operation constraints which typically result in some performance reduction. Operation consistency and correctness should be achieved with as good as possible efficiency, without reducing performance below reasonable levels. Concurrency control can require significant additional complexity and overhead in a <a href="https://en.wikipedia.org/wiki/Concurrent_algorithm" target="_blank" rel="noopener noreferrer">concurrent algorithm</a> compared to the simpler <a href="https://en.wikipedia.org/wiki/Sequential_algorithm" target="_blank" rel="noopener noreferrer">sequential algorithm</a>.</p>
<p>For example, a failure in concurrency control can result in <a href="https://en.wikipedia.org/wiki/Data_corruption" target="_blank" rel="noopener noreferrer">data corruption</a> from <a href="https://en.wikipedia.org/w/index.php?title=Torn_data-access_operation&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener noreferrer">torn read or write operations</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-concurreny-control">MySQL Concurreny Control<a href="#mysql-concurreny-control" class="hash-link" aria-label="Direct link to MySQL Concurreny Control" title="Direct link to MySQL Concurreny Control">​</a></h2>
<ul>
<li>Lock based concurrency control</li>
<li>Multi version concurrency control (MVCC)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="concurrency-control-mechanisms">Concurrency control mechanisms<a href="#concurrency-control-mechanisms" class="hash-link" aria-label="Direct link to Concurrency control mechanisms" title="Direct link to Concurrency control mechanisms">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimistic-vs-pessimistic-locking">Optimistic vs Pessimistic Locking<a href="#optimistic-vs-pessimistic-locking" class="hash-link" aria-label="Direct link to Optimistic vs Pessimistic Locking" title="Direct link to Optimistic vs Pessimistic Locking">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pessimistic-locking">Pessimistic Locking<a href="#pessimistic-locking" class="hash-link" aria-label="Direct link to Pessimistic Locking" title="Direct link to Pessimistic Locking">​</a></h4>
<p>Acquire all the locks beforehand and then commit our transaction</p>
<p><a href="https://www.youtube.com/watch?v=4F-WiPFrPsA" target="_blank" rel="noopener noreferrer">Understanding Pessimistic Locking with Mutex - YouTube</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optimistic-locking">Optimistic Locking<a href="#optimistic-locking" class="hash-link" aria-label="Direct link to Optimistic Locking" title="Direct link to Optimistic Locking">​</a></h4>
<p>We do not acquire any locks on data and when commiting a transaction we check to see if any other transaction updated the record we are working on.</p>
<p><a href="https://www.youtube.com/watch?v=eMotoFvgdUo" target="_blank" rel="noopener noreferrer">Optimistic Locking - What, When, Why, and How? - YouTube</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimistic-vs-pessimistic-concurrency-control">Optimistic vs Pessimistic Concurrency Control<a href="#optimistic-vs-pessimistic-concurrency-control" class="hash-link" aria-label="Direct link to Optimistic vs Pessimistic Concurrency Control" title="Direct link to Optimistic vs Pessimistic Concurrency Control">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pessimistic-concurrency-control">Pessimistic concurrency control<a href="#pessimistic-concurrency-control" class="hash-link" aria-label="Direct link to Pessimistic concurrency control" title="Direct link to Pessimistic concurrency control">​</a></h4>
<p>Widely used by relational databases, this approach assumes that conflicting changes are likely to happen and so blocks access to a resource in order to prevent conflicts. A typical example is locking a row before reading its data, ensuring that only the thread that placed the lock is able to make changes to the data in that row.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optimistic-concurrency-control">Optimistic concurrency control<a href="#optimistic-concurrency-control" class="hash-link" aria-label="Direct link to Optimistic concurrency control" title="Direct link to Optimistic concurrency control">​</a></h4>
<p>Used by Elasticsearch, this approach assumes that conflicts are unlikely to happen and doesn&#x27;t block operations from being attempted. However, if the underlying data has been modified between reading and writing, the update will fail. It is then up to the application to decide how it should resolve the conflict. For instance, it could reattempt the update, using the fresh data, or it could report the situation to the user.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="categories">Categories<a href="#categories" class="hash-link" aria-label="Direct link to Categories" title="Direct link to Categories">​</a></h3>
<ul>
<li><strong><a href="https://en.wikipedia.org/wiki/Optimistic_concurrency_control" target="_blank" rel="noopener noreferrer">Optimistic</a>-</strong> Delay the checking of whether a transaction meets the isolation and other integrity rules (e.g., <a href="https://en.wikipedia.org/wiki/Serializability" target="_blank" rel="noopener noreferrer">serializability</a> and <a href="https://en.wikipedia.org/wiki/Serializability#Correctness_-_recoverability" target="_blank" rel="noopener noreferrer">recoverability</a>) until its end, without blocking any of its (read, write) operations (&quot;...and be optimistic about the rules being met...&quot;), and then abort a transaction to prevent the violation, if the desired rules are to be violated upon its commit. An aborted transaction is immediately restarted and re-executed, which incurs an obvious overhead (versus executing it to the end only once). If not too many transactions are aborted, then being optimistic is usually a good strategy.</li>
<li><strong>Pessimistic-</strong> Block an operation of a transaction, if it may cause violation of the rules, until the possibility of violation disappears. Blocking operations is typically involved with performance reduction.</li>
<li><strong>Semi-optimistic-</strong> Block operations in some situations, if they may cause violation of some rules, and do not block in other situations while delaying rules checking (if needed) to transaction&#x27;s end, as done with optimistic.</li>
</ul>
<p>Different categories provide different performance, i.e., different average transaction completion rates (throughput), depending on transaction types mix, computing level of parallelism, and other factors. If selection and knowledge about trade-offs are available, then category and method should be chosen to provide the highest performance.</p>
<p>The mutual blocking between two transactions (where each one blocks the other or more) results in a <a href="https://en.wikipedia.org/wiki/Deadlock" target="_blank" rel="noopener noreferrer">deadlock</a>, where the transactions involved are stalled and cannot reach completion. Most non-optimistic mechanisms (with blocking) are prone to deadlocks which are resolved by an intentional abort of a stalled transaction (which releases the other transactions in that deadlock), and its immediate restart and re-execution. The likelihood of a deadlock is typically low.</p>
<p>Blocking, deadlocks, and aborts all result in performance reduction, and hence the trade-offs between the categories.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods">​</a></h3>
<p>Many methods for concurrency control exist. Most of them can be implemented within either main category above. The major methods, which have each many variants, and in some cases may overlap or be combined, are:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-locking-eg-two-phase-locking--2pl">1. Locking (e.g., <a href="https://en.wikipedia.org/wiki/Two-phase_locking" target="_blank" rel="noopener noreferrer">Two-phase locking</a>- 2PL)<a href="#1-locking-eg-two-phase-locking--2pl" class="hash-link" aria-label="Direct link to 1-locking-eg-two-phase-locking--2pl" title="Direct link to 1-locking-eg-two-phase-locking--2pl">​</a></h4>
<ul>
<li>Controlling access to data by <a href="https://en.wikipedia.org/wiki/Lock_(computer_science)" target="_blank" rel="noopener noreferrer">locks</a> assigned to the data. Access of a transaction to a data item (database object) locked by another transaction may be blocked (depending on lock type and access operation type) until lock release.</li>
<li><strong>Assume transactions will conflict so they must acquire locks on database objects before they are allowed to access them.</strong></li>
<li>There are two ways to deal with deadlocks in a two-phase locking (2PL) concurrency control protocol<!-- -->
<ul>
<li><strong>Deadlock Detection</strong>
<ul>
<li>Each txn maintains a queue of the txns that hold the locks that it is waiting for</li>
<li>A separate thread checks these queues for deadlocks</li>
<li>If deadlock is found, use a heuristic to decide what transaction to kill in order to break deadlock.</li>
</ul>
</li>
<li><strong>Deadlock Prevention</strong>
<ul>
<li>Check whether another txn already holds a lock when another txn requests it</li>
<li>If lock is not available, the txn will either<!-- -->
<ul>
<li>wait</li>
<li>commit suicide</li>
<li>kill the other txn</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Control-image1-6c1efba29d25eeed45dbc31577dc5634.jpg" width="999" height="292" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-serialization-graph-checking">2. Serialization <a href="https://en.wikipedia.org/wiki/Serializability#Testing_conflict_serializability" target="_blank" rel="noopener noreferrer">graph checking</a><a href="#2-serialization-graph-checking" class="hash-link" aria-label="Direct link to 2-serialization-graph-checking" title="Direct link to 2-serialization-graph-checking">​</a></h4>
<p>Also called Serializability, or Conflict, or Precedence graph checking</p>
<p>Checking for <a href="https://en.wikipedia.org/wiki/Cycle_(graph_theory)" target="_blank" rel="noopener noreferrer">cycles</a> in the schedule&#x27;s <a href="https://en.wikipedia.org/wiki/Directed_graph" target="_blank" rel="noopener noreferrer">graph</a> and breaking them by aborts.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-timestamp-orderingto">3. <a href="https://en.wikipedia.org/wiki/Timestamp-based_concurrency_control" target="_blank" rel="noopener noreferrer">Timestamp ordering</a>(TO)<a href="#3-timestamp-orderingto" class="hash-link" aria-label="Direct link to 3-timestamp-orderingto" title="Direct link to 3-timestamp-orderingto">​</a></h4>
<ul>
<li>Assigning timestamps to transactions, and controlling or checking access to data by timestamp order.</li>
<li><strong>Assume that conflicts are rare so transactions do not need to first acquire locks on database objects and instead check for conflicts at commit time.</strong></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-commitment-orderingor-commit-ordering-co">4. <a href="https://en.wikipedia.org/wiki/Commitment_ordering" target="_blank" rel="noopener noreferrer">Commitment ordering</a>(or Commit ordering; CO)<a href="#4-commitment-orderingor-commit-ordering-co" class="hash-link" aria-label="Direct link to 4-commitment-orderingor-commit-ordering-co" title="Direct link to 4-commitment-orderingor-commit-ordering-co">​</a></h4>
<p>Controlling or checking transactions&#x27; chronological order of commit events to be compatible with their respective <a href="https://en.wikipedia.org/wiki/Serializability#Testing_conflict_serializability" target="_blank" rel="noopener noreferrer">precedence order</a>.</p>
<p>Other major concurrency control types that are utilized in conjunction with the methods above include:</p>
<ul>
<li><strong><a href="https://en.wikipedia.org/wiki/Multiversion_concurrency_control" target="_blank" rel="noopener noreferrer">Multiversion concurrency control</a>(MVCC) -</strong> Increasing concurrency and performance by generating a new version of a database object each time the object is written, and allowing transactions&#x27; read operations of several last relevant versions (of each object) depending on scheduling method.</li>
<li><strong><a href="https://en.wikipedia.org/wiki/Index_locking" target="_blank" rel="noopener noreferrer">Index concurrency control</a>-</strong> Synchronizing access operations to <a href="https://en.wikipedia.org/wiki/Index_(database)" target="_blank" rel="noopener noreferrer">indexes</a>, rather than to user data. Specialized methods provide substantial performance gains.</li>
<li><strong>Private workspace model(Deferred update) -</strong> Each transaction maintains a private workspace for its accessed data, and its changed data become visible outside the transaction only upon its commit (e.g., <a href="https://en.wikipedia.org/wiki/Concurrency_control#Weikum01" target="_blank" rel="noopener noreferrer">Weikum and Vossen 2001</a>). This model provides a different concurrency control behavior with benefits in many cases.</li>
</ul>
<p>The most common mechanism type in database systems since their early days in the 1970s has been <a href="https://en.wikipedia.org/wiki/Two-phase_locking" target="_blank" rel="noopener noreferrer">Strong strict Two-phase locking</a>(SS2PL; also calledRigorous schedulingorRigorous 2PL) which is a special case (variant) of both <a href="https://en.wikipedia.org/wiki/Two-phase_locking" target="_blank" rel="noopener noreferrer">Two-phase locking</a>(2PL) and <a href="https://en.wikipedia.org/wiki/Commitment_ordering" target="_blank" rel="noopener noreferrer">Commitment ordering</a>(CO). It is pessimistic. In spite of its long name (for historical reasons) the idea of the SS2PL mechanism is simple: &quot;Release all locks applied by a transaction only after the transaction has ended.&quot; SS2PL (or Rigorousness) is also the name of the set of all schedules that can be generated by this mechanism, i.e., these are SS2PL (or Rigorous) schedules, have the SS2PL (or Rigorousness) property.</p>
<p><a href="https://en.wikipedia.org/wiki/Concurrency_control" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Concurrency_control</a></p>
<p><a href="https://www.geeksforgeeks.org/lock-based-concurrency-control-protocol-in-dbms" target="_blank" rel="noopener noreferrer">https://www.geeksforgeeks.org/lock-based-concurrency-control-protocol-in-dbms</a></p>
<p><a href="https://en.wikipedia.org/wiki/Two-phase_locking" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Two-phase_locking</a></p>
<p><a href="https://www.geeksforgeeks.org/two-phase-locking-protocol" target="_blank" rel="noopener noreferrer">https://www.geeksforgeeks.org/two-phase-locking-protocol</a></p>
<p><a href="https://vladmihalcea.com/database-deadlock" target="_blank" rel="noopener noreferrer">https://vladmihalcea.com/database-deadlock</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-ordering-to-concurrency-control">Timestamp Ordering (T/O) Concurrency Control<a href="#timestamp-ordering-to-concurrency-control" class="hash-link" aria-label="Direct link to Timestamp Ordering (T/O) Concurrency Control" title="Direct link to Timestamp Ordering (T/O) Concurrency Control">​</a></h2>
<p>Use timestamps to determine the order of transactions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-to-protocol">Basic T/O Protocol<a href="#basic-to-protocol" class="hash-link" aria-label="Direct link to Basic T/O Protocol" title="Direct link to Basic T/O Protocol">​</a></h3>
<ul>
<li>Every transaction is assigned a unique timestamp when they arrive in the system.</li>
<li>The DBMS maintains separate timestamps in each tuple&#x27;s header of the last transaction that read that tuple or wrote to it.</li>
<li>Each transaction check for conflicts on each read/write by comparing their timestamp with the timestamp of the tuple they are accessing.</li>
<li>The DBMS needs copy a tuple into the transaction&#x27;s private workspace when reading a tuple to ensure repeatable reads.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimistic-concurrency-control-occ">Optimistic Concurrency Control (OCC)<a href="#optimistic-concurrency-control-occ" class="hash-link" aria-label="Direct link to Optimistic Concurrency Control (OCC)" title="Direct link to Optimistic Concurrency Control (OCC)">​</a></h2>
<p>Store all changes in private workspace. Check for conflicts at commit time and then merge.
The protocol puts transactions through three phases during its execution:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-read-phase">1. Read Phase<a href="#1-read-phase" class="hash-link" aria-label="Direct link to 1. Read Phase" title="Direct link to 1. Read Phase">​</a></h3>
<p>Transaction&#x27;s copy tuples accessed to private work space to ensure repeatable reads, and keep track of read/write sets.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-validation-phase">2. Validation Phase<a href="#2-validation-phase" class="hash-link" aria-label="Direct link to 2. Validation Phase" title="Direct link to 2. Validation Phase">​</a></h3>
<p>When the transaction invokes COMMIT, the DBMS checks if it conflicts with other transactions. Parallel validation means that each transaction must check the read/write set of other transactions that are trying to validate at the same time. Each transaction has to acquire locks for its write set records in some global order. Original OCC uses serial validation.</p>
<p>The DBMS can proceed with the validation in two directions:</p>
<ul>
<li>Backward Validation: Check whether the committing transaction intersects its read/write sets with those of any transactions that have already committed.</li>
<li>Forward Validation: Check whether the committing transaction intersects its read/write sets with any active transactions that have not yet committed.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-write-phase">3. Write Phase<a href="#3-write-phase" class="hash-link" aria-label="Direct link to 3. Write Phase" title="Direct link to 3. Write Phase">​</a></h3>
<p>The DBMS propagates the changes in the transactions write set to the database and makes them visible to other transactions&#x27; items. As each record is updated, the transaction releases the lock acquired during the Validation Phase</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-allocation">Timestamp Allocation<a href="#timestamp-allocation" class="hash-link" aria-label="Direct link to Timestamp Allocation" title="Direct link to Timestamp Allocation">​</a></h2>
<p>There are different ways for the DBMS to allocate timestamps for transactions. Each have their own performance trade-offs.</p>
<ul>
<li><strong>Mutex:</strong> This is the worst option. Mutexes are always a terrible idea.</li>
<li><strong>Atomic Addition:</strong> Use compare-and-swap to increment a single global counter. Requires cache invalidation on write.</li>
<li><strong>Batched Atomic Addition:</strong> Use compare-and-swap to increment a single global counter in batches. Needs a back-off mechanism to prevent fast burn.</li>
<li><strong>Hardware Clock:</strong> The CPU maintains an internal clock (not wall clock) that is synchronized across all cores. Intel only. Not sure if it will exist in future CPUs.</li>
<li><strong>Hardware Counter:</strong> Single global counter maintained in hardware. Not implemented in any existing CPUs.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="observation">Observation<a href="#observation" class="hash-link" aria-label="Direct link to Observation" title="Direct link to Observation">​</a></h2>
<ul>
<li>When there is low contention, optimistic protocols perform better because the DBMS spends less time checking for conflicts</li>
<li>At high contention, the both classes of protocols degenerate to essentially the same serial execution</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarks">Benchmarks<a href="#benchmarks" class="hash-link" aria-label="Direct link to Benchmarks" title="Direct link to Benchmarks">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-read-only-workloads">1. Read-only workloads<a href="#1-read-only-workloads" class="hash-link" aria-label="Direct link to 1. Read-only workloads" title="Direct link to 1. Read-only workloads">​</a></h3>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Control-image2-84c35d8c0d395ccb35ec1667656b807e.jpg" width="998" height="505" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-write-intensive--medium-contention">2. Write-intensive / Medium-contention<a href="#2-write-intensive--medium-contention" class="hash-link" aria-label="Direct link to 2. Write-intensive / Medium-contention" title="Direct link to 2. Write-intensive / Medium-contention">​</a></h3>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Control-image3-35dd8477a63635a5fe2ddd25c0478bbd.jpg" width="999" height="502" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-write-intensive--high-contention">3. Write-intensive / High-contention<a href="#3-write-intensive--high-contention" class="hash-link" aria-label="Direct link to 3. Write-intensive / High-contention" title="Direct link to 3. Write-intensive / High-contention">​</a></h3>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Control-image4-fe490248155476267f2b4306f76bdae1.jpg" width="999" height="496" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance-bottlenecks">Performance Bottlenecks<a href="#performance-bottlenecks" class="hash-link" aria-label="Direct link to Performance Bottlenecks" title="Direct link to Performance Bottlenecks">​</a></h2>
<p>All concurrency control protocols have performance and scalability problems when there are a large number of concurrent threads and large amount of contention (i.e., the transactions are all trying to read/write to the same set of tuples).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lock-thrashing">Lock Thrashing<a href="#lock-thrashing" class="hash-link" aria-label="Direct link to Lock Thrashing" title="Direct link to Lock Thrashing">​</a></h3>
<ul>
<li>DL_DETECT, WAIT_DIE</li>
<li>Each transaction waits longer to acquire locks, causing other transaction to wait longer to acquire locks.</li>
<li>Can measure this phenomenon by removing deadlock detection/prevention overhead.</li>
<li>Force txns to acquire locks in primary key order</li>
<li>Deadlocks are not possible</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Control-image5-804ceb2315507d3f96025e8ba4010d12.jpg" width="999" height="420" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-allocation-1">Timestamp Allocation<a href="#timestamp-allocation-1" class="hash-link" aria-label="Direct link to Timestamp Allocation" title="Direct link to Timestamp Allocation">​</a></h3>
<ul>
<li>All T/O algorithms + WAIT_DIE</li>
<li>Mutex (Worst option)</li>
<li>Atomic Addition (Requires cache invaliadtion on write)</li>
<li>Batched Atomic Addition (Needs a back-off mechanism to prevent fast burn)</li>
<li>Hardware Clock (Not sure if it will exist in future CPUs)</li>
<li>Hardware Counter (Not implemented in existing CPUs)</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Control-image6-3485f11fb86b10c2b0de9d0fb9a3cdf9.jpg" width="998" height="435" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-allocation">Memory Allocation<a href="#memory-allocation" class="hash-link" aria-label="Direct link to Memory Allocation" title="Direct link to Memory Allocation">​</a></h3>
<ul>
<li>OCC + MVCC</li>
<li>Copying data on every read/write access slows down the DBMS because of contention on the memory controller.</li>
<li>In-place updates and non-copying reads are not affected as much</li>
<li>Default libc malloc is slow. Never use it</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="operational-transformation">Operational Transformation<a href="#operational-transformation" class="hash-link" aria-label="Direct link to Operational Transformation" title="Direct link to Operational Transformation">​</a></h2>
<p>Operational transformation(OT) is a technology for supporting a range of collaboration functionalities in advanced <a href="https://en.wikipedia.org/wiki/Collaborative_software" target="_blank" rel="noopener noreferrer">collaborative software</a> systems. OT was originally invented for consistency maintenance and <a href="https://en.wikipedia.org/wiki/Concurrency_control" target="_blank" rel="noopener noreferrer">concurrency control</a> in collaborative editing of plain text documents. Its capabilities have been extended and its applications expanded to include group undo, locking, conflict resolution, operation notification and compression, group-awareness, HTML/XML and tree-structured document editing, collaborative office productivity tools, application-sharing, and collaborative computer-aided media design tools.In 2009 OT was adopted as a core technique behind the collaboration features in <a href="https://en.wikipedia.org/wiki/Apache_Wave" target="_blank" rel="noopener noreferrer">Apache Wave</a> and <a href="https://en.wikipedia.org/wiki/Google_Docs" target="_blank" rel="noopener noreferrer">Google Docs</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-architecture">System architecture<a href="#system-architecture" class="hash-link" aria-label="Direct link to System architecture" title="Direct link to System architecture">​</a></h3>
<p>Collaboration systems utilizing Operational Transformations typically use replicated document storage, where each client has their own copy of the document; clients operate on their local copies in a <a href="https://en.wikipedia.org/wiki/Lock_(computer_science)" target="_blank" rel="noopener noreferrer">lock-free</a>, <a href="https://en.wikipedia.org/wiki/Blocking_(computing)" target="_blank" rel="noopener noreferrer">non-blocking</a> manner, and the changes are then propagated to the rest of the clients; this ensures the client high responsiveness in an otherwise high-latency environment such as the Internet. When a client receives the changes propagated from another client, it typically transforms the changes before executing them; the transformation ensures that application-dependent consistency criteria (<a href="https://en.wikipedia.org/wiki/Invariant_(computer_science)" target="_blank" rel="noopener noreferrer">invariants</a>) are maintained by all sites. This mode of operation results in a system particularly suited for implementing collaboration features, like simultaneous document editing, in a high-latency environment such as <a href="https://en.wikipedia.org/wiki/Www" target="_blank" rel="noopener noreferrer">the web</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consistency-models">Consistency models<a href="#consistency-models" class="hash-link" aria-label="Direct link to Consistency models" title="Direct link to Consistency models">​</a></h3>
<ul>
<li>The CC model</li>
<li>The CCI model</li>
<li>The CSM model</li>
<li>The CA model</li>
</ul>
<p>Operational Transformation (OT) is an algorithm/technique for the transformation of operations such that they can be applied to documents whose states have diverged, bringing them both back to the same state.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-operational-transformation-work">How does Operational Transformation work?<a href="#how-does-operational-transformation-work" class="hash-link" aria-label="Direct link to How does Operational Transformation work?" title="Direct link to How does Operational Transformation work?">​</a></h3>
<ul>
<li>Every change (insertion or deletion) is represented as anoperation. An operation can be applied to the current document which results into a new document state.</li>
<li>To handle concurrent operations, we use thetranformfunction that takes two operations that have been applied to the same document state (but on different clients) and computes a new operation that can be applied after the second operation and that preserves the first operation&#x27;s intended change</li>
</ul>
<p><a href="https://en.wikipedia.org/wiki/Operational_transformation" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Operational_transformation</a></p>
<p><a href="https://medium.com/coinmonks/operational-transformations-as-an-algorithm-for-automatic-conflict-resolution-3bf8920ea447" target="_blank" rel="noopener noreferrer">https://medium.com/coinmonks/operational-transformations-as-an-algorithm-for-automatic-conflict-resolution-3bf8920ea447</a></p>
<p><a href="https://operational-transformation.github.io" target="_blank" rel="noopener noreferrer">https://operational-transformation.github.io</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="differential-synchronization">Differential Synchronization<a href="#differential-synchronization" class="hash-link" aria-label="Direct link to Differential Synchronization" title="Direct link to Differential Synchronization">​</a></h2>
<p>Keeping two or more copies of the same document synchronized with each other in real-time is a complex challenge. <strong>Differential synchronization</strong> offers scalability, fault-tolerance, and responsive collaborative editing across an unreliable network.</p>
<p><a href="https://neil.fraser.name/writing/sync" target="_blank" rel="noopener noreferrer">https://neil.fraser.name/writing/sync</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/databases/concepts/concurrency-control.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-02-05T13:06:14.000Z" itemprop="dateModified">Feb 5, 2024</time></b> by <b>Deepak</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/databases/concepts/comparisons"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Comparisons</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/databases/concepts/core-concepts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Core Concepts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mysql-concurreny-control" class="table-of-contents__link toc-highlight">MySQL Concurreny Control</a></li><li><a href="#concurrency-control-mechanisms" class="table-of-contents__link toc-highlight">Concurrency control mechanisms</a><ul><li><a href="#optimistic-vs-pessimistic-locking" class="table-of-contents__link toc-highlight">Optimistic vs Pessimistic Locking</a></li><li><a href="#optimistic-vs-pessimistic-concurrency-control" class="table-of-contents__link toc-highlight">Optimistic vs Pessimistic Concurrency Control</a></li><li><a href="#categories" class="table-of-contents__link toc-highlight">Categories</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a></li></ul></li><li><a href="#timestamp-ordering-to-concurrency-control" class="table-of-contents__link toc-highlight">Timestamp Ordering (T/O) Concurrency Control</a><ul><li><a href="#basic-to-protocol" class="table-of-contents__link toc-highlight">Basic T/O Protocol</a></li></ul></li><li><a href="#optimistic-concurrency-control-occ" class="table-of-contents__link toc-highlight">Optimistic Concurrency Control (OCC)</a><ul><li><a href="#1-read-phase" class="table-of-contents__link toc-highlight">1. Read Phase</a></li><li><a href="#2-validation-phase" class="table-of-contents__link toc-highlight">2. Validation Phase</a></li><li><a href="#3-write-phase" class="table-of-contents__link toc-highlight">3. Write Phase</a></li></ul></li><li><a href="#timestamp-allocation" class="table-of-contents__link toc-highlight">Timestamp Allocation</a></li><li><a href="#observation" class="table-of-contents__link toc-highlight">Observation</a></li><li><a href="#benchmarks" class="table-of-contents__link toc-highlight">Benchmarks</a><ul><li><a href="#1-read-only-workloads" class="table-of-contents__link toc-highlight">1. Read-only workloads</a></li><li><a href="#2-write-intensive--medium-contention" class="table-of-contents__link toc-highlight">2. Write-intensive / Medium-contention</a></li><li><a href="#3-write-intensive--high-contention" class="table-of-contents__link toc-highlight">3. Write-intensive / High-contention</a></li></ul></li><li><a href="#performance-bottlenecks" class="table-of-contents__link toc-highlight">Performance Bottlenecks</a><ul><li><a href="#lock-thrashing" class="table-of-contents__link toc-highlight">Lock Thrashing</a></li><li><a href="#timestamp-allocation-1" class="table-of-contents__link toc-highlight">Timestamp Allocation</a></li><li><a href="#memory-allocation" class="table-of-contents__link toc-highlight">Memory Allocation</a></li></ul></li><li><a href="#operational-transformation" class="table-of-contents__link toc-highlight">Operational Transformation</a><ul><li><a href="#system-architecture" class="table-of-contents__link toc-highlight">System architecture</a></li><li><a href="#consistency-models" class="table-of-contents__link toc-highlight">Consistency models</a></li><li><a href="#how-does-operational-transformation-work" class="table-of-contents__link toc-highlight">How does Operational Transformation work?</a></li></ul></li><li><a href="#differential-synchronization" class="table-of-contents__link toc-highlight">Differential Synchronization</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Deep Notes, Built with ❤️</div></div></div></footer></div>
</body>
</html>