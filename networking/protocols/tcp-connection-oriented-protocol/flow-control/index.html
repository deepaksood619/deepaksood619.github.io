<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-networking/protocols/tcp-connection-oriented-protocol/flow-control" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Flow Control | Deep Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deepaksood619.github.io/img/timeline_compressed.webp"><meta data-rh="true" name="twitter:image" content="https://deepaksood619.github.io/img/timeline_compressed.webp"><meta data-rh="true" property="og:url" content="https://deepaksood619.github.io/networking/protocols/tcp-connection-oriented-protocol/flow-control"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Flow Control | Deep Notes"><meta data-rh="true" name="description" content="Flow Control basically means that TCP will ensure that a sender is not overwhelming a receiver by sending packets faster than it can consume. It&#x27;s pretty similar to what&#x27;s normally called Back pressure in the Distributed Systems literature. The idea is that a node receiving data will send some kind of feedback to the node sending the data to let it know about its current condition."><meta data-rh="true" property="og:description" content="Flow Control basically means that TCP will ensure that a sender is not overwhelming a receiver by sending packets faster than it can consume. It&#x27;s pretty similar to what&#x27;s normally called Back pressure in the Distributed Systems literature. The idea is that a node receiving data will send some kind of feedback to the node sending the data to let it know about its current condition."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://deepaksood619.github.io/networking/protocols/tcp-connection-oriented-protocol/flow-control"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/networking/protocols/tcp-connection-oriented-protocol/flow-control" hreflang="en"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/networking/protocols/tcp-connection-oriented-protocol/flow-control" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X3OY8NGHVH-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSZMJXWSH3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSZMJXWSH3",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TN3KBF4",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Deep Notes" href="/opensearch.xml">
<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(53, 120, 229)">

<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5616865131274062" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.de817004.css">
<script src="/assets/js/runtime~main.9e930f49.js" defer="defer"></script>
<script src="/assets/js/main.bf643ed8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN3KBF4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deep Notes</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/deepaksood619" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.linkedin.com/in/deepaksood619/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/about-deepak-sood/">About Deepak Sood</a><button aria-label="Expand sidebar category &#x27;About Deepak Sood&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ai/">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/algorithms/">Algorithms</a><button aria-label="Expand sidebar category &#x27;Algorithms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/book-summaries/">Book Summaries</a><button aria-label="Expand sidebar category &#x27;Book Summaries&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/">Cloud</a><button aria-label="Expand sidebar category &#x27;Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/computer-science/">Computer Science</a><button aria-label="Expand sidebar category &#x27;Computer Science&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/courses/">Courses / Certifications</a><button aria-label="Expand sidebar category &#x27;Courses / Certifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-structures/">Data Structures</a><button aria-label="Expand sidebar category &#x27;Data Structures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases/">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/decentralized-applications/">Decentralized Applications</a><button aria-label="Expand sidebar category &#x27;Decentralized Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/economics/">Economics</a><button aria-label="Expand sidebar category &#x27;Economics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/knowledge/">Knowledge</a><button aria-label="Expand sidebar category &#x27;Knowledge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/languages/">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/management/">Management</a><button aria-label="Expand sidebar category &#x27;Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/mathematics/">Mathematics</a><button aria-label="Expand sidebar category &#x27;Mathematics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/networking/">Networking</a><button aria-label="Collapse sidebar category &#x27;Networking&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/networking/mqtt/">MQTT</a><button aria-label="Expand sidebar category &#x27;MQTT&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/networking/networking-concepts/">Networking Concepts</a><button aria-label="Expand sidebar category &#x27;Networking Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/networking/others/">Others</a><button aria-label="Expand sidebar category &#x27;Others&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/networking/protocols/">Protocols</a><button aria-label="Collapse sidebar category &#x27;Protocols&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/amqp">AMQP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/dns-domain-name-system">DNS Domain Name System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/graphql">GraphQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/http-3-quic">HTTP/3 QUIC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/http-https">HTTP / HTTPS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/http-status-code">Http Status Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/intro">Protocols</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/messaging">Messaging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/openapi">OpenAPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/openthread">OpenThread</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/others">Others</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/protocols-intro">Protocols Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/rest-representational-state-transfer-restful">REST Representational State Transfer / RESTFul</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/rsocket">Rsocket</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/networking/protocols/tcp-connection-oriented-protocol/">TCP (Connection Oriented Protocol)</a><button aria-label="Collapse sidebar category &#x27;TCP (Connection Oriented Protocol)&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/networking/protocols/tcp-connection-oriented-protocol/flow-control">Flow Control</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/udp">UDP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/video-live-streaming">Video / Live Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/weave">Weave</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/websockets">WebSockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/networking/protocols/zeromq-distributed-messaging">ZeroMQ: Distributed Messaging</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/psychology/">Psychology</a><button aria-label="Expand sidebar category &#x27;Psychology&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Deepak&#x27;s Wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/technologies/">Technologies</a><button aria-label="Expand sidebar category &#x27;Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/networking/"><span itemprop="name">Networking</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/networking/protocols/"><span itemprop="name">Protocols</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/networking/protocols/tcp-connection-oriented-protocol/"><span itemprop="name">TCP (Connection Oriented Protocol)</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Flow Control</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Flow Control</h1></header>
<p>Flow Control basically means that TCP will ensure that a sender is not overwhelming a receiver by sending packets faster than it can consume. It&#x27;s pretty similar to what&#x27;s normally called <em>Back pressure</em> in the Distributed Systems literature. The idea is that a node receiving data will send some kind of feedback to the node sending the data to let it know about its current condition.</p>
<p>It&#x27;s important to understand that this is not the same as <em>Congestion Control</em>. Although there&#x27;s some overlap between the mechanisms TCP uses to provide both services, they are distinct features. Congestion control is about preventing a node from overwhelming the network (i.e. the links between two nodes), while Flow Control is about the end-node.</p>
<p><strong>Additive increase, Multiplicative decrease</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rwnd---receiver-window-and-cwnd---congestion-window">rwnd - Receiver Window and cwnd - Congestion Window<a href="#rwnd---receiver-window-and-cwnd---congestion-window" class="hash-link" aria-label="Direct link to rwnd - Receiver Window and cwnd - Congestion Window" title="Direct link to rwnd - Receiver Window and cwnd - Congestion Window">​</a></h2>
<p>Congestion Window (cwnd) is a TCP state variable that limits the amount of data the <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" target="_blank" rel="noopener noreferrer">TCP</a> can send into the network before receiving an <a href="https://en.wikipedia.org/wiki/Acknowledgement_(data_networks)" target="_blank" rel="noopener noreferrer">ACK</a>. The Receiver Window (rwnd) is a variable that advertises the amount of data that the destination side can receive. Together, the two variables are used to regulate data flow in TCP connections, minimize congestion, and improve network performance.</p>
<p><a href="https://blog.stackpath.com/glossary-cwnd-and-rwnd" target="_blank" rel="noopener noreferrer">https://blog.stackpath.com/glossary-cwnd-and-rwnd</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How it works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How it works" title="Direct link to How it works">​</a></h2>
<p>When we need to send data over a network, this is normally what happens.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image1-accc54fc8876694eb23c8561f194df4b.jpg" width="742" height="649" class="img_ev3q"></p>
<p>The sender application writes data to a socket, the transport layer (in our case, TCP) will wrap this data in a segment and hand it to the network layer (e.g.IP), that will somehow route this packet to the receiving node.</p>
<p>On the other side of this communication, the network layer will deliver this piece of data toTCP, that will make it available to the receiver application as an exact copy of the data sent, meaning if will not deliver packets out of order, and will wait for a retransmission in case it notices a gap in the byte stream.</p>
<p>If we zoom in, we will see something like this.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image2-6642cfd158c4494964e27a1ac3d533c7.jpg" width="854" height="499" class="img_ev3q"></p>
<p>TCP stores the data it needs to send in thesend buffer, and the data it receives in thereceive buffer. When the application is ready, it will then read data from the receive buffer.</p>
<p>Flow Control is all about making sure we don&#x27;t send more packets when the receive buffer is already full, as the receiver wouldn&#x27;t be able to handle them and would need to drop these packets.</p>
<p>To control the amount of data thatTCPcan send, the receiver will advertise its<strong>Receive Window (rwnd)</strong>, that is, the spare room in the receive buffer.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image3-cde656574da8d661bbe4703a7c3c264f.jpg" width="643" height="475" class="img_ev3q"></p>
<p>Every time TCP receives a packet, it needs to send an ack message to the sender, acknowledging it received that packet correctly, and with this ack message it sends the value of the current receive window, so the sender knows if it can keep sending data.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-sliding-window">The sliding window<a href="#the-sliding-window" class="hash-link" aria-label="Direct link to The sliding window" title="Direct link to The sliding window">​</a></h2>
<p>TCP uses a sliding window protocol to control the number of bytes in flight it can have. In other words, the number of bytes that were sent but not yet acked.</p>
<p>Let&#x27;s say we want to send a 150000 bytes file from node A to node B. TCP could break this file down into 100 packets, 1500 bytes each. Now let&#x27;s say that when the connection between node A and B is established, node B advertises a receive window of 45000 bytes, because it really wants to help us with our math here.</p>
<p>Seeing that, TCPknows it can send the first 30 packets (1500 * 30 = 45000) before it receives an acknowledgment. If it gets anackmessage for the first 10 packets (meaning we now have only 20 packets in flight), and the receive window present in theseackmessages is still 45000, it can send the next 10 packets, bringing the number of packets in flight back to 30, that is the limit defined by the receive window. In other words, at any given point in time it can have 30 packets in flight, that were sent but not yetacked.</p>
<p><img decoding="async" loading="lazy" alt="image" src="data:image/jpeg;base64,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cwD3e8Z6BsXAVFCOSHJDkgj9jOaG8b4jp1HWbITxHJDkhyQS6yPvrEizR3blKf4vuef+XSkTkfE/JTYB8McQD5n5qbFz81NgHwxxAPmfmpsWz8xNgHwxxAPmfmpsXPzU2AfDHEA+Z+amxbPzE2AfDHEA+Z+amxc/NTYB8McQD5n5qbFs/MTYB8McQD5n5qbFz81NgHwxxAPmfmpsWz8xNgHw/wCtAU5J72W1auM3Yz2sAU5J72W1auM3Yz2sAU5J7WW1auM3Yz2sAU5J72W1auM3Yz2sAU5J7WW1auM3Yz2sAU5J72W1auM3Yz2sAU5J7WW1auM3Yz2sAU5J72W1auM3Yz2sAU5J7WWdav8A9IP/2gAMAwEAAgADAAAAEAgggggggggggggggggggggggggggggggggggggggggggggggggggggggggggghGmMfvwgggggggggggggggggggggggggggggiSRRSSSRRI4qk1ySSRRSSSgggggggggggggggggggggggQwggggggggggggggggggoQgggggggggggghQxARagjUWAhQiAQQniRSJ4AgIJxCZbAiQHAjQjgSSSQkkEiArQhA0atQygEQlizqkdFqBgQgArhgQ/IVQt4pakQlZAr7FEjyPQj3GIj1J7zzC7jzpKD4jHQiyKAigF775EggggggggggiShhgiihhgiihhgiihhgiiQgggggggggggggggggggggggookQgookQgookUgookQggggggggggggggggggggggggggggggggggggggggggggggggggggggggggv/EACIRAAMAAgEEAwEBAAAAAAAAAAABETFxECFBUYFAUGEwIP/aAAgBAwEBPxD71KQSJME/QUkJIiIiLyJISREfgsEFwNkXkSQkiIiIvIkvkP4rfX+yJsScqMgU9Chj0KeioSNcIohj6C1wiYkLwkmQEehQfgU9FRMKeiiRofQ9cTp05b4ZcJ9BZLnHgPP+HIicNDMxHnhgZmYsjdCyN14XgRhw/YyE1weGYsGYuEqNXubGxEsE6SmxsRI7GxsQu4jYX6I88HXc2NhQavc2Nhfg12psbESH4psbESFs2NiPJ5GxsbF/m+pCMjIyMjIyMjIyMjIyMjZGRkZGKj+OmVlZWVibKysrKxNlZWVlYmysrKysTf3f/8QAHhEA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" width="695" height="157" class="img_ev3q"></p>
<p>Example of a sliding window. As soon as packet 3 is acked, we can slide the window to the right and send the packet 8.</p>
<p>Now, if for some reason the application reading these packets in node B slows down, TCP will still ack the packets that were correctly received, but as these packets need to be stored in the receive buffer until the application decides to read them, the receive window will be smaller, so even if TCP receives the acknowledgment for the next 10 packets (meaning there are currently 20 packets, or 30000 bytes, in flight), but the receive window value received in this ack is now 30000 (instead of 45000), it will not send more packets, as the number of bytes in flight is already equal to the latest receive window advertised.</p>
<p>The sender will always keep this invariant:</p>
<p><code>LastByteSent - LastByteAcked &lt;= ReceiveWindowAdvertised</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="visualizing-the-receive-window">Visualizing the Receive Window<a href="#visualizing-the-receive-window" class="hash-link" aria-label="Direct link to Visualizing the Receive Window" title="Direct link to Visualizing the Receive Window">​</a></h2>
<p>Just to see this behavior in action, let&#x27;s write a very simple application that reads data from a socket and watch how the receive window behaves when we make this application slower. We will use Wireshark to see these packets, netcat to send data to this application, and ago program to read data from the socket.</p>
<p>Here&#x27;s the simple go program that reads and prints the data received:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;bufio&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> listener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;tcp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost:3040&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> bufio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ReadBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This program will simply listen to connections on port 3040 and print the string received.</p>
<p>We can then use net cat to send data to this application:</p>
<p><code>$ nc localhost 3040</code></p>
<p>Now let&#x27;s run this command to create a stream of data. It will simply add the string &quot;foo&quot; to a file, that we will use to send to this application:</p>
<p>$ while true; do echo &quot;foo&quot; &gt; stream.txt; done
And now let&#x27;s send this data to the application:</p>
<p>tail -f stream.txt | nc localhost 3040</p>
<p>The application is still fast enough to keep up with the work, though. So let&#x27;s make it a bit slower to see what happens:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;bufio&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&quot;time&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;tcp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost:3040&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> bufio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ReadBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we are sleeping for 1 second before we read data from the receive buffer. If we run netcat again and observe Wireshark, it doesn&#x27;t take long until the receive buffer is full and TCP starts advertising a 0 window size:</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image5-9b06cd071900d4b179ee36cf27c29aaa.jpg" width="999" height="693" class="img_ev3q"></p>
<p>At this moment TCP will stop transmitting data, as the receiver&#x27;s buffer is full.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-persist-timer">The persist timer<a href="#the-persist-timer" class="hash-link" aria-label="Direct link to The persist timer" title="Direct link to The persist timer">​</a></h2>
<p>There&#x27;s still one problem, though. After the receiver advertises a zero window, if it doesn&#x27;t send any otherackmessage to the sender (or if theackis lost), it will never know when it can start sending data again. We will have a deadlock situation, where the receiver is waiting for more data, and the sender is waiting for a message saying it can start sending data again.
To solve this problem, whenTCPreceives a zero-window message it starts the <em>persist timer</em>, that will periodically send a small packet to the receiver (usually calledWindowProbe), so it has a chance to advertise a nonzero window size.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image6-ac5ec705dab0e0d75e75f08716ba5746.jpg" width="999" height="693" class="img_ev3q"></p>
<p>When there&#x27;s some spare space in the receiver&#x27;s buffer again it can advertise a non-zero window size and the transmission can continue.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recap">Recap<a href="#recap" class="hash-link" aria-label="Direct link to Recap" title="Direct link to Recap">​</a></h2>
<ul>
<li>TCP&#x27;s flow control is a mechanism to ensure the sender is not overwhelming the receiver with more data than it can handle;</li>
<li>With everyackmessage the receiver advertises its current receive window;</li>
<li>The receive window is the spare space in the receive buffer, that is, rwnd = ReceiveBuffer - (LastByteReceived -- LastByteReadByApplication);</li>
<li>TCPwill use a sliding window protocol to make sure it never has more bytes in flight than the window advertised by the receiver;</li>
<li>When the window size is 0, TCPwill stop transmitting data and will start the persist timer;</li>
<li>It will then periodically send a smallWindowProbemessage to the receiver to check if it can start receiving data again;</li>
<li>When it receives a non-zero window size, it resumes the transmission.</li>
</ul>
<p><a href="https://www.brianstorti.com/tcp-flow-control" target="_blank" rel="noopener noreferrer">https://www.brianstorti.com/tcp-flow-control</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tcp-slow-start">TCP Slow Start<a href="#tcp-slow-start" class="hash-link" aria-label="Direct link to TCP Slow Start" title="Direct link to TCP Slow Start">​</a></h2>
<p>Slow start is a mechanism which balances the speed of a TCP network connection. It escalates the amount of data transmitted until it finds the network&#x27;s maximum carrying capacity.cwdnstands for the Congestion Window.</p>
<p>BitTorrent uses tcp slow start slow start increases total throughput by keeping networks busy as in &quot;sliding window&quot; and also it solves end-to-end flow control by allowing the receiver to restrict transmission until it has sufficient buffer space to accommodate more data. Whenever the receiver sends ACK, the available buffer space is attached to the ACK (which is known as &#x27;window advertisement&#x27;), so that the sender can decide its window size.
In TCP, the window size is defined as the minimum value between <strong>cwnd(congestion window size)</strong> and window advertisement.At any time, the window size cannot be greater thanmaximum cwndwhich is fixed.</p>
<p>Not only when the sender starts to transmit at the first time, but also after collision and after idle periods between the sender and the receiver, TCP transmits its data in &quot;slow start&quot; fashion.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image7-c400d1d4972afa22e43e5d4d25bc3093.jpg" width="880" height="498" class="img_ev3q"></p>
<p><a href="https://www.isi.edu/nsnam/DIRECTED_RESEARCH/DR_HYUNAH/D-Research/slow-start-tcp.html" target="_blank" rel="noopener noreferrer">https://www.isi.edu/nsnam/DIRECTED_RESEARCH/DR_HYUNAH/D-Research/slow-start-tcp.html</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="flow-control-vs-congestion-control">Flow Control vs Congestion Control<a href="#flow-control-vs-congestion-control" class="hash-link" aria-label="Direct link to Flow Control vs Congestion Control" title="Direct link to Flow Control vs Congestion Control">​</a></h2>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image8-c04948e11b49bf112023aaf44cf14db1.jpg" width="999" height="430" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tcp-backlog">TCP Backlog<a href="#tcp-backlog" class="hash-link" aria-label="Direct link to TCP Backlog" title="Direct link to TCP Backlog">​</a></h2>
<p>Wait, what is the TCP backlog? An application wishing to accept incoming TCP connections must issue thelistensyscall. This syscall instructs the OS to proceed with the TCP 3-way handshake when it receives initial SYN packets. During a handshake, metadata for a connection is maintained in a queue called the TCP backlog. The length of this queue dictates how many TCP connections can be establishing concurrently. The application issues accept syscalls to dequeue connections once they are established; this action frees space in the backlog for new connections.</p>
<p>A backlog length of 1 means the queue will be full while just a single connection is establishing and then waiting to be dequeued. When the queue is full, the OS will drop initial SYN packets from other new connections. A client will resend an initial SYN packet if it doesn&#x27;t receive a response, but after a couple attempts, it will stop and report failure to connect.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image9-11cadfc38e05ddcabe81475861a5cbbe.jpg" width="600" height="330" class="img_ev3q"></p>
<p>Why would setting the backlog length to 1 occasionally result in HTTP 502s? Most of the time, there are already established connections between the ALB and our API service, so the backlog length does not matter. However, when our service is unusually idle or is about to be upgraded, these connections are closed. A burst of API requests from just a single client at this point could cause the ALB to attempt to establish new TCP connections concurrently. Contention for the single slot in the TCP backlog would cause some of these connections to eventually report failure. The ALB responds to this failure by returning HTTP 502.</p>
<p><a href="http://veithen.io/2014/01/01/how-tcp-backlog-works-in-linux.html" target="_blank" rel="noopener noreferrer">http://veithen.io/2014/01/01/how-tcp-backlog-works-in-linux.html</a></p>
<p>When an application puts a socket into LISTEN state using the <a href="http://linux.die.net/man/2/listen" target="_blank" rel="noopener noreferrer">listen</a> syscall, it needs to specify a backlog for that socket. The backlog is usually described as the limit for the queue of incoming connections.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/TCP-Connection-Oriented-Protocol_Flow-Control-image10-ec3b1e14e908f98542e86f49b5774730.jpg" width="660" height="400" class="img_ev3q"></p>
<p>Because of the 3-way handshake used by TCP, an incoming connection goes through an intermediate state SYN RECEIVED before it reaches the ESTABLISHED state and can be returned by the <a href="http://linux.die.net/man/2/accept" target="_blank" rel="noopener noreferrer">accept</a> syscall to the application (see the part of the <a href="http://commons.wikimedia.org/wiki/File:Tcp_state_diagram_fixed.svg" target="_blank" rel="noopener noreferrer">TCP state diagram</a> reproduced above). This means that a TCP/IP stack has two options to implement the backlog queue for a socket in LISTEN state:</p>
<ol>
<li>
<p>The implementation uses a single queue, the size of which is determined by thebacklogargument of thelistensyscall. When a SYN packet is received, it sends back a SYN/ACK packet and adds the connection to the queue. When the corresponding ACK is received, the connection changes its state to ESTABLISHED and becomes eligible for handover to the application. This means that the queue can contain connections in two different state: SYN RECEIVED and ESTABLISHED. Only connections in the latter state can be returned to the application by theacceptsyscall.</p>
</li>
<li>
<p>The implementation uses two queues, a SYN queue (or incomplete connection queue) and an accept queue (or complete connection queue). Connections in state SYN RECEIVED are added to the SYN queue and later moved to the accept queue when their state changes to ESTABLISHED, i.e. when the ACK packet in the 3-way handshake is received. As the name implies, theacceptcall is then implemented simply to consume connections from the accept queue. In this case, thebacklogargument of thelistensyscall determines the size of the accept queue.</p>
</li>
</ol>
<p>Note that a &quot;listen backlog&quot; of 100 connections doesn&#x27;t mean that your server can only handle 100 simultaneous (or total) connections - this is instead dependent on the number of configured processes or threads. The listen backlog is a socket setting telling the kernel how to limit the number of outstanding (as yet unaccapted) connections in the listen queue of a listening socket. If the number of pending connections exceeds the specified size, new ones are automatically rejected. A functioning server regularly servicing its connections should not require a large backlog size</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/networking/protocols/tcp-connection-oriented-protocol/flow-control.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-12-05T17:29:12.000Z" itemprop="dateModified">Dec 5, 2023</time></b> by <b>Deepak</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/networking/protocols/tcp-connection-oriented-protocol/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">TCP (Connection Oriented Protocol)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/networking/protocols/udp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">UDP</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#rwnd---receiver-window-and-cwnd---congestion-window" class="table-of-contents__link toc-highlight">rwnd - Receiver Window and cwnd - Congestion Window</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How it works</a></li><li><a href="#the-sliding-window" class="table-of-contents__link toc-highlight">The sliding window</a></li><li><a href="#visualizing-the-receive-window" class="table-of-contents__link toc-highlight">Visualizing the Receive Window</a></li><li><a href="#the-persist-timer" class="table-of-contents__link toc-highlight">The persist timer</a></li><li><a href="#recap" class="table-of-contents__link toc-highlight">Recap</a></li><li><a href="#tcp-slow-start" class="table-of-contents__link toc-highlight">TCP Slow Start</a></li><li><a href="#flow-control-vs-congestion-control" class="table-of-contents__link toc-highlight">Flow Control vs Congestion Control</a></li><li><a href="#tcp-backlog" class="table-of-contents__link toc-highlight">TCP Backlog</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Deep Notes, Built with ❤️</div></div></div></footer></div>
</body>
</html>