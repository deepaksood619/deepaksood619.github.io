<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-computer-science/operating-system/concurrency-threading" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Concurrency / Threading | Deep Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deepaksood619.github.io/img/timeline_compressed.webp"><meta data-rh="true" name="twitter:image" content="https://deepaksood619.github.io/img/timeline_compressed.webp"><meta data-rh="true" property="og:url" content="https://deepaksood619.github.io/computer-science/operating-system/concurrency-threading"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Concurrency / Threading | Deep Notes"><meta data-rh="true" name="description" content="Concurrency"><meta data-rh="true" property="og:description" content="Concurrency"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://deepaksood619.github.io/computer-science/operating-system/concurrency-threading"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/computer-science/operating-system/concurrency-threading" hreflang="en"><link data-rh="true" rel="alternate" href="https://deepaksood619.github.io/computer-science/operating-system/concurrency-threading" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X3OY8NGHVH-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSZMJXWSH3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZSZMJXWSH3",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-TN3KBF4",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Deep Notes" href="/opensearch.xml">
<link rel="icon" href="/img/logo.webp">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(53, 120, 229)">

<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5616865131274062" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.de817004.css">
<script src="/assets/js/runtime~main.b1ae7157.js" defer="defer"></script>
<script src="/assets/js/main.4ada0125.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN3KBF4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Deep Notes</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/deepaksood619" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.linkedin.com/in/deepaksood619/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/about-deepak-sood/">About Deepak Sood</a><button aria-label="Expand sidebar category &#x27;About Deepak Sood&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ai/">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/algorithms/">Algorithms</a><button aria-label="Expand sidebar category &#x27;Algorithms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/book-summaries/">Book Summaries</a><button aria-label="Expand sidebar category &#x27;Book Summaries&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/">Cloud</a><button aria-label="Expand sidebar category &#x27;Cloud&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/computer-science/">Computer Science</a><button aria-label="Collapse sidebar category &#x27;Computer Science&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/distributed-system/">Distributed System</a><button aria-label="Expand sidebar category &#x27;Distributed System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/general/">General</a><button aria-label="Expand sidebar category &#x27;General&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/interview-question/">Interview Question</a><button aria-label="Expand sidebar category &#x27;Interview Question&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/iot/">IOT</a><button aria-label="Expand sidebar category &#x27;IOT&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/links">Links</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/computer-science/operating-system/">Operating System</a><button aria-label="Collapse sidebar category &#x27;Operating System&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/basic-computer-organization">Basic Computer Organization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/cache-access-patterns">Cache Access Patterns (Writing Policies)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/cache-coherence-invalidation">Cache Coherence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/caches-caching">Caches / Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/caching-strategies-topologies">Caching Strategies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/compilers">Compilers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/concepts">Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/concurrency-models-async">Concurrency Models - Async</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/concurrency-problems">Concurrency Problems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/computer-science/operating-system/concurrency-threading">Concurrency / Threading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/coroutines">Coroutines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/cpu-gpu-tpu">CPU | GPU | TPU</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/disk-io">Disk IO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/dram">DRAM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/journaling-file-system">Journaling File System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/memory-allocation">Memory Allocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/memory-layout">Memory Layout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/memory-mapping-mmap">Memory Mapping mmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/memory">Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/microprocessor">Microprocessor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/others">Others</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/parallel-processing">Parallel Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/raid">RAID</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/scheduling">Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/swap-paging-caching">Swap / Paging / Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/unix-linux-file-system">Unix / Linux File System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/unix-linux">Unix / Linux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/computer-science/operating-system/write-ahead-log-wal">Write Ahead Log, WAL</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/others/">Others</a><button aria-label="Expand sidebar category &#x27;Others&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/programming-concepts/">Programming Concepts</a><button aria-label="Expand sidebar category &#x27;Programming Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/programming-paradigms/">Programming Paradigms</a><button aria-label="Expand sidebar category &#x27;Programming Paradigms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/security/">Security</a><button aria-label="Expand sidebar category &#x27;Security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/software-engineering/">Software Engineering</a><button aria-label="Expand sidebar category &#x27;Software Engineering&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/system-design/">System Design</a><button aria-label="Expand sidebar category &#x27;System Design&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/computer-science/testing/">Testing</a><button aria-label="Expand sidebar category &#x27;Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/courses/">Courses / Certifications</a><button aria-label="Expand sidebar category &#x27;Courses / Certifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-structures/">Data Structures</a><button aria-label="Expand sidebar category &#x27;Data Structures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/databases/">Databases</a><button aria-label="Expand sidebar category &#x27;Databases&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/decentralized-applications/">Decentralized Applications</a><button aria-label="Expand sidebar category &#x27;Decentralized Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/economics/">Economics</a><button aria-label="Expand sidebar category &#x27;Economics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/knowledge/">Knowledge</a><button aria-label="Expand sidebar category &#x27;Knowledge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/languages/">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/management/">Management</a><button aria-label="Expand sidebar category &#x27;Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/mathematics/">Mathematics</a><button aria-label="Expand sidebar category &#x27;Mathematics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/psychology/">Psychology</a><button aria-label="Expand sidebar category &#x27;Psychology&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/python/">Python</a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Deepak&#x27;s Wiki</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/technologies/">Technologies</a><button aria-label="Expand sidebar category &#x27;Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/computer-science/"><span itemprop="name">Computer Science</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/computer-science/operating-system/"><span itemprop="name">Operating System</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Concurrency / Threading</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Concurrency / Threading</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="concurrency">Concurrency<a href="#concurrency" class="hash-link" aria-label="Direct link to Concurrency" title="Direct link to Concurrency">​</a></h2>
<ul>
<li>Composition of independently executing functions/processes</li>
<li>Parallelism is the simultaneous execution of multiple things, possible related and possibly not.</li>
<li>Concurrency is about dealing with a lot of things at once while parallelism is about doing a lot of things at once</li>
<li>Concurrent - Mouse, keyboard, display and disk drivers</li>
<li>Parallel - Vector dot product</li>
<li>Adding some design can increase the speed of program execution (Analogy is of grofers working together to load books into the incinerator)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="process">Process<a href="#process" class="hash-link" aria-label="Direct link to Process" title="Direct link to Process">​</a></h2>
<p>In general, most processes can be described as either <strong><a href="https://en.wikipedia.org/wiki/I/O-bound" target="_blank" rel="noopener noreferrer">I/O-bound</a> or <a href="https://en.wikipedia.org/wiki/CPU-bound" target="_blank" rel="noopener noreferrer">CPU-bound</a></strong>.</p>
<p>An I/O-bound process is one that spends more of its time doing I/O than it spends doing computations.</p>
<p>A CPU-bound process, in contrast, generates I/O requests infrequently, using more of its time doing computations. It is important that a long-term scheduler selects a good process mix of I/O-bound and CPU-bound processes.</p>
<p>If all processes are I/O-bound, the ready queue will almost always be empty, and the short-term scheduler will have little to do. On the other hand, if all processes are CPU-bound, the I/O waiting queue will almost always be empty, devices will go unused, and again the system will be unbalanced.</p>
<p>The system with the best performance will thus have a combination of CPU-bound and I/O-bound processes. In modern operating systems, this is used to make sure that real-time processes get enough CPU time to finish their tasks.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="threads">Threads<a href="#threads" class="hash-link" aria-label="Direct link to Threads" title="Direct link to Threads">​</a></h2>
<p>A thread is just a sequence of instructions that can be executed independently by a processor. Threads are lighter than the process and so you can spawn a lot of them.</p>
<p>A real life application would be a web server.</p>
<p>A webserver typically is designed to handle multiple requests at the same time. And these requests normally don&#x27;t depend on each other.</p>
<p>So a Thread can be created (or taken from a Thread pool) and requests can be delegated, to achieve concurrency.</p>
<p>Modern processors can executed multiple threads at once (multi-threading) and also switch between threads to achieve parallelism.A thread is a flow of execution through the process code. It has its own program counter that keeps track of which instruction to execute next. It also has system registers which hold its current working variables, and a stack which contains the execution history.</p>
<p>A thread shares with its peer threads various information like code segment, data segment, and open files. When one thread alters a code segment memory item, all other threads see that.</p>
<p>A thread is also called a<strong>lightweight process</strong>. Threads provide a way to improve application performance through parallelism. Threads represent a software approach to improving the performance of operating systems by reducing the overhead. A thread is equivalent to a classical process.</p>
<p>Each thread belongs to exactly one process, and no thread can exist outside a process. Each thread represents a separate flow of control. Threads have been successfully used in implementing network servers and web servers. They also provide a suitable foundation for parallel execution of applications on shared memory multiprocessors.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Threading-image1-b3544c1c4dd5d430703b0c3d5a5cd0b2.jpg" width="704" height="406" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-of-threads">Advantages of threads<a href="#advantages-of-threads" class="hash-link" aria-label="Direct link to Advantages of threads" title="Direct link to Advantages of threads">​</a></h2>
<ul>
<li>They minimize the context switching time.</li>
<li>Using them provides concurrency within a process.</li>
<li>They provide efficient communication.</li>
<li>It is more economical to create and context switch threads.</li>
<li>Threads allow utilization of multiprocessor architectures to a greater scale and efficiency.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="threads-are-implemented-in-the-following-two-ways">Threads are implemented in the following two ways<a href="#threads-are-implemented-in-the-following-two-ways" class="hash-link" aria-label="Direct link to Threads are implemented in the following two ways" title="Direct link to Threads are implemented in the following two ways">​</a></h2>
<ul>
<li>User Level Threads<!-- -->:User-managed<!-- --> threads.</li>
<li>Kernel Level Threads<!-- -->:Operating<!-- --> System-managed threads acting on a kernel, an operating system core.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-level-threads">User Level Threads<a href="#user-level-threads" class="hash-link" aria-label="Direct link to User Level Threads" title="Direct link to User Level Threads">​</a></h2>
<p>In this case, the thread management kernel is not aware of the existence of threads. The thread library contains code for creating and destroying threads, for passing messages and data between threads, for scheduling thread execution, and for saving and restoring thread contexts. The application starts with a single thread.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Threading-image2-f36ad69739913c9ba367d5647d0eb3af.jpg" width="462" height="274" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advantages">Advantages<a href="#advantages" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h2>
<ul>
<li>Thread switching does not require Kernel mode privileges.</li>
<li>User level thread can run on any operating system.</li>
<li>Scheduling can be application-specific in the user level thread.</li>
<li>User level threads are fast to create and manage.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages">Disadvantages<a href="#disadvantages" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h2>
<ul>
<li>In a typical operating system, most system calls are blocking.</li>
<li>Multithreaded application cannot take advantage of multiprocessing.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kernel-level-threads">Kernel Level Threads<a href="#kernel-level-threads" class="hash-link" aria-label="Direct link to Kernel Level Threads" title="Direct link to Kernel Level Threads">​</a></h2>
<p>In this case, thread management is done by the Kernel. There is no thread management code in the application area. Kernel threads are supported directly by the operating system. Any application can be programmed to be multithreaded. All of the threads within an application are supported within a single process.</p>
<p>The Kernel maintains context information for the process as a whole and for individuals threads within the process. Scheduling by the Kernel is done on a thread basis. The Kernel performs thread creation, scheduling, and management in Kernel space. Kernel threads are generally slower to create and manage than the user threads.</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/Concurrency-Threading-image3-f4eaf32253620ba0b855f1f3fd553f78.jpg" width="461" height="273" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-1">Advantages<a href="#advantages-1" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">​</a></h2>
<ul>
<li>The Kernel can simultaneously schedule multiple threads from the same process on multiple processes.</li>
<li>If one thread in a process is blocked, the Kernel can schedule another thread of the same process.</li>
<li>Kernel routines themselves can be multithreaded.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="disadvantages-1">Disadvantages<a href="#disadvantages-1" class="hash-link" aria-label="Direct link to Disadvantages" title="Direct link to Disadvantages">​</a></h2>
<ul>
<li>Kernel threads are generally slower to create and manage than the user threads.</li>
<li>Transfer of control from one thread to another within the same process requires a mode switch to the Kernel.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="threads-vs-processes">Threads vs Processes<a href="#threads-vs-processes" class="hash-link" aria-label="Direct link to Threads vs Processes" title="Direct link to Threads vs Processes">​</a></h2>
<ul>
<li>Threads <strong>uses shared state</strong>, so there is an ease of communication between multiple threads, but the disadvantage of shared state is that there can be race condition, multiple threads can race with each other to get access to resources.</li>
<li>Processes <strong>doesn&#x27;t have shared state</strong>, they are fully independent from each other. The weakness of processes is lack of communication (hence the need for IPC and object pickling and other overhead)- Threads are more lightweight and have lower overhead compared to processes. Spawning processes is a bit slower than spawning threads.</li>
</ul>
<table><thead><tr><th><strong>Bottleneck</strong></th><th><strong>Example</strong></th><th><strong>Optimize with</strong></th></tr></thead><tbody><tr><td>IO</td><td>Network connection, file operation</td><td>Multithreading</td></tr><tr><td>CPU</td><td>Complex math problem, search</td><td>Multiprocessing</td></tr></tbody></table>
<p><a href="https://zacs.site/blog/linear-python.html" target="_blank" rel="noopener noreferrer">https://zacs.site/blog/linear-python.html</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="programs-vs-threads-vs-processes">Programs vs Threads vs Processes<a href="#programs-vs-threads-vs-processes" class="hash-link" aria-label="Direct link to Programs vs Threads vs Processes" title="Direct link to Programs vs Threads vs Processes">​</a></h3>
<p>A Program is an executable file containing a set of instructions and passively stored on disk. One program can have multiple processes. For example, the Chrome browser creates a different process for every single tab.</p>
<p>A Process means a program is in execution. When a program is loaded into the memory and becomes active, the program becomes a process. The process requires some essential resources such as registers, program counter, and stack.</p>
<p>A Thread is the smallest unit of execution within a process.</p>
<p>The following process explains the relationship between program, process, and thread.</p>
<ol>
<li>The program contains a set of instructions.</li>
<li>The program is loaded into memory. It becomes one or more running processes.</li>
<li>When a process starts, it is assigned memory and resources. A process can have one or more threads. For example, in the Microsoft Word app, a thread might be responsible for spelling checking and the other thread for inserting text into the doc.</li>
</ol>
<p>Main differences between process and thread:</p>
<ul>
<li>Processes are usually independent, while threads exist as subsets of a process.</li>
<li>Each process has its own memory space. Threads that belong to the same process share the same memory.</li>
<li>A process is a heavyweight operation. It takes more time to create and terminate.</li>
<li>Context switching is more expensive between processes.</li>
<li>Inter-thread communication is faster for threads.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="program vs process vs threads" src="/assets/images/Pasted image 20240723230943-ac28d647794d37c4c4c56e49cab60bdc.jpg" width="1000" height="1056" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="are-threads-lighter-than-processes">Are Threads Lighter than Processes<a href="#are-threads-lighter-than-processes" class="hash-link" aria-label="Direct link to Are Threads Lighter than Processes" title="Direct link to Are Threads Lighter than Processes">​</a></h2>
<p>Yes and No.</p>
<p>In concept,</p>
<ol>
<li>
<p>Threads share memory and don&#x27;t need to create a new virtual memory space when they are created and thus don&#x27;t require a MMU (memory management unit) context switch</p>
</li>
<li>
<p>Communication between threads is simpler as they have a shared memory while processes requires various modes of IPC (Inter-Process Communications) like semaphores, message queues, pipes etc.</p>
</li>
</ol>
<p>That being said, this doesn&#x27;t always guarantee a better performance than processes in this multi-core processor world.</p>
<p>e.g. Linux doesn&#x27;t distinguish between threads and processes and both are called tasks. Each task can have a minimum to maximum level of sharing when cloned.</p>
<p>When you callfork(), a new task is created with no shared file descriptors, PIDs and memory space. When you callpthread_create(), a new task is created with all of the above shared.</p>
<p>Also, synchronising data in <a href="https://users.cs.cf.ac.uk/Dave.Marshall/C/node27.html" target="_blank" rel="noopener noreferrer">shared memory</a> as well as in <a href="https://www.quora.com/What-is-the-L1-L2-and-L3-cache-of-a-microprocessor-and-how-does-it-affect-the-performance-of-it-For-example-I-have-a-laptop-with-an-Intel-4700MQ-microprocessor-with-a-6MB-L3-cache-What-does-this-value-indicate" target="_blank" rel="noopener noreferrer">L1 cache</a> of tasks running on multiple cores takes a bigger toll than running different processes on isolated memory.</p>
<p>Linux developers have tried to minimise the cost between task switch and have succeeded at it. Creating a new task is still a bigger overhead than a new thread but switching is not.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-can-be-improved-in-threads">What can be improved in Threads?<a href="#what-can-be-improved-in-threads" class="hash-link" aria-label="Direct link to What can be improved in Threads?" title="Direct link to What can be improved in Threads?">​</a></h2>
<p>There are three things which make threads slow:</p>
<ol>
<li>Threads consume a lot of memory due to their large stack size (≥ 1MB). So creating 1000s of thread means you already need 1GB of memory.</li>
<li>Threads need to restore a lot of registers some of which include AVX( Advanced vector extension), SSE (Streaming SIMD Ext.), Floating Point registers, Program Counter (PC), Stack Pointer (SP) which hurts the application performance.</li>
<li>Threads setup and teardown requires call to OS for resources (such as memory) which is slow.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="threads-vs-async">Threads vs Async<a href="#threads-vs-async" class="hash-link" aria-label="Direct link to Threads vs Async" title="Direct link to Threads vs Async">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="threads-1">Threads<a href="#threads-1" class="hash-link" aria-label="Direct link to Threads" title="Direct link to Threads">​</a></h2>
<p>Threads switch preemptively. This is convenient because you don&#x27;t need to add explicit code to cause a task switch.</p>
<p>The cost of this convenience is that you have to assume a switch can happen at any time. Accordingly, critical sections have to be guarded with locks. Dinning Philosophers Problem.</p>
<p>The limit on threads is total CPU power minus the cost of task switches and synchronization overhead.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="async">Async<a href="#async" class="hash-link" aria-label="Direct link to Async" title="Direct link to Async">​</a></h2>
<p>Async switches cooperatively, so you do need to add explicit code &quot;yield&quot; or &quot;await&quot; to cause a task switch.</p>
<p>Now you control when task switches occur, so locks and other synchronization are no longer needed.</p>
<p>Also, the cost task switches is very low. Calling a pure Python function has more overhead than restarting a generator or awaitable.</p>
<p>This means that async is very cheap.</p>
<p>In return, you&#x27;ll need a non-blocking version of just about everything you do. Accordingly, the async world has a huge ecosystem of support tools. This increases the learning curve.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparison">Comparison<a href="#comparison" class="hash-link" aria-label="Direct link to Comparison" title="Direct link to Comparison">​</a></h2>
<ul>
<li>Async maximizes CPU utilization because it has less overhead than threads.</li>
<li>Threading typically works with existing code and tools as long as locks are added around critical sections.</li>
<li>For complex systems, async ismucheasier to get right than threads with locks.</li>
<li>Threads require very little tooling (locks and queues).</li>
<li>Async needs a great deal of tooling (futures, event loops, and non-blocking versions of just about everything).</li>
<li>In a threaded system the decision to suspend one thread and execute another is largely outside of the programmer&#x27;s control. Rather, it is under the control of the operating system, and the programmer must assume that a thread may be suspended and replaced with another at almost any time. In contrast, under the asynchronous model a task will continue to run until it explicitly relinquishes control to other tasks.- The problem with locks is that it just a flag, and it should be checked to access the resources. If you don&#x27;t check then there would be problems.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="considerations">Considerations<a href="#considerations" class="hash-link" aria-label="Direct link to Considerations" title="Direct link to Considerations">​</a></h2>
<ul>
<li>Threading</li>
<li>Multiprocessing</li>
<li>Async</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="amdahls-law">Amdahl&#x27;s Law<a href="#amdahls-law" class="hash-link" aria-label="Direct link to Amdahl&#x27;s Law" title="Direct link to Amdahl&#x27;s Law">​</a></h2>
<p>Amdahl&#x27;s law is often used in parallel computing to predict the theoretical speedup when using multiple processors. For example, if a program needs 20 hours using a single processor core, and a particular part of the program which takes one hour to execute cannot be parallelized, while the remaining 19 hours (p = 0.95) of execution time can be parallelized, then regardless of how many processors are devoted to a parallelized execution of this program, the minimum execution time cannot be less than that critical one hour. Hence, the theoretical speedup is limited to at most 20 times(1/(1−p)=20). For this reason parallel computing is relevant only for a low number of processors and very parallelizable programs</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="process-control-block">Process Control Block<a href="#process-control-block" class="hash-link" aria-label="Direct link to Process Control Block" title="Direct link to Process Control Block">​</a></h2>
<ol>
<li>Process State</li>
<li>Process Number</li>
<li>Program Counter</li>
<li>Registers</li>
<li>Memory Limits</li>
<li>List of open Files</li>
<li>Signal Mask</li>
<li>CPU Scheduling info</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="synchronization">Synchronization<a href="#synchronization" class="hash-link" aria-label="Direct link to Synchronization" title="Direct link to Synchronization">​</a></h2>
<p>Synchronizationrefers to one of two distinct but related concepts</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="process-synchronization">Process Synchronization<a href="#process-synchronization" class="hash-link" aria-label="Direct link to Process Synchronization" title="Direct link to Process Synchronization">​</a></h3>
<p>Process synchronization refers to the idea that multiple processes are to join up or <a href="https://en.wikipedia.org/wiki/Handshaking" target="_blank" rel="noopener noreferrer">handshake</a> at a certain point, in order to reach an agreement or commit to a certain sequence of action.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-synchronization">Data Synchronization<a href="#data-synchronization" class="hash-link" aria-label="Direct link to Data Synchronization" title="Direct link to Data Synchronization">​</a></h3>
<p><a href="https://en.wikipedia.org/wiki/Data_synchronization" target="_blank" rel="noopener noreferrer">Data synchronization</a> refers to the idea of keeping multiple copies of a dataset in coherence with one another, or to maintain <a href="https://en.wikipedia.org/wiki/Data_integrity" target="_blank" rel="noopener noreferrer">data integrity</a></p>
<p>Process synchronization primitives are commonly used to implement data synchronization.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="need-for-synchronization">Need for synchronization<a href="#need-for-synchronization" class="hash-link" aria-label="Direct link to Need for synchronization" title="Direct link to Need for synchronization">​</a></h2>
<p>The need for synchronization does not arise merely in multi-processor systems but for any kind of concurrent processes; even in single processor systems. Mentioned below are some of the main needs for synchronization:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Fork-join_model" target="_blank" rel="noopener noreferrer">Forks and Joins</a>:When<!-- --> a job arrives at a fork point, it is split into N sub-jobs which are then serviced by n tasks. After being serviced, each sub-job waits until all other sub-jobs are done processing. Then, they are joined again and leave the system. Thus, in parallel programming, we require synchronization as all the parallel processes wait for several other processes to occur.</li>
<li><a href="https://en.wikipedia.org/wiki/Producer%E2%80%93consumer_problem" target="_blank" rel="noopener noreferrer">Producer-Consumer:</a> In a producer-consumer relationship, the consumer process is dependent on the producer process till the necessary data has been produced.</li>
<li>Exclusive use resources<!-- -->:When<!-- --> multiple processes are dependent on a resource and they need to access it at the same time the operating system needs to ensure that only one processor accesses it at a given point in time.This reduces concurrency.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-of-synchronization">Implementation of Synchronization<a href="#implementation-of-synchronization" class="hash-link" aria-label="Direct link to Implementation of Synchronization" title="Direct link to Implementation of Synchronization">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spinlock">Spinlock<a href="#spinlock" class="hash-link" aria-label="Direct link to Spinlock" title="Direct link to Spinlock">​</a></h3>
<p>Another effective way of implementing synchronization is by using spinlocks. Before accessing any shared resource or piece of code, every processor checks a flag. If the flag is reset, then the processor sets the flag and continues executing the thread. But, if the flag is set (locked), the threads would keep spinning in a loop and keep checking if the flag is set or not. But, spinlocks are effective only if the flag is reset for lower cycles otherwise it can lead to performance issues as it wastes many processor cycles waiting.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="barriers">Barriers<a href="#barriers" class="hash-link" aria-label="Direct link to Barriers" title="Direct link to Barriers">​</a></h3>
<p>Barriers are simple to implement and provide good responsiveness. They are based on the concept of implementing wait cycles to provide synchronization. Consider three threads running simultaneously, starting from barrier 1. After time t, thread1 reaches barrier 2 but it still has to wait for thread 2 and 3 to reach barrier2 as it does not have the correct data. Once all the threads reach barrier 2 they all start again. After time t, thread 1 reaches barrier3 but it will have to wait for threads 2 and 3 and the correct data again.</p>
<p>Thus, in barrier synchronization of multiple threads there will always be a few threads that will end up waiting for other threads as in the above example thread 1 keeps waiting for thread 2 and 3. This results in severe degradation of the process performance.</p>
<p>In <a href="https://en.wikipedia.org/wiki/Parallel_computing" target="_blank" rel="noopener noreferrer">parallel computing</a>, abarrieris a type of <a href="https://en.wikipedia.org/wiki/Synchronization_(computer_science)" target="_blank" rel="noopener noreferrer">synchronization</a> method. A barrier for a group of threads or processes in the source code means any thread/process must stop at this point and cannot proceed until all other threads/processes reach this barrier.</p>
<p>Many collective routines and directive-based parallel languages impose implicit barriers. For example, a paralleldoloop in <a href="https://en.wikipedia.org/wiki/Fortran" target="_blank" rel="noopener noreferrer">Fortran</a> with <a href="https://en.wikipedia.org/wiki/OpenMP" target="_blank" rel="noopener noreferrer">OpenMP</a> will not be allowed to continue on any thread until the last iteration is completed. This is in case the program relies on the result of the loop immediately after its completion. In <a href="https://en.wikipedia.org/wiki/Message_passing" target="_blank" rel="noopener noreferrer">message passing</a>, any global communication (such as reduction or scatter) may imply a barrier.</p>
<p><a href="https://en.wikipedia.org/wiki/Barrier_(computer_science)" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Barrier_(computer_science)</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semaphores">Semaphores<a href="#semaphores" class="hash-link" aria-label="Direct link to Semaphores" title="Direct link to Semaphores">​</a></h3>
<p>Semaphores are signalling mechanisms which can allow one or more threads/processors to access a section. A Semaphore has a flag which has a certain fixed value associated with it and each time a thread wishes to access the section, it decrements the flag. Similarly, when the thread leaves the section, the flag is incremented. If the flag is zero, the thread cannot access the section and gets blocked if it chooses to wait.</p>
<p>Some semaphores would allow only one thread or process in the code section. Such Semaphores are called binary semaphore and are very similar to Mutex. Here, if the value of semaphore is 1, the thread is allowed to access and if the value is 0, the access is denied.</p>
<p><a href="https://en.wikipedia.org/wiki/Synchronization_(computer_science)" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Synchronization_(computer_science)</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hyper---threading-technology-htt">Hyper - Threading Technology (HTT)<a href="#hyper---threading-technology-htt" class="hash-link" aria-label="Direct link to Hyper - Threading Technology (HTT)" title="Direct link to Hyper - Threading Technology (HTT)">​</a></h2>
<p>Hyper-threading(officially calledHyper-Threading TechnologyorHT Technologyand abbreviated asHTTorHT) is <a href="https://en.wikipedia.org/wiki/Intel" target="_blank" rel="noopener noreferrer">Intel&#x27;s</a><a href="https://en.wikipedia.org/wiki/Proprietary_hardware" target="_blank" rel="noopener noreferrer">proprietary</a><a href="https://en.wikipedia.org/wiki/Simultaneous_multithreading" target="_blank" rel="noopener noreferrer">simultaneous multithreading</a>(SMT) implementation used to improve <a href="https://en.wikipedia.org/wiki/Parallel_computation" target="_blank" rel="noopener noreferrer">parallelization</a> of computations (doing multiple tasks at once) performed on <a href="https://en.wikipedia.org/wiki/X86" target="_blank" rel="noopener noreferrer">x86</a> microprocessors. It first appeared in February 2002 on <a href="https://en.wikipedia.org/wiki/Xeon" target="_blank" rel="noopener noreferrer">Xeon</a> server <a href="https://en.wikipedia.org/wiki/Central_processing_unit" target="_blank" rel="noopener noreferrer">processors</a> and in November 2002 on <a href="https://en.wikipedia.org/wiki/Pentium_4" target="_blank" rel="noopener noreferrer">Pentium4</a> desktop CPUs.Later, Intel included this technology in <a href="https://en.wikipedia.org/wiki/Itanium" target="_blank" rel="noopener noreferrer">Itanium</a>, <a href="https://en.wikipedia.org/wiki/Intel_Atom" target="_blank" rel="noopener noreferrer">Atom</a>, and <a href="https://en.wikipedia.org/wiki/Intel_Core" target="_blank" rel="noopener noreferrer">Core &#x27;i&#x27; Series</a> CPUs, among others.</p>
<p>For each <a href="https://en.wikipedia.org/wiki/Processor_core" target="_blank" rel="noopener noreferrer">processor core</a> that is physically present, the <a href="https://en.wikipedia.org/wiki/Operating_system" target="_blank" rel="noopener noreferrer">operating system</a> addresses two virtual (logical) cores and shares the workload between them when possible. The main function of hyper-threading is to increase the number of independent instructions in the pipeline; it takes advantage of <a href="https://en.wikipedia.org/wiki/Superscalar_processor" target="_blank" rel="noopener noreferrer">superscalar</a> architecture, in which multiple instructions operate on separate data <a href="https://en.wikipedia.org/wiki/Parallel_computing" target="_blank" rel="noopener noreferrer">in parallel</a>. With HTT, one physical core appears as two processors to the operating system, allowing <a href="https://en.wikipedia.org/wiki/Concurrent_computing" target="_blank" rel="noopener noreferrer">concurrent</a> scheduling of two processes per core. In addition, two or more processes can use the same resources: If resources for one process are not available, then another process can continue if its resources are available.</p>
<p>In addition to requiring simultaneous multithreading (SMT) support in the operating system, hyper-threading can be properly utilized only with an operating system specifically optimized for it.Furthermore, Intel recommends HTT to be disabled when using operating systems unaware of this hardware feature.</p>
<p><a href="https://en.wikipedia.org/wiki/Hyper-threading" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Hyper-threading</a></p>
<p>Multithreading, concurrency, locks, synchronization</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="compare-and-swap-cas">Compare and Swap (CAS)<a href="#compare-and-swap-cas" class="hash-link" aria-label="Direct link to Compare and Swap (CAS)" title="Direct link to Compare and Swap (CAS)">​</a></h2>
<p>Compare and Swap is an atomic structure used in multithreading to achieve synchronization. It compares the contents of a memory location with a given value and, only if they are the same, modifies the contents of that memory location to a new given value. This is done as a single atomic operation. The atomicity guarantees that the new value is calculated based on up-to-date information; if the value had been updated by another thread in the meantime, the write would fail. The result of the operation must indicate whether it performed the substitution; this can be done either with a simple <a href="https://en.wikipedia.org/wiki/Boolean_logic" target="_blank" rel="noopener noreferrer">boolean</a> response (this variant is often called<strong>compare-and-set</strong>), or by returning the value read from the memory location (<em>not</em>the value written to it).</p>
<p>Atomic instruction that compares contents of a memory location M to a given value V</p>
<ul>
<li>If values are equal, installs new given value V&#x27; in M</li>
<li>Otherwise operation fails</li>
</ul>
<p><code>__sync_bool_compare_and_swap(&amp;M, 20, 30)</code></p>
<p><code>__sync_bool_compare_and_swap(Address, Compare Value, New Value)</code></p>
<p><a href="https://en.wikipedia.org/wiki/Compare-and-swap" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Compare-and-swap</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2>
<p><a href="/python/advanced/concurrency">Concurrency</a></p>
<p><a href="https://schneems.com/2017/10/23/wtf-is-a-thread/" target="_blank" rel="noopener noreferrer">https://schneems.com/2017/10/23/wtf-is-a-thread/#</a></p>
<p>Dijkstra&#x27;s Guarded Commands - <a href="https://en.wikipedia.org/wiki/Guarded_Command_Language" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Guarded_Command_Language</a></p>
<p><a href="http://www.usingcsp.com/" target="_blank" rel="noopener noreferrer">Communicating Sequential Processes, by C. A. R. Hoare (PDF Version)</a></p>
<p><a href="https://vimeo.com/49718712" target="_blank" rel="noopener noreferrer">Rob Pike - &#x27;Concurrency Is Not Parallelism&#x27;</a></p>
<p><a href="https://towardsdatascience.com/demystifying-python-multiprocessing-and-multithreading-9b62f9875a27" target="_blank" rel="noopener noreferrer">Demystifying Python Multiprocessing and Multithreading | by David Chong | Towards Data Science</a></p>
<p><a href="https://www.youtube.com/watch?v=kBHd7kn_1EU" target="_blank" rel="noopener noreferrer">Peeking into assembly code to understand why count++ is not atomic - YouTube</a></p>
<p><a href="https://www.youtube.com/watch?v=Vk2BEiYGeQc" target="_blank" rel="noopener noreferrer">How to write deadlock free code? - YouTube</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/deepaksood619/deepaksood619.github.io/tree/master/docs/computer-science/operating-system/concurrency-threading.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-12-18T20:45:26.000Z" itemprop="dateModified">Dec 18, 2024</time></b> by <b>Deepak</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/computer-science/operating-system/concurrency-problems"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Concurrency Problems</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/computer-science/operating-system/coroutines"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Coroutines</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concurrency" class="table-of-contents__link toc-highlight">Concurrency</a></li><li><a href="#process" class="table-of-contents__link toc-highlight">Process</a></li><li><a href="#threads" class="table-of-contents__link toc-highlight">Threads</a></li><li><a href="#advantages-of-threads" class="table-of-contents__link toc-highlight">Advantages of threads</a></li><li><a href="#threads-are-implemented-in-the-following-two-ways" class="table-of-contents__link toc-highlight">Threads are implemented in the following two ways</a></li><li><a href="#user-level-threads" class="table-of-contents__link toc-highlight">User Level Threads</a></li><li><a href="#advantages" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#disadvantages" class="table-of-contents__link toc-highlight">Disadvantages</a></li><li><a href="#kernel-level-threads" class="table-of-contents__link toc-highlight">Kernel Level Threads</a></li><li><a href="#advantages-1" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#disadvantages-1" class="table-of-contents__link toc-highlight">Disadvantages</a></li><li><a href="#threads-vs-processes" class="table-of-contents__link toc-highlight">Threads vs Processes</a><ul><li><a href="#programs-vs-threads-vs-processes" class="table-of-contents__link toc-highlight">Programs vs Threads vs Processes</a></li></ul></li><li><a href="#are-threads-lighter-than-processes" class="table-of-contents__link toc-highlight">Are Threads Lighter than Processes</a></li><li><a href="#what-can-be-improved-in-threads" class="table-of-contents__link toc-highlight">What can be improved in Threads?</a></li><li><a href="#threads-vs-async" class="table-of-contents__link toc-highlight">Threads vs Async</a></li><li><a href="#threads-1" class="table-of-contents__link toc-highlight">Threads</a></li><li><a href="#async" class="table-of-contents__link toc-highlight">Async</a></li><li><a href="#comparison" class="table-of-contents__link toc-highlight">Comparison</a></li><li><a href="#considerations" class="table-of-contents__link toc-highlight">Considerations</a></li><li><a href="#amdahls-law" class="table-of-contents__link toc-highlight">Amdahl&#39;s Law</a></li><li><a href="#process-control-block" class="table-of-contents__link toc-highlight">Process Control Block</a></li><li><a href="#synchronization" class="table-of-contents__link toc-highlight">Synchronization</a><ul><li><a href="#process-synchronization" class="table-of-contents__link toc-highlight">Process Synchronization</a></li><li><a href="#data-synchronization" class="table-of-contents__link toc-highlight">Data Synchronization</a></li></ul></li><li><a href="#need-for-synchronization" class="table-of-contents__link toc-highlight">Need for synchronization</a></li><li><a href="#implementation-of-synchronization" class="table-of-contents__link toc-highlight">Implementation of Synchronization</a><ul><li><a href="#spinlock" class="table-of-contents__link toc-highlight">Spinlock</a></li><li><a href="#barriers" class="table-of-contents__link toc-highlight">Barriers</a></li><li><a href="#semaphores" class="table-of-contents__link toc-highlight">Semaphores</a></li></ul></li><li><a href="#hyper---threading-technology-htt" class="table-of-contents__link toc-highlight">Hyper - Threading Technology (HTT)</a></li><li><a href="#compare-and-swap-cas" class="table-of-contents__link toc-highlight">Compare and Swap (CAS)</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Deep Notes, Built with ❤️</div></div></div></footer></div>
</body>
</html>